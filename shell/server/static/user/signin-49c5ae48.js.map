{"version":3,"file":"signin-49c5ae48.js","sources":["../src/pages/signin/signin-html.jsx","../src/pages/signin/ldod-signin.js","../src/pages/signin/signin.js"],"sourcesContent":["/** @format */\n\nimport constants from '../constants';\nimport { hidePassword, revealPassword } from '../common-functions';\nimport { userReferences } from '../../user-references';\nimport '@core';\n\nlet gauth;\n\nasync function prefetchGoogleAuth() {\n\tif (gauth) return;\n\tgauth = (await import('./google-auth')).default;\n}\n\nasync function googleAuth(lang) {\n\tawait gauth(lang);\n}\n\nexport default (language, root) => (\n\t<>\n\t\t<h2 data-user-key=\"title\">{constants[language].title}</h2>\n\t\t<form id=\"login-form\" class=\"needs-validation\" novalidate onSubmit={root.onSubmit}>\n\t\t\t<div id=\"login-form-username\" class=\"form-floating\">\n\t\t\t\t<input\n\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\tname=\"username\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"username\"\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t\t<label for=\"login-form-username\" data-user-key=\"username\">\n\t\t\t\t\t{constants[language].username}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"input-group\">\n\t\t\t\t<div id=\"login-form-password\" class=\"form-floating\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<label for=\"login-form-password\" data-user-key=\"password\">\n\t\t\t\t\t\t{constants[language].password}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<button id=\"user-password-btn\" class=\"btn\" type=\"button\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tdata-input=\"div#login-form-password > input\"\n\t\t\t\t\t\tid=\"user-password-icon\"\n\t\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\t\ticon=\"eye\"\n\t\t\t\t\t\thover-fill=\"#0d6efd\"\n\t\t\t\t\t\tonPointerDown={revealPassword}\n\t\t\t\t\t\tonPointerUp={hidePassword}></span>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<button type=\"submit\" class=\"btn btn-primary\" data-user-key=\"signin\">\n\t\t\t\t{constants[language].signin}\n\t\t\t</button>\n\t\t</form>\n\t\t<button\n\t\t\tid=\"user-google-auth\"\n\t\t\ttype=\"button\"\n\t\t\tclass=\"btn btn-light\"\n\t\t\tonPointerOver={prefetchGoogleAuth}\n\t\t\tonClick={() => googleAuth(language)}>\n\t\t\t<div style={{ display: 'grid', gridTemplateColumns: '10% 80% 10%' }}>\n\t\t\t\t<span class=\"google-icon\"></span>\n\t\t\t\t<span>Google</span>\n\t\t\t</div>\n\t\t</button>\n\t\t<a data-user-key=\"signup\" is=\"nav-to\" to={userReferences.signup()} class=\"link-primary\">\n\t\t\t{constants[language].signup}\n\t\t</a>\n\t</>\n);\n","/** @format */\n\nimport signinHtml from './signin-html';\nimport constants from '../constants';\nimport formsCss from '@ui/bootstrap/forms-css.js';\nimport buttonsCss from '@ui/bootstrap/buttons-css.js';\nimport hostCss from '../host.css?inline';\nimport style from './style.css?inline';\n\nimport '@core-ui';\nimport { signinRequest } from '../../api-requests';\nimport { onAuthFail, onAuthSuccess, resetForm } from '../common-functions';\n\nconst sheet = new CSSStyleSheet();\nsheet.replaceSync(formsCss + buttonsCss + hostCss + style);\nexport default class LdodSignin extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tthis.shadowRoot.adoptedStyleSheets = [sheet];\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tget form() {\n\t\treturn this.shadowRoot.querySelector('form');\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['language'];\n\t}\n\n\tconnectedCallback() {\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tthis.shadowRoot.appendChild(signinHtml(this.language, this));\n\t}\n\n\tattributeChangedCallback(name, oldValue, newValue) {\n\t\tthis.onChangedAttribute[name](oldValue, newValue);\n\t}\n\n\tonChangedAttribute = {\n\t\tlanguage: (oldV, newV) => this.onLanguage(oldV, newV),\n\t};\n\n\tonLanguage = (oldValue, newValue) => {\n\t\tif (oldValue !== newValue)\n\t\t\tthis.shadowRoot.querySelectorAll('[data-user-key]').forEach(ele => {\n\t\t\t\tele.firstChild.textContent = constants[this.language][ele.dataset.userKey];\n\t\t\t});\n\t};\n\n\tonSubmit = async event => {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tthis.form.classList.add('was-validated');\n\t\tif (this.form.checkValidity()) {\n\t\t\tawait signinRequest(Object.fromEntries(new FormData(this.form)))\n\t\t\t\t.then(res => res && res.accessToken && onAuthSuccess(res.accessToken))\n\t\t\t\t.catch(onAuthFail);\n\t\t\tresetForm(this.form);\n\t\t}\n\t};\n}\n\n!customElements.get('ldod-signin') && customElements.define('ldod-signin', LdodSignin);\n","import './ldod-signin';\n\nconst mount = (lang, ref) => {\n\tconst signin = document.createElement('ldod-signin');\n\tsignin.setAttribute('language', lang);\n\tdocument.querySelector(ref).appendChild(signin);\n};\nconst unMount = () => document.querySelector('ldod-signin')?.remove();\n\nconst path = '/signin';\n\nexport { mount, unMount, path };\n"],"names":["gauth","async","prefetchGoogleAuth","import","default","signinHtml","language","root","createElement","createFragment","constants","title","id","class","novalidate","onSubmit","name","type","placeholder","required","for","username","password","is","icon","onPointerDown","revealPassword","onPointerUp","hidePassword","signin","onPointerOver","onClick","lang","googleAuth","style","display","gridTemplateColumns","to","userReferences","signup","sheet","CSSStyleSheet","replaceSync","formsCss","buttonsCss","hostCss","LdodSignin","HTMLElement","constructor","super","this","attachShadow","mode","shadowRoot","adoptedStyleSheets","getAttribute","form","querySelector","observedAttributes","connectedCallback","render","appendChild","attributeChangedCallback","oldValue","newValue","onChangedAttribute","oldV","newV","onLanguage","querySelectorAll","forEach","ele","firstChild","textContent","dataset","userKey","event","preventDefault","stopPropagation","classList","add","checkValidity","signinRequest","Object","fromEntries","FormData","then","res","accessToken","onAuthSuccess","catch","onAuthFail","resetForm","customElements","get","define","mount","ref","document","setAttribute","unMount","remove","path"],"mappings":"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"}