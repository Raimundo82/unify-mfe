{"version":3,"file":"change-password-08bd13d8.js","sources":["../src/pages/change-password/change-password-html.jsx","../src/pages/change-password/ldod-change-password.js","../src/pages/change-password/change-password.js"],"sourcesContent":["import { getState } from '../../store';\nimport { hidePassword, revealPassword } from '../common-functions';\nimport constants from '../constants';\nexport default (language, root) => {\n\treturn (\n\t\t<>\n\t\t\t<h2 data-user-key=\"changePassword\">{constants[language].changePassword}</h2>\n\t\t\t<form id=\"change-password-form\" class=\"needs-validation\" novalidate onSubmit={root.onSubmit}>\n\t\t\t\t<input type=\"hidden\" name=\"username\" value={getState().user?.username || ''} />\n\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t<div id=\"current-password\" class=\"form-floating\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\t\tname=\"currentPassword\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"current password\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<label for=\"current-password\" data-user-key=\"currentPassword\">\n\t\t\t\t\t\t\t{constants[language].currentPassword}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button id=\"user-password-btn\" class=\"btn\" type=\"button\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tdata-input=\"div#current-password > input\"\n\t\t\t\t\t\t\tid=\"user-password-icon\"\n\t\t\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\t\t\ticon=\"eye\"\n\t\t\t\t\t\t\thover-fill=\"#0d6efd\"\n\t\t\t\t\t\t\tonPointerDown={revealPassword}\n\t\t\t\t\t\t\tonPointerUp={hidePassword}></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t<div id=\"new-password\" class=\"form-floating\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\t\tname=\"newPassword\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tpattern=\"[0-9a-zA-Z]{6,}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"invalid-tooltip\" data-user-key=\"passwordLength\">\n\t\t\t\t\t\t\t{constants[language].passwordLength}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<label for=\"new-password\" data-user-key=\"newPassword\">\n\t\t\t\t\t\t\t{constants[language].newPassword}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button id=\"user-password-btn\" class=\"btn\" type=\"button\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tdata-input=\"div#new-password > input\"\n\t\t\t\t\t\t\tid=\"user-password-icon\"\n\t\t\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\t\t\ticon=\"eye\"\n\t\t\t\t\t\t\thover-fill=\"#0d6efd\"\n\t\t\t\t\t\t\tonPointerDown={revealPassword}\n\t\t\t\t\t\t\tonPointerUp={hidePassword}></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t<div id=\"confirm-password\" class=\"form-floating\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\t\tname=\"retypedPassword\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tpattern=\"[0-9a-zA-Z]{6,}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"invalid-tooltip\" data-user-key=\"passwordLength\">\n\t\t\t\t\t\t\t{constants[language].passwordLength}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<label for=\"confirm-password\" data-user-key=\"confirmPassword\">\n\t\t\t\t\t\t\t{constants[language].confirmPassword}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button id=\"user-password-btn\" class=\"btn\" type=\"button\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tdata-input=\"div#confirm-password > input\"\n\t\t\t\t\t\t\tid=\"user-password-icon\"\n\t\t\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\t\t\ticon=\"eye\"\n\t\t\t\t\t\t\thover-fill=\"#0d6efd\"\n\t\t\t\t\t\t\tonPointerDown={revealPassword}\n\t\t\t\t\t\t\tonPointerUp={hidePassword}></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\" data-user-key=\"update\">\n\t\t\t\t\t{constants[language].update}\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</>\n\t);\n};\n","/** @format */\n\nimport changePasswordHtml from './change-password-html';\nimport constants from '../constants';\nimport formsCss from '@ui/bootstrap/forms-css.js';\nimport buttonsCss from '@ui/bootstrap/buttons-css.js';\nimport hostCss from '../host.css?inline';\n\nimport '@core-ui';\n\nimport { errorPublisher } from '../../events-modules';\nimport { changePasswordRequest } from '../../api-requests';\nimport { onChangePassword, onChangePasswordFail, redirectToHome } from '../common-functions';\nimport { getState } from '../../store';\n\nconst sheet = new CSSStyleSheet();\nsheet.replaceSync(formsCss + buttonsCss + hostCss);\n\nexport default class LdodChangePassword extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tthis.shadowRoot.adoptedStyleSheets = [sheet];\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['language'];\n\t}\n\n\tconnectedCallback() {\n\t\tif (!getState().user) return redirectToHome();\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tthis.shadowRoot.appendChild(changePasswordHtml(this.language, this));\n\t}\n\tattributeChangedCallback(name, oldValue, newValue) {\n\t\tthis.onChangedAttribute[name](oldValue, newValue);\n\t}\n\n\tonChangedAttribute = {\n\t\tlanguage: (oldV, newV) => this.onLanguage(oldV, newV),\n\t};\n\n\tonLanguage = (oldValue, newValue) => {\n\t\tif (oldValue !== newValue)\n\t\t\tthis.shadowRoot.querySelectorAll('[data-user-key]').forEach(ele => {\n\t\t\t\tele.firstChild.textContent = constants[this.language][ele.dataset.userKey];\n\t\t\t});\n\t\tthis.shadowRoot\n\t\t\t.querySelectorAll('[language]')\n\t\t\t.forEach(element => element.setAttribute('language', this.language));\n\t};\n\n\tpasswordsValidation(formData) {\n\t\tif (!formData.username) return false;\n\t\tif (formData.currentPassword === formData.newPassword) {\n\t\t\terrorPublisher(constants[this.language].currentNew);\n\t\t\treturn false;\n\t\t}\n\t\tif (formData.newPassword !== formData.retypedPassword) {\n\t\t\terrorPublisher(constants[this.language].confirmPattern);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tonSubmit = async event => {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst form = event.target;\n\t\tform.classList.add('was-validated');\n\t\tif (form.checkValidity()) {\n\t\t\tconst formData = Object.fromEntries(new FormData(form));\n\t\t\tif (!this.passwordsValidation(formData)) return;\n\t\t\tawait changePasswordRequest(formData)\n\t\t\t\t.then(onChangePassword)\n\t\t\t\t.catch(onChangePasswordFail);\n\t\t}\n\t};\n}\n\n!customElements.get('ldod-change-password') &&\n\tcustomElements.define('ldod-change-password', LdodChangePassword);\n","import './ldod-change-password';\n\nconst mount = (lang, ref) => {\n\tconst changePassword = document.createElement('ldod-change-password');\n\tchangePassword.setAttribute('language', lang);\n\tdocument.querySelector(ref).appendChild(changePassword);\n};\nconst unMount = () => document.querySelector('ldod-change-password')?.remove();\n\nconst path = '/change-password';\n\nexport { mount, unMount, path };\n"],"names":["sheet","CSSStyleSheet","replaceSync","formsCss","buttonsCss","hostCss","LdodChangePassword","HTMLElement","constructor","super","this","attachShadow","mode","shadowRoot","adoptedStyleSheets","language","getAttribute","observedAttributes","connectedCallback","getState","user","redirectToHome","render","root","appendChild","createElement","constants","changePassword","id","class","novalidate","onSubmit","type","name","value","username","placeholder","required","for","currentPassword","is","icon","onPointerDown","revealPassword","onPointerUp","hidePassword","pattern","passwordLength","newPassword","confirmPassword","update","attributeChangedCallback","oldValue","newValue","onChangedAttribute","oldV","newV","onLanguage","querySelectorAll","forEach","ele","firstChild","textContent","dataset","userKey","element","setAttribute","passwordsValidation","formData","errorPublisher","currentNew","retypedPassword","confirmPattern","async","event","preventDefault","stopPropagation","form","target","classList","add","checkValidity","Object","fromEntries","FormData","changePasswordRequest","then","onChangePassword","catch","onChangePasswordFail","customElements","get","define","mount","lang","ref","document","querySelector","unMount","remove","path"],"mappings":"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"}