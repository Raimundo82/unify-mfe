{"version":3,"file":"signup-345106e0.js","sources":["../src/pages/signup/signup-html.jsx","../src/pages/signup/ldod-signup.js","../src/pages/signup/signup.js"],"sourcesContent":["/** @format */\n\nimport { hidePassword, revealPassword } from '../common-functions';\nimport constants from '../constants';\nimport '@ui/modal-bs.js';\n\nlet conductCode;\n\nfunction showConductCode(root) {\n\t!conductCode &&\n\t\timport('about').then(({ loadConductCode }) => {\n\t\t\tloadConductCode();\n\t\t\tconductCode = true;\n\t\t});\n\troot.shadowRoot.querySelector('ldod-bs-modal')?.toggleAttribute('show', true);\n}\nexport default (language, root) => {\n\treturn (\n\t\t<>\n\t\t\t<h2 data-user-key=\"register\">{constants[language].register}</h2>\n\t\t\t<form id=\"signup-form\" class=\"needs-validation\" novalidate onSubmit={root.onSubmit}>\n\t\t\t\t<div id=\"signup-form-firstname\" class=\"form-floating\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\tname=\"firstName\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"firstname\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tpattern=\"^[-'a-zA-ZÀ-ÖØ-öø-ÿ]+$\"\n\t\t\t\t\t/>\n\t\t\t\t\t<label for=\"login-form-username\" data-user-key=\"firstname\">\n\t\t\t\t\t\t{constants[language].firstname}\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class=\"invalid-tooltip\" data-user-key=\"alphabetic\">\n\t\t\t\t\t\t{constants[language].alphabetic}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"signup-form-lastname\" class=\"form-floating\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\tname=\"lastName\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"lastname\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tpattern=\"^[-'a-zA-ZÀ-ÖØ-öø-ÿ]+$\"\n\t\t\t\t\t/>\n\t\t\t\t\t<label for=\"signup-form-lastname\" data-user-key=\"lastname\">\n\t\t\t\t\t\t{constants[language].lastname}\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class=\"invalid-tooltip\" data-user-key=\"alphabetic\">\n\t\t\t\t\t\t{constants[language].alphabetic}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div id=\"signup-form-username\" class=\"form-floating\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\tname=\"username\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"username\"\n\t\t\t\t\t\tpattern=\"^[a-zA-Z0-9]+$\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<label for=\"signup-form-username\" data-user-key=\"username\">\n\t\t\t\t\t\t{constants[language].username}\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class=\"invalid-tooltip\" data-user-key=\"alphanumeric\">\n\t\t\t\t\t\t{constants[language].alphanumeric}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t<div id=\"signup-form-password\" class=\"form-floating\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\tpattern=\"[0-9a-zA-Z]{6,}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"invalid-tooltip\" data-user-key=\"passwordLength\">\n\t\t\t\t\t\t\t{constants[language].passwordLength}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<label for=\"signup-form-password\" data-user-key=\"password\">\n\t\t\t\t\t\t\t{constants[language].password}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button id=\"user-password-btn\" class=\"btn\" type=\"button\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tdata-input=\"div#signup-form-password > input\"\n\t\t\t\t\t\t\tid=\"user-password-icon\"\n\t\t\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\t\t\ticon=\"eye\"\n\t\t\t\t\t\t\thover-fill=\"#0d6efd\"\n\t\t\t\t\t\t\tonPointerDown={revealPassword}\n\t\t\t\t\t\t\tonPointerUp={hidePassword}></span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\t\t\t\t<div id=\"signup-form-email\" class=\"form-floating\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\tplaceholder=\"email\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<label for=\"signup-form-email\" data-user-key=\"email\">\n\t\t\t\t\t\t{constants[language].email}\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class=\"invalid-tooltip\" data-user-key=\"invalidEmail\">\n\t\t\t\t\t\t{constants[language].invalidEmail}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-check\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"conduct-check\"\n\t\t\t\t\t\tclass=\"form-check-input\"\n\t\t\t\t\t\tname=\"conduct\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tvalue=\"true\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t<a\n\t\t\t\t\t\tid=\"conduct-code\"\n\t\t\t\t\t\tclass=\"link-primary\"\n\t\t\t\t\t\tdata-user-key=\"conduct\"\n\t\t\t\t\t\tonClick={() => showConductCode(root)}>\n\t\t\t\t\t\t{constants[language].conduct}\n\t\t\t\t\t</a>\n\t\t\t\t\t<ldod-bs-modal\n\t\t\t\t\t\tdialog-class=\"modal-xl modal-dialog-scrollable\"\n\t\t\t\t\t\tid=\"modal-conduct-code\"\n\t\t\t\t\t\tstatic>\n\t\t\t\t\t\t<h4 data-user-key=\"conductCode\" slot=\"header-slot\">\n\t\t\t\t\t\t\t{constants[language].conductCode}\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t<div slot=\"body-slot\">\n\t\t\t\t\t\t\t<ldod-conduct language={language}></ldod-conduct>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ldod-bs-modal>\n\t\t\t\t</div>\n\t\t\t\t<input type=\"hidden\" name=\"socialId\" />\n\t\t\t\t<input type=\"hidden\" name=\"socialMedia\" />\n\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\" data-user-key=\"register\">\n\t\t\t\t\t{constants[language].register}\n\t\t\t\t</button>\n\t\t\t</form>\n\t\t</>\n\t);\n};\n","/** @format */\n\nimport signupHtml from './signup-html';\nimport constants from '../constants';\nimport formsCss from '@ui/bootstrap/forms-css.js';\nimport buttonsCss from '@ui/bootstrap/buttons-css.js';\nimport hostCss from '../host.css?inline';\nimport style from './style.css?inline';\n\nimport '@core-ui';\nimport { signupRequest } from '../../api-requests';\nimport { errorPublisher } from '../../events-modules';\nimport { onSignup, resetForm } from '../common-functions';\n\nconst sheet = new CSSStyleSheet();\nsheet.replaceSync(formsCss + buttonsCss + hostCss + style);\n\nexport default class LdodSignup extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tthis.shadowRoot.adoptedStyleSheets = [sheet];\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['language'];\n\t}\n\n\tget conductCodeModal() {\n\t\treturn this.shadowRoot.querySelector('ldod-modal#modal-conduct-code');\n\t}\n\n\tconnectedCallback() {\n\t\tthis.render();\n\t\tif (Object.keys(history.state).length) this.loadState();\n\t}\n\n\tloadState() {\n\t\tthis.shadowRoot.querySelectorAll('input').forEach(input => {\n\t\t\tif (input.name in history.state) input.value = history.state[input.name];\n\t\t});\n\t}\n\n\trender() {\n\t\tthis.shadowRoot.appendChild(signupHtml(this.language, this));\n\t}\n\tattributeChangedCallback(name, oldValue, newValue) {\n\t\tthis.onChangedAttribute[name](oldValue, newValue);\n\t}\n\n\tonChangedAttribute = {\n\t\tlanguage: (oldV, newV) => this.onLanguage(oldV, newV),\n\t};\n\n\tonLanguage = (oldValue, newValue) => {\n\t\tif (oldValue !== newValue)\n\t\t\tthis.shadowRoot.querySelectorAll('[data-user-key]').forEach(ele => {\n\t\t\t\tele.firstChild.textContent = constants[this.language][ele.dataset.userKey];\n\t\t\t});\n\t\tthis.shadowRoot\n\t\t\t.querySelectorAll('[language]')\n\t\t\t.forEach(element => element.setAttribute('language', this.language));\n\t};\n\n\tonSubmit = async event => {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst form = event.target;\n\t\tform.classList.add('was-validated');\n\t\tif (form.checkValidity()) {\n\t\t\tawait signupRequest(Object.fromEntries(new FormData(form)))\n\t\t\t\t.then(res => {\n\t\t\t\t\tif (res.ok) {\n\t\t\t\t\t\tonSignup(res.message);\n\t\t\t\t\t\tresetForm(form);\n\t\t\t\t\t} else errorPublisher(res.message);\n\t\t\t\t})\n\t\t\t\t.catch(error => errorPublisher(error?.message));\n\t\t}\n\t};\n}\n\n!customElements.get('ldod-signup') && customElements.define('ldod-signup', LdodSignup);\n","import './ldod-signup.js';\n\nconst mount = (lang, ref) => {\n\tconst template = document.createElement('template');\n\ttemplate.innerHTML = /*html*/ `<ldod-signup language=\"${lang}\"></ldod-signup>`;\n\tdocument.querySelector(ref).appendChild(template.content.cloneNode(true));\n};\nconst unMount = () => document.querySelector('ldod-signup')?.remove();\n\nconst path = '/signup';\n\nexport { mount, unMount, path };\n"],"names":["conductCode","signupHtml","language","root","createElement","createFragment","constants","register","id","class","novalidate","onSubmit","name","type","placeholder","required","pattern","for","firstname","alphabetic","lastname","username","alphanumeric","passwordLength","password","is","icon","onPointerDown","revealPassword","onPointerUp","hidePassword","email","invalidEmail","value","onClick","import","then","loadConductCode","shadowRoot","querySelector","toggleAttribute","showConductCode","conduct","static","slot","sheet","CSSStyleSheet","replaceSync","formsCss","buttonsCss","hostCss","LdodSignup","HTMLElement","constructor","super","this","attachShadow","mode","adoptedStyleSheets","getAttribute","observedAttributes","conductCodeModal","connectedCallback","render","Object","keys","history","state","length","loadState","querySelectorAll","forEach","input","appendChild","attributeChangedCallback","oldValue","newValue","onChangedAttribute","oldV","newV","onLanguage","ele","firstChild","textContent","dataset","userKey","element","setAttribute","async","event","preventDefault","stopPropagation","form","target","classList","add","checkValidity","signupRequest","fromEntries","FormData","res","ok","onSignup","message","resetForm","errorPublisher","catch","error","customElements","get","define","mount","lang","ref","template","document","innerHTML","content","cloneNode","unMount","remove","path"],"mappings":"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"}