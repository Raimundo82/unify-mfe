import{createElement as s,createFragment as e}from"@core";import{getState as t}from"./store-495a4209.js";import{c as a,r,h as o,a as n,f as d,g as i,i as u}from"./host-8bc95532.js";import p from"@ui/bootstrap/forms-css.js";import l from"@ui/bootstrap/buttons-css.js";import"@core-ui";import{errorPublisher as c}from"./events-modules-f7c3e7bf.js";import{c as w}from"./api-requests-4b63daad.js";import"./user-references-3af1d170.js";const m=new CSSStyleSheet;m.replaceSync(p+l+n);class h extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.adoptedStyleSheets=[m]}get language(){return this.getAttribute("language")}static get observedAttributes(){return["language"]}connectedCallback(){if(!t().user)return d();this.render()}render(){var n,d;this.shadowRoot.appendChild((n=this.language,d=this,s(e,null,s("h2",{"data-user-key":"changePassword"},a[n].changePassword),s("form",{id:"change-password-form",class:"needs-validation",novalidate:!0,onSubmit:d.onSubmit},s("input",{type:"hidden",name:"username",value:t().user?.username||""}),s("div",{class:"input-group"},s("div",{id:"current-password",class:"form-floating"},s("input",{class:"form-control",name:"currentPassword",type:"password",placeholder:"current password",required:!0}),s("label",{for:"current-password","data-user-key":"currentPassword"},a[n].currentPassword)),s("button",{id:"user-password-btn",class:"btn",type:"button"},s("span",{"data-input":"div#current-password > input",id:"user-password-icon",is:"ldod-span-icon",icon:"eye","hover-fill":"#0d6efd",onPointerDown:r,onPointerUp:o}))),s("div",{class:"input-group"},s("div",{id:"new-password",class:"form-floating"},s("input",{class:"form-control",name:"newPassword",type:"password",placeholder:"password",required:!0,pattern:"[0-9a-zA-Z]{6,}"}),s("div",{class:"invalid-tooltip","data-user-key":"passwordLength"},a[n].passwordLength),s("label",{for:"new-password","data-user-key":"newPassword"},a[n].newPassword)),s("button",{id:"user-password-btn",class:"btn",type:"button"},s("span",{"data-input":"div#new-password > input",id:"user-password-icon",is:"ldod-span-icon",icon:"eye","hover-fill":"#0d6efd",onPointerDown:r,onPointerUp:o}))),s("div",{class:"input-group"},s("div",{id:"confirm-password",class:"form-floating"},s("input",{class:"form-control",name:"retypedPassword",type:"password",placeholder:"password",required:!0,pattern:"[0-9a-zA-Z]{6,}"}),s("div",{class:"invalid-tooltip","data-user-key":"passwordLength"},a[n].passwordLength),s("label",{for:"confirm-password","data-user-key":"confirmPassword"},a[n].confirmPassword)),s("button",{id:"user-password-btn",class:"btn",type:"button"},s("span",{"data-input":"div#confirm-password > input",id:"user-password-icon",is:"ldod-span-icon",icon:"eye","hover-fill":"#0d6efd",onPointerDown:r,onPointerUp:o}))),s("button",{type:"submit",class:"btn btn-primary","data-user-key":"update"},a[n].update)))))}attributeChangedCallback(s,e,t){this.onChangedAttribute[s](e,t)}onChangedAttribute={language:(s,e)=>this.onLanguage(s,e)};onLanguage=(s,e)=>{s!==e&&this.shadowRoot.querySelectorAll("[data-user-key]").forEach((s=>{s.firstChild.textContent=a[this.language][s.dataset.userKey]})),this.shadowRoot.querySelectorAll("[language]").forEach((s=>s.setAttribute("language",this.language)))};passwordsValidation(s){return!!s.username&&(s.currentPassword===s.newPassword?(c(a[this.language].currentNew),!1):s.newPassword===s.retypedPassword||(c(a[this.language].confirmPattern),!1))}onSubmit=async s=>{s.preventDefault(),s.stopPropagation();const e=s.target;if(e.classList.add("was-validated"),e.checkValidity()){const s=Object.fromEntries(new FormData(e));if(!this.passwordsValidation(s))return;await w(s).then(i).catch(u)}}}!customElements.get("ldod-change-password")&&customElements.define("ldod-change-password",h);const g=(s,e)=>{const t=document.createElement("ldod-change-password");t.setAttribute("language",s),document.querySelector(e).appendChild(t)},f=()=>document.querySelector("ldod-change-password")?.remove(),b="/change-password";export{g as mount,b as path,f as unMount};
//# sourceMappingURL=change-password-08bd13d8.js.map
