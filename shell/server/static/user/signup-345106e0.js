import{createElement as e,createFragment as t}from"@core";import{c as a,r as o,h as s,a as r,e as i,d as n}from"./host-8bc95532.js";import"@ui/modal-bs.js";import l from"@ui/bootstrap/forms-css.js";import d from"@ui/bootstrap/buttons-css.js";import"@core-ui";import{a as u}from"./api-requests-4b63daad.js";import{errorPublisher as c}from"./events-modules-f7c3e7bf.js";import"./store-495a4209.js";import"./user-references-3af1d170.js";let m;const p=(r,i)=>e(t,null,e("h2",{"data-user-key":"register"},a[r].register),e("form",{id:"signup-form",class:"needs-validation",novalidate:!0,onSubmit:i.onSubmit},e("div",{id:"signup-form-firstname",class:"form-floating"},e("input",{class:"form-control",name:"firstName",type:"text",placeholder:"firstname",required:!0,pattern:"^[-'a-zA-ZÀ-ÖØ-öø-ÿ]+$"}),e("label",{for:"login-form-username","data-user-key":"firstname"},a[r].firstname),e("div",{class:"invalid-tooltip","data-user-key":"alphabetic"},a[r].alphabetic)),e("div",{id:"signup-form-lastname",class:"form-floating"},e("input",{class:"form-control",name:"lastName",type:"text",placeholder:"lastname",required:!0,pattern:"^[-'a-zA-ZÀ-ÖØ-öø-ÿ]+$"}),e("label",{for:"signup-form-lastname","data-user-key":"lastname"},a[r].lastname),e("div",{class:"invalid-tooltip","data-user-key":"alphabetic"},a[r].alphabetic)),e("div",{id:"signup-form-username",class:"form-floating"},e("input",{class:"form-control",name:"username",type:"text",placeholder:"username",pattern:"^[a-zA-Z0-9]+$",required:!0}),e("label",{for:"signup-form-username","data-user-key":"username"},a[r].username),e("div",{class:"invalid-tooltip","data-user-key":"alphanumeric"},a[r].alphanumeric)),e("div",{class:"input-group"},e("div",{id:"signup-form-password",class:"form-floating"},e("input",{class:"form-control",name:"password",type:"password",placeholder:"password",required:!0,pattern:"[0-9a-zA-Z]{6,}"}),e("div",{class:"invalid-tooltip","data-user-key":"passwordLength"},a[r].passwordLength),e("label",{for:"signup-form-password","data-user-key":"password"},a[r].password)),e("button",{id:"user-password-btn",class:"btn",type:"button"},e("span",{"data-input":"div#signup-form-password > input",id:"user-password-icon",is:"ldod-span-icon",icon:"eye","hover-fill":"#0d6efd",onPointerDown:o,onPointerUp:s}))),e("div",{id:"signup-form-email",class:"form-floating"},e("input",{class:"form-control",name:"email",type:"email",placeholder:"email",required:!0}),e("label",{for:"signup-form-email","data-user-key":"email"},a[r].email),e("div",{class:"invalid-tooltip","data-user-key":"invalidEmail"},a[r].invalidEmail)),e("div",{class:"form-check"},e("input",{id:"conduct-check",class:"form-check-input",name:"conduct",type:"checkbox",value:"true",required:!0}),e("a",{id:"conduct-code",class:"link-primary","data-user-key":"conduct",onClick:()=>function(e){!m&&import("about").then((({loadConductCode:e})=>{e(),m=!0})),e.shadowRoot.querySelector("ldod-bs-modal")?.toggleAttribute("show",!0)}(i)},a[r].conduct),e("ldod-bs-modal",{"dialog-class":"modal-xl modal-dialog-scrollable",id:"modal-conduct-code",static:!0},e("h4",{"data-user-key":"conductCode",slot:"header-slot"},a[r].conductCode),e("div",{slot:"body-slot"},e("ldod-conduct",{language:r})))),e("input",{type:"hidden",name:"socialId"}),e("input",{type:"hidden",name:"socialMedia"}),e("button",{type:"submit",class:"btn btn-primary","data-user-key":"register"},a[r].register))),g=new CSSStyleSheet;g.replaceSync(l+d+r+".form-check{text-align:initial}a#conduct-code{cursor:pointer}\n");class h extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.adoptedStyleSheets=[g]}get language(){return this.getAttribute("language")}static get observedAttributes(){return["language"]}get conductCodeModal(){return this.shadowRoot.querySelector("ldod-modal#modal-conduct-code")}connectedCallback(){this.render(),Object.keys(history.state).length&&this.loadState()}loadState(){this.shadowRoot.querySelectorAll("input").forEach((e=>{e.name in history.state&&(e.value=history.state[e.name])}))}render(){this.shadowRoot.appendChild(p(this.language,this))}attributeChangedCallback(e,t,a){this.onChangedAttribute[e](t,a)}onChangedAttribute={language:(e,t)=>this.onLanguage(e,t)};onLanguage=(e,t)=>{e!==t&&this.shadowRoot.querySelectorAll("[data-user-key]").forEach((e=>{e.firstChild.textContent=a[this.language][e.dataset.userKey]})),this.shadowRoot.querySelectorAll("[language]").forEach((e=>e.setAttribute("language",this.language)))};onSubmit=async e=>{e.preventDefault(),e.stopPropagation();const t=e.target;t.classList.add("was-validated"),t.checkValidity()&&await u(Object.fromEntries(new FormData(t))).then((e=>{e.ok?(i(e.message),n(t)):c(e.message)})).catch((e=>c(e?.message)))}}!customElements.get("ldod-signup")&&customElements.define("ldod-signup",h);const f=(e,t)=>{const a=document.createElement("template");a.innerHTML=`<ldod-signup language="${e}"></ldod-signup>`,document.querySelector(t).appendChild(a.content.cloneNode(!0))},y=()=>document.querySelector("ldod-signup")?.remove(),b="/signup";export{f as mount,b as path,y as unMount};
//# sourceMappingURL=signup-345106e0.js.map
