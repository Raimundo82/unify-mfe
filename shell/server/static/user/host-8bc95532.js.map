{"version":3,"file":"host-8bc95532.js","sources":["../src/pages/constants.js","../src/pages/common-functions.js"],"sourcesContent":["export default {\n\ten: {\n\t\ttitle: 'LdoD Archive',\n\t\tusername: 'Username',\n\t\tpassword: 'Password',\n\t\tsignin: 'Sign in',\n\t\tsignup: 'Register as a LdoD Archive user',\n\t\tregister: 'Sign up',\n\t\tfirstname: 'First name',\n\t\tlastname: 'Surname',\n\t\temail: 'Email',\n\t\talphabetic: 'Alphabetic field required',\n\t\talphanumeric: 'Alphanumeric field required',\n\t\tpasswordLength: 'Required and must be at least 6 characters',\n\t\tinvalidEmail: 'Invalid Email',\n\t\tconductCode: 'Code of conduct',\n\t\tconduct: 'By registering as a user of the LdoD Archive, I accept the code of conduct',\n\t\tconductCheck: 'Must accept the code of conduct',\n\t\tauthorization:\n\t\t\t'Your request was submitted for authorization. In case of approval, an email from the e-address ldod.archive@gmail.com will be sent to your mailbox. The confirmation should occur within the next 24 hours.',\n\t\tgoogleAssociation: 'Your Google account is not associated with a LdoD Archive account. Please sign up.',\n\t\tchangePassword: 'Change Password',\n\t\tupdate: 'Update',\n\t\tcurrentPassword: 'Current password',\n\t\tnewPassword: 'New password',\n\t\tconfirmPassword: 'Retype password',\n\t\tcurrentNew: 'The new password must differ from the current one',\n\t\tconfirmPattern: 'The passwords do not match',\n\t},\n\tpt: {\n\t\ttitle: 'Arquivo LdoD',\n\t\tusername: 'Nome de utilizador',\n\t\tpassword: 'Senha',\n\t\tsignin: 'Entrar',\n\t\tsignup: 'Registar-se como utilizador do Arquivo LdoD',\n\t\tregister: 'Registo',\n\t\tfirstname: 'Primeiro nome',\n\t\tlastname: 'Apelido',\n\t\temail: 'Endereço electrónico',\n\t\talphabetic: 'Campo alfabético obrigatório',\n\t\talphanumeric: 'Campo alfanumérico obrigatório',\n\t\tpasswordLength: 'Obrigatório e deve conter no mínimo 6 caracteres',\n\t\tinvalidEmail: 'Correio electrónico inválido',\n\t\tconductCode: 'Código de conducta',\n\t\tconductCheck: 'Deve aceitar o código de conduta',\n\t\tconduct: 'Ao registar-me como utilizador do Arquivo LdoD, aceito o código de conduta',\n\t\tauthorization:\n\t\t\t'O seu pedido foi submetido para autorização. Em caso de aceitação, um email de confirmação será enviado para a sua caixa de correio a partir do endereço ldod.archive@gmail.com. A confirmação deve ocorrer no espaço de 24 horas.',\n\t\tgoogleAssociation:\n\t\t\t'A sua conta Google ainda não está associada com uma conta do Arquivo do LdoD. Registe-se por favor.',\n\t\tchangePassword: 'Alterar Senha',\n\t\tupdate: 'Atualizar',\n\t\tcurrentPassword: 'Senha actual',\n\t\tnewPassword: 'Nova senha',\n\t\tconfirmPassword: 'Digite novamente a senha',\n\t\tcurrentNew: 'A nova senha deve diferir da atual',\n\t\tconfirmPattern: 'As palavras-passe não coincidem',\n\t},\n\tes: {\n\t\ttitle: 'Archivo LdoD',\n\t\tusername: 'Nombre de utilizador',\n\t\tpassword: 'Contraseña',\n\t\tsignin: 'Ingressar',\n\t\tsignup: 'Registrarse como usuario del Archivo LdoD',\n\t\tregister: 'Regístrar',\n\t\tfirstname: 'Primer nombre',\n\t\tlastname: 'Apellido',\n\t\temail: 'Correo electrónico',\n\t\talphabetic: 'Campo alfabético obligatorio',\n\t\talphanumeric: 'Campo alfanumérico obligatorio',\n\t\tpasswordLength: 'Obligatorio y debe contener al menos 6 caracteres',\n\t\tinvalidEmail: 'Correo electrónico inválido',\n\t\tconductCode: 'Código de conducta',\n\t\tconduct: 'Al registrarme como usuario del Archivo LdoD, acepto el código de conducta',\n\t\tconductCheck: 'Debe aceptar el código de conducta',\n\t\tauthorization:\n\t\t\t'Su solicitud fue enviada para autorización. En caso de aprobación, un correo electrónico de la dirección electrónica ldod.archive@gmail.com será enviado a su buzón de correo. La confirmación debe ocurrir dentro de las próximas 24 horas',\n\t\tgoogleAssociation: 'Su cuenta Google no está asociada con una cuenta de Archivo LdoD. Por favor regístrese.',\n\t\tchangePassword: 'Cambiar la Contraseña',\n\t\tupdate: 'Atualizar',\n\t\tcurrentPassword: 'Contraseña actual',\n\t\tnewPassword: 'Nueva constraseña',\n\t\tconfirmPassword: 'Vuelva a escribir la contraseña',\n\t\tcurrentNew: 'La nueva contraseña debe ser diferente de la actual',\n\t\tconfirmPattern: 'Las contraseñas no coinciden',\n\t},\n};\n","/** @format */\n\nimport { userRequest } from '../api-requests';\nimport {\n\terrorPublisher,\n\tloginPublisher,\n\tlogoutPublisher,\n\tmessagePublisher,\n\ttokenPublisher,\n} from '../events-modules';\nimport { getState, setState } from '../store';\nimport { navigateTo } from '@core';\nimport { userReferences } from '../user-references';\n\nexport function revealPassword({ target }) {\n\tgetAssociatedPasswordInput(target).type = 'text';\n}\n\nexport function hidePassword({ target }) {\n\tgetAssociatedPasswordInput(target).type = 'password';\n}\n\nfunction getAssociatedPasswordInput(target) {\n\treturn target.getRootNode().querySelector(target.dataset.input);\n}\n\nexport function onAuthSuccess(token) {\n\tif (!token) return logout();\n\tif (token !== getState().token) setState({ token });\n\ttokenPublisher(token);\n\tlogin(token);\n}\n\nexport function onAuthFail(error) {\n\terrorPublisher(error?.message);\n\tsetState({ token: '' });\n}\n\nexport function onSignup(message) {\n\tmessage && messagePublisher(message);\n\tnavigateTo(userReferences.signin());\n}\n\nexport function onChangePassword(res) {\n\tif (res.ok === false) return onChangePasswordFail(res);\n\tmessagePublisher(res.message);\n\tredirectToHome();\n}\n\nexport function onChangePasswordFail(res) {\n\tconsole.error(res);\n\terrorPublisher(res?.message);\n}\n\nexport function logout() {\n\tsetState({ token: '', user: '' });\n\tlogoutPublisher();\n\tredirectToHome();\n}\n\nexport function login(token) {\n\tuserRequest(token)\n\t\t.then(user => {\n\t\t\tsetState(state => ({ ...state, user }));\n\t\t\tloginPublisher(user);\n\t\t\tlocation.pathname.endsWith('/user/signin') && navigateTo('/');\n\t\t})\n\t\t.catch(error => error.message === 'unauthorized' && logout());\n}\n\nexport function resetForm(form) {\n\tform.classList.remove('was-validated');\n\tform.reset();\n}\n\nexport function redirectToHome() {\n\tnavigateTo('/');\n}\n"],"names":["constants","en","title","username","password","signin","signup","register","firstname","lastname","email","alphabetic","alphanumeric","passwordLength","invalidEmail","conductCode","conduct","conductCheck","authorization","googleAssociation","changePassword","update","currentPassword","newPassword","confirmPassword","currentNew","confirmPattern","pt","es","revealPassword","target","getAssociatedPasswordInput","type","hidePassword","getRootNode","querySelector","dataset","input","onAuthSuccess","token","logout","getState","setState","tokenPublisher","userRequest","then","user","state","loginPublisher","location","pathname","endsWith","navigateTo","catch","error","message","login","onAuthFail","errorPublisher","onSignup","messagePublisher","userReferences","onChangePassword","res","ok","onChangePasswordFail","redirectToHome","console","logoutPublisher","resetForm","form","classList","remove","reset"],"mappings":"kVAAA,MAAeA,EAAA,CACdC,GAAI,CACHC,MAAO,eACPC,SAAU,WACVC,SAAU,WACVC,OAAQ,UACRC,OAAQ,kCACRC,SAAU,UACVC,UAAW,aACXC,SAAU,UACVC,MAAO,QACPC,WAAY,4BACZC,aAAc,8BACdC,eAAgB,6CAChBC,aAAc,gBACdC,YAAa,kBACbC,QAAS,6EACTC,aAAc,kCACdC,cACC,8MACDC,kBAAmB,qFACnBC,eAAgB,kBAChBC,OAAQ,SACRC,gBAAiB,mBACjBC,YAAa,eACbC,gBAAiB,kBACjBC,WAAY,oDACZC,eAAgB,8BAEjBC,GAAI,CACHzB,MAAO,eACPC,SAAU,qBACVC,SAAU,QACVC,OAAQ,SACRC,OAAQ,8CACRC,SAAU,UACVC,UAAW,gBACXC,SAAU,UACVC,MAAO,uBACPC,WAAY,+BACZC,aAAc,iCACdC,eAAgB,mDAChBC,aAAc,+BACdC,YAAa,qBACbE,aAAc,mCACdD,QAAS,6EACTE,cACC,qOACDC,kBACC,sGACDC,eAAgB,gBAChBC,OAAQ,YACRC,gBAAiB,eACjBC,YAAa,aACbC,gBAAiB,2BACjBC,WAAY,qCACZC,eAAgB,mCAEjBE,GAAI,CACH1B,MAAO,eACPC,SAAU,uBACVC,SAAU,aACVC,OAAQ,YACRC,OAAQ,4CACRC,SAAU,YACVC,UAAW,gBACXC,SAAU,WACVC,MAAO,qBACPC,WAAY,+BACZC,aAAc,iCACdC,eAAgB,oDAChBC,aAAc,8BACdC,YAAa,qBACbC,QAAS,6EACTC,aAAc,qCACdC,cACC,8OACDC,kBAAmB,0FACnBC,eAAgB,wBAChBC,OAAQ,YACRC,gBAAiB,oBACjBC,YAAa,oBACbC,gBAAiB,kCACjBC,WAAY,sDACZC,eAAgB,iCCtEX,SAASG,GAAiBC,OAAAA,IAChCC,EAA2BD,GAAQE,KAAO,MAC3C,CAEO,SAASC,GAAeH,OAAAA,IAC9BC,EAA2BD,GAAQE,KAAO,UAC3C,CAEA,SAASD,EAA2BD,GACnC,OAAOA,EAAOI,cAAcC,cAAcL,EAAOM,QAAQC,MAC1D,CAEO,SAASC,EAAcC,GAC7B,IAAKA,EAAO,OAAOC,IACfD,IAAUE,IAAWF,OAAOG,EAAS,CAAEH,MAAAA,IAC3CI,EAAeJ,GA+BT,SAAeA,GACrBK,EAAYL,GACVM,MAAKC,IACLJ,GAASK,IAAAA,IAAeA,EAAOD,KAAAA,MAC/BE,EAAeF,GACfG,SAASC,SAASC,SAAS,iBAAmBC,EAAW,IAAG,IAE5DC,OAAMC,GAA2B,iBAAlBA,EAAMC,SAA8Bf,KACtD,CAtCCgB,CAAMjB,EACP,CAEO,SAASkB,EAAWH,GAC1BI,EAAeJ,GAAOC,SACtBb,EAAS,CAAEH,MAAO,IACnB,CAEO,SAASoB,EAASJ,GACxBA,GAAWK,EAAiBL,GAC5BH,EAAWS,EAAexD,SAC3B,CAEO,SAASyD,EAAiBC,GAChC,IAAe,IAAXA,EAAIC,GAAc,OAAOC,EAAqBF,GAClDH,EAAiBG,EAAIR,SACrBW,GACD,CAEO,SAASD,EAAqBF,GACpCI,QAAQb,MAAMS,GACdL,EAAeK,GAAKR,QACrB,CAEO,SAASf,IACfE,EAAS,CAAEH,MAAO,GAAIO,KAAM,KAC5BsB,IACAF,GACD,CAYO,SAASG,EAAUC,GACzBA,EAAKC,UAAUC,OAAO,iBACtBF,EAAKG,OACN,CAEO,SAASP,IACfd,EAAW,IACZ"}