import{Store as e,fetcher as t,createElement as n,createFragment as o,navigateTo as a}from"@core";import"@ui/modal-bs.js";import{r as i}from"./reading-f37a19ee.js";const r=new e({heteronymWeight:0,dateWeight:0,textWeight:1,taxonomyWeight:0,read:[]},{storageName:"ldod-reading-store",keys:["heteronymWeight","dateWeight","textWeight","taxonomyWeight","read"]}),d=()=>r.getState(),s=e=>{if(!e)return r.setState({read:[]});d().read.length<=1||r.setState((e=>({...e,read:[e.read.pop()]})))},c="/reading";async function l(e,n){return await t.post(`${c}/fragment/${e}/inter/${n}`,d()).then((e=>e&&!1!==e.ok?Promise.resolve(e):(s(),Promise.reject({message:e?.message}))))}const m={pt:{title:"livro do desassossego de fernando pessoa",recommendation:"Recomendação",recommendationTooltipInfo:"Na coluna de recomendação são sugeridos de forma automática os fragmentos mais similares ao fragmento selecionado na coluna da edição. A similaridade entre o fragmento da edição e o fragmento da recomendação é calculada segundo uma combinação de quatro critérios (ajustáveis pelos utilizadores): heterónimo, data, texto e taxonomia.",recomModalTitle:"configuração das recomendações",sortCriteria:"critérios de ordenação",heteronym:"Heterónimo",date:"Data",text:"Texto",taxonomy:"Taxonomia",reset:"Reiniciar",submit:"Submeter"},en:{title:"book of disquiet by fernando pessoa",recommendation:"Recommentation",recommendationTooltipInfo:"The most similar fragments to the selected fragment in the edition column are automatically suggested in the recommendation column. Similarity between the edition fragment and the recommendation fragment is calculated according to a combination of four criteria (adjustable by users): heteronym, date, text, and taxonomy.",recomModalTitle:"configuration of recommendations",sortCriteria:"sorting criteria",heteronym:"Heteronym",date:"Date",text:"Text",taxonomy:"Taxonomy",reset:"Reset",submit:"Submit"},es:{title:"libro del desasosiego de fernando pessoa",recommendation:"Recomendación",recommendationTooltipInfo:"En la columna de recomendación se sugieren de forma automática los fragmentos más similares al fragmento seleccionado en la columna de la edición. La similitud entre el fragmento de la edición y el fragmento de la recomendación se calcula según una combinación de cuatro criterios (ajustables por los usuarios): heterónimo, fecha, texto y taxonomí­a.",recomModalTitle:"configuración de las recomendaciones",sortCriteria:"criterios de ordenación",heteronym:"Heterónimo",date:"Fecha",text:"Texto",taxonomy:"Taxonomía",reset:"Reiniciar",submit:"Enviar"}},g=({target:e})=>{r.setState({[e.name]:e.value})},p=({root:e})=>n(o,null,n("style",null,"div[slot=header-slot]{width:100%}#reading-recommendation--modal h3{font-size:24px;font-weight:500;line-height:34px;font-family:League-Gothic;text-transform:uppercase;margin-top:40px;margin-bottom:15px}.text-center{text-align:center}.criterias-wrapper{display:flex;flex-wrap:wrap;justify-content:space-around}.criterias-wrapper>div{display:grid;text-align:center;font-family:Work-Sans;font-size:15px;font-weight:500}@media (width >= 992px){.criterias-wrapper>div{width:20%}}@media (width < 992px){.criterias-wrapper>div{width:95%}}input[type=range]{width:100%}.btn{cursor:pointer;border-radius:5px;height:35px;background-color:transparent;border:1px solid transparent;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;font-size:15px;width:75px;margin:5px}.btn:hover{background-color:#ccc}.btn-danger{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-danger:hover{background-color:#bb2d3b;border-color:#bb2d3b}.btn-primary{color:#fff;background-color:#0d6efd;border-color:#0d6efd}.btn-primary:hover{border-color:#0b5ed7;background-color:#0b5ed7}\n"),n("ldod-bs-modal",{"dialog-class":"modal-xl",id:"reading-recommendation--modal"},n("div",{slot:"header-slot"},n("h3",{class:"modal-title text-center","data-reading-key":"recomModalTitle"},e.getConstants("recomModalTitle"))),n("div",{slot:"body-slot"},n("h3",{class:"text-center","data-reading-key":"sortCriteria"},e.getConstants("sortCriteria")),n("div",{class:"criterias-wrapper"},["heteronym","date","text","taxonomy"].map((t=>n(o,null,n("div",null,n("span",{"data-reading-key":t},e.getConstants(t)),n("input",{min:"0",max:"1",step:"0.2",value:d()[`${t}Weight`],onChange:g,id:`${t}-range`,type:"range",name:`${t}Weight`}))))))),n("div",{slot:"footer-slot"},n("button",{type:"button","data-reading-key":"reset",class:"btn btn-danger",onClick:()=>(e=>{s(e.currentInter),e.recommendationModal.toggleAttribute("show")})(e)},e.getConstants("reset")),n("button",{type:"button",class:"btn btn-primary","data-reading-key":"submit",onClick:e.onRecommendationSubmit},e.getConstants("submit")))),n("ldod-tooltip",{"data-ref":"span#reading-recommendationTooltip","data-reading-tooltip-key":"recommendationTooltipInfo",placement:"top",light:!0,width:"350px",content:e.getConstants("recommendationTooltipInfo")})),u=".reading-text{padding:15px 0;border:0;border-top:2px dotted black;font-size:18px;line-height:24px}.reading-text h1{margin:0;font-size:35px;font-family:League-Gothic,Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;font-weight:500;line-height:38px;text-transform:uppercase}.reading-column,.reading-column-open{display:flex;flex-direction:column;position:relative;height:8.33333%;float:left;padding:5px 0;border-top:2px dotted black;text-align:left}.reading-column-open{border:0;border-top:2px dotted #fc1b27}.reading-column h4,.reading-column span#reading-recommendation,.reading-column-open h4{font-size:18px;font-family:League-Gothic,Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;line-height:20px;font-weight:500;display:inline-block;margin:0;width:100%;text-transform:uppercase}a{color:#337ab7;text-decoration:none;cursor:pointer}.reading-column a:hover{color:#0c4ef6}.reading-column a{color:#000;text-decoration:none}.reading-column h4 a{color:#000;text-decoration:none;padding:0}.reading-column-open h4 a{color:#fc1b27;text-decoration:none;padding:0}.reading-column h4 a:hover,.reading-column-open h4 a:hover{color:#0c4ef6}.reading-column h2,.reading-inter h2,.reading-column-open h2,.reading-inter-current h2{margin:0;font-size:40px;font-weight:500;font-family:Ultra;cursor:pointer}.reading-inter h3,.reading-inter-current h3{margin:0;padding:0;font-size:26px;font-weight:500;font-family:League-Gothic,Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;cursor:pointer;line-height:20px}.reading-column h2 a:hover,.reading-column-open h2 a:hover{color:#0c4ef6}.reading-column-open h2 a{color:#fc1b27}.reading-column span#reading-recommendation{text-decoration:underline;cursor:pointer}.reading-column span#reading-recommendation:hover{color:#0c4ef6}.reading-transcript{padding-top:30px;text-align:left}.reading-transcript p{float:left;margin:0;padding-top:25px;font-size:18px;font-family:Work-Sans,sans-serif;font-weight:400;line-height:24px}.reading-inter,.reading-inter-current{display:flex;justify-content:space-between}.reading-inter-current a h2,.reading-inter-current a h3{color:#fc1b27}.reading-text h1 a{color:#000}.reading-inter-current{flex-direction:column-reverse;gap:10px}@media (width <= 530px){.reading-transcript p{font-size:15px;font-family:Work-Sans,sans-serif;font-weight:400;line-height:20px}}@media (max-width: 767px){.reading-grid{display:flex;flex-direction:column}.reading-book-title{border-top:0px}.reading-text h1{font-size:35px}.reading-column,.reading-column-open{padding-bottom:12px;width:100%}.reading-column span#reading-recommendation,.reading-column h4,.reading-column-open h4{font-size:27.5px;padding-top:10px;margin-top:auto;margin-bottom:auto}}@media (min-width: 768px){.reading-grid{display:grid;grid-template-columns:repeat(12,8.333333333%)}.reading-text{padding:122px 15px 15px;border:0;border-left:2px dotted gray;font-size:16px;line-height:21.333px}.reading-column,.reading-column-open{gap:50px;padding:0 5px;height:100%;border:0;border-left:2px dotted black;text-align:center}.reading-column-open{border-left:2px dotted #fc1b27}.reading-column h4,.reading-column-open h4,.reading-column span#reading-recommendation{min-height:80px}.reading-column:has(span#reading-recommendation){border-right:2px dotted black}.reading-column span#reading-recommendation{font-family:League-Gothic-Condensed,Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif}.reading-transcript p{font-size:16px}.reading-column h2,.reading-column-open h2{text-align:center;font-size:24px}.reading-inter{display:flex;flex-direction:column}.reading-inter a{margin-top:10px}}@media (min-width: 768px) and (max-width: 991px){.reading-text{padding:112px 15px 15px!important}.reading-text h1{font-size:30px;line-height:35px}span#reading-recommendation{font-size:16px!important}}@media (min-width: 992px){.reading-text{font-size:18px;line-height:24px}.reading-transcript p{font-size:18px}.reading-column h2,.reading-column-open h2{font-size:28px}}@media (min-width: 1200px){.reading-column span#reading-recommendation,.reading-column h4,.reading-column-open h4{font-size:24px;line-height:26px}}.icon{width:30px;height:30px;cursor:pointer;margin-left:auto;margin-right:auto}@media (max-width: 767px){.icon{margin-top:auto;margin-bottom:auto;padding-right:10px;margin-right:0}}\n",h=()=>import("@ui/tooltip.js"),x=new CSSStyleSheet;x.replaceSync(u);class f extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.adoptedStyleSheets=[x],this.constants=m}get language(){return this.getAttribute("language")}get wrapper(){return this.shadowRoot.querySelector("#reading-wrapper")}get recommendationModal(){return this.shadowRoot.querySelector("#reading-recommendation--modal")}static get observedAttributes(){return["language"]}getConstants(e){return this.constants[this.language][e]}connectedCallback(){this.shadowRoot.appendChild(n("div",{id:"reading-wrapper"})),this.expertEditions&&this.render(),this.addEventListeners()}render(){this.wrapper.innerHTML="",this.wrapper.appendChild(n(o,null,n("div",{class:"reading-grid"},n("div",{class:"reading-text reading-book-title",style:{gridColumn:"1/8"}},n("h1",{"data-reading-key":"title"},this.getConstants("title"))),this.expertEditions.map((e=>n("div",{key:e.externalId,class:"reading-column"},n("h4",null,n("a",{is:"nav-to",to:i.editionInterPath(e.xmlId,e.urlId)},e.editor)),n("span",{is:"ldod-span-icon",class:"icon",icon:"arrow-right",fill:"black",size:"30px",onClick:()=>{a(i.editionInterPath(e.xmlId,e.urlId))}})))),n("div",{class:"reading-column"},n("span",{id:"reading-recommendation","data-reading-key":"recommendation",onClick:this.onRecommendation},this.getConstants("recommendation")),n("span",{id:"reading-recommendationTooltip",is:"ldod-span-icon",size:"30px",icon:"circle-info",class:"icon"}))),n(p,{root:this})))}updateData(e){this.expertEditions=e,this.render()}attributeChangedCallback(e,t,n){this.onChangeAttribute[e]()}onChangeAttribute={language:()=>this.onlanguageChange()};onlanguageChange=()=>{this.shadowRoot.querySelectorAll("[data-reading-key]").forEach((e=>{e.firstChild.textContent=this.getConstants(e.dataset.readingKey)})),this.shadowRoot.querySelectorAll("[data-reading-tooltip-key]").forEach((e=>{e.setAttribute("content",this.getConstants(e.dataset.readingTooltipKey))}))};onRecommendation=async()=>{this.recommendationModal.toggleAttribute("show",!0)};onRecommendationSubmit=()=>{this.recommendationModal.toggleAttribute("show")};addEventListeners=()=>{this.wrapper.addEventListener("pointerenter",h)}}!customElements.get("ldod-reading")&&customElements.define("ldod-reading",f);const b=async(e,o)=>{(async function(){return await t.get(c,null)})().then((e=>a.updateData(e))).catch((e=>console.error(e)));const a=document.querySelector(o).appendChild(n("ldod-reading",{language:e}))},y=()=>document.querySelector("ldod-reading")?.remove(),w=()=>({mount:b,unMount:y,path:"/"}),v={"/fragment/:xmlId/inter/:urlId":async()=>await import("./reading-edition-2dab676c.js")},S=({language:e})=>n("div",{id:"reading-container"},n("style",null,".container{margin-right:auto;margin-left:auto}@media (min-width >= 768px){.container{width:750px}}@media (min-width >= 992px){.container{width:940px}}@media (min-width >= 1200px){.container{width:1170px}}\n"),n("div",{class:"container"},n("ldod-router",{id:"reading-router",base:"/ldod-mfes",route:"/reading",routes:v,index:w,language:e}))),k=Object.freeze(Object.defineProperty({__proto__:null,ReadingRouter:S,mount:(e,t)=>{document.querySelector(t).appendChild(n(S,{language:e}))},unMount:()=>{document.querySelector("div#reading-container")?.remove()}},Symbol.toStringTag,{value:"Module"}));export{p as R,k as a,m as c,l as g,r,u as s};
//# sourceMappingURL=reading-router-7a925504.js.map
