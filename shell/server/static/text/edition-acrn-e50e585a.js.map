{"version":3,"file":"edition-acrn-e50e585a.js","sources":["../src/pages/edition/acronym/components/table-data.jsx","../src/pages/edition/acronym/components/expert-edition-table.jsx","../src/pages/edition/acronym/ldod-edition-acrn.jsx","../src/pages/edition/acronym/edition-acrn.js"],"sourcesContent":["import textReferences from '@src/references';\nimport { readingExpertEdition } from '../../../../external-deps';\n\nexport const getTableData = (node) => {\n  return node.data?.map((frag) => {\n    return {\n      externalId: frag.externalId,\n      data: () => ({\n        number: +frag.number,\n        title: (\n          <a is=\"nav-to\" to={textReferences.fragment(frag.xmlId)}>\n            {frag.title}\n          </a>\n        ),\n        reading: (\n          <a is=\"nav-to\" to={readingExpertEdition(frag.xmlId, frag.urlId)}>\n            <span class=\"icon icon-eye\"></span>\n          </a>\n        ),\n        volume: frag.volume,\n        page: frag.startPage,\n        date: frag.date,\n        heteronym: frag.heteronym || (\n          <span data-key=\"notAssigned\">{node.getConstants('notAssigned')}</span>\n        ),\n      }),\n      search: JSON.stringify(frag),\n    };\n  });\n};\n","/** @format */\n\nimport { getTableData } from './table-data';\nimport.meta.env.DEV ? await import('@ui/table-dev.js') : await import('@ui/table.js');\n\nexport default ({ node, constants }) => {\n\treturn (\n\t\t<>\n\t\t\t<ldod-table\n\t\t\t\tid=\"expertEditionTable\"\n\t\t\t\tclasses=\"table table-bordered table-hover\"\n\t\t\t\theaders={constants.headers}\n\t\t\t\tdata={getTableData(node)}\n\t\t\t\tconstants={constants}\n\t\t\t\tlanguage={node.language}\n\t\t\t\tdata-searchkey=\"externalId\"></ldod-table>\n\t\t</>\n\t);\n};\n","import constants from '../resources/constants';\nimport Title from '../../../common/title';\nimport ExpertEditionTable from './components/expert-edition-table';\n\nexport class LdodEditionAcrn extends HTMLElement {\n\tconstructor(lang, data) {\n\t\tsuper();\n\t\tthis.language = lang;\n\t\tthis.data = data;\n\t\tthis.editor = data?.[0]?.editor;\n\t}\n\n\tget ldodTable() {\n\t\treturn this.querySelector('ldod-table#expertEditionTable');\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tset language(lang) {\n\t\tthis.setAttribute('language', lang);\n\t}\n\n\tget wrapper() {\n\t\treturn this.querySelector('div#expertEditionFragsWrapper');\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['language'];\n\t}\n\n\tgetConstants(key, ...args) {\n\t\tconst constant = constants[this.language][key];\n\t\treturn args.length ? constant(...args) : constant;\n\t}\n\n\tconnectedCallback() {\n\t\tthis.appendChild(<div id=\"expertEditionFragsWrapper\"></div>);\n\t\tthis.addEventListeners();\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tlet titleArgs = {\n\t\t\teditor: this.editor,\n\t\t\tvalue: this.data.length,\n\t\t};\n\t\tthis.wrapper.innerHTML = '';\n\t\tthis.wrapper.appendChild(\n\t\t\t<>\n\t\t\t\t<Title args={JSON.stringify(titleArgs)} title={this.getConstants('edition', titleArgs)} key=\"edition\" />\n\t\t\t\t<ExpertEditionTable node={this} constants={constants} />\n\t\t\t</>\n\t\t);\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tthis.handeChangedAttribute[name](oldV, newV);\n\t}\n\n\thandeChangedAttribute = {\n\t\tlanguage: (oldV, newV) => {\n\t\t\tif (oldV && oldV !== newV) this.handleChangedLanguage();\n\t\t},\n\t};\n\n\taddEventListeners = () => {\n\t\tthis.addEventListener('ldod-table-searched', this.updateTitle);\n\t};\n\n\tupdateTitle = ({ detail }) => {\n\t\tlet titleArgs = {\n\t\t\teditor: this.editor,\n\t\t\tvalue: detail.size,\n\t\t};\n\t\tif (this.ldodTable.isFullyLoaded)\n\t\t\tthis.querySelector('h3#title').firstChild.textContent = this.getConstants('edition', titleArgs);\n\t};\n\n\thandleChangedLanguage = () => {\n\t\tthis.querySelectorAll('[data-key]').forEach(node => {\n\t\t\treturn (node.firstChild.textContent = node.dataset.args\n\t\t\t\t? this.getConstants(node.dataset.key, JSON.parse(node.dataset.args))\n\t\t\t\t: this.getConstants(node.dataset.key));\n\t\t});\n\t};\n\tdisconnectedCallback() {}\n}\n!customElements.get('ldod-edition-acrn') && customElements.define('ldod-edition-acrn', LdodEditionAcrn);\n","/** @format */\n\nimport { getExpertEditionByAcrn } from '@src/api-requests';\nimport { LdodEditionAcrn } from './ldod-edition-acrn';\n\nconst path = '/acronym/:acrn';\n\nconst mount = async (lang, ref) => {\n\tconst acrn = history.state?.acrn;\n\tconst data = await getExpertEditionByAcrn(acrn);\n\tif (data) document.querySelector(ref).appendChild(new LdodEditionAcrn(lang, data));\n};\n\nconst unMount = () => document.querySelector('ldod-edition-acrn')?.remove();\n\nexport { path, mount, unMount };\n"],"names":["getTableData","node","data","map","frag","externalId","number","title","createElement","is","to","textReferences","fragment","xmlId","reading","readingExpertEdition","urlId","class","volume","page","startPage","date","heteronym","getConstants","search","JSON","stringify","import","ExpertEditionTable","constants","createFragment","id","classes","headers","language","LdodEditionAcrn","HTMLElement","constructor","lang","this","editor","ldodTable","querySelector","getAttribute","setAttribute","wrapper","observedAttributes","key","args","constant","length","connectedCallback","appendChild","addEventListeners","render","titleArgs","value","innerHTML","Title","attributeChangedCallback","name","oldV","newV","handeChangedAttribute","handleChangedLanguage","addEventListener","updateTitle","detail","size","isFullyLoaded","firstChild","textContent","querySelectorAll","forEach","dataset","parse","disconnectedCallback","customElements","get","define","path","mount","async","ref","acrn","history","state","getExpertEditionByAcrn","document","unMount","remove"],"mappings":"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"}