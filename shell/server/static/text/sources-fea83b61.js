import{createElement as e,createFragment as t}from"@core";import{d as a}from"./api-requests-c6fca00d.js";import{T as o}from"./title-1f9bc6b4.js";import{t as s}from"./text-7122b869.js";let i;const n=async()=>{i=(await import("./image-viewer-e25b4f58.js")).imageViewer},r=e=>"manuscript"===e,d=a=>a.interSources?.map(((o,d)=>({externalId:o.externalId,data:()=>({docs:o.name,transcription:o.sourceIntersList?.map((({xmlId:t,urlId:a})=>e("a",{is:"nav-to",to:s.fragmentInter(t,a)},o.title))),date:o.date,type:e(t,null,"printed"===o.sourceType&&e("span",{"data-key":`${o.sourceType}`},a.getConstants(o.sourceType)),o.handNoteList?.map((({medium:o})=>e(t,null,e("span",{"data-key":"manuscript"},a.getConstants("manuscript")),"(",o?.toUpperCase(),")"))),o.typeNoteList?.map((({medium:o})=>e(t,null,e("span",{"data-key":"typescript"},a.getConstants("typescript")),"(",o.toUpperCase(),")")))),ldodLabel:r(o.sourceType)&&e("span",{"data-key":"hadLdoDLabel","data-args":o.hadLdoDLabel?"true":"false"},a.getConstants("hadLdoDLabel",o.hadLdoDLabel)),dimensions:r(o.sourceType)&&o.dimensionList?.length?o.dimensionList?.map((a=>e(t,null,a,e("br",null)))):"",fac:o.surfaceList?.length?e("div",{id:`fact-gallery-${d}`,class:"pswp-gallery",onPointerEnter:n},o.surfaceList?.map(((a,s)=>e(t,null,e("a",{"data-pswp-src":`https://ldod.uc.pt/facs/${a}`,onClick:()=>i?.(`div#fact-gallery-${d}`),"data-pswp-width":"1500","data-pswp-height":"1250"},"(",++s,") ",o.name),e("br",null))))):""}),search:JSON.stringify(o)})));await import("@ui/table.js");const l=({node:a,constants:o})=>e(t,null,e("ldod-table",{id:"interSourcesTable",classes:"table table-bordered table-hover",headers:o.headers,data:d(a),constants:o,"data-searchkey":"externalId"})),c={headers:["docs","transcription","date","type","ldodLabel","dimensions","fac"],pt:{interSources:e=>`Testemunhos (${e})`,docs:"Documentos",transcription:"Transcrição",type:"Tipo",date:"Data",ldodLabel:"Marca LdoD",hadLdoDLabel:e=>""+(e?"Sim":"Não"),dimensions:"Dimensões",fac:"Facsimiles",printed:"Impresso",manuscript:"Manuscrito",typescript:"Datiloscrito",title:"Título",handNote:"Manuscript",typeNote:"Datiloscrito",docsTooltip:"Documentos",transcriptionTooltip:"Transcrição topográfica feita pela equipa do Arquivo LdoD",dateTooltip:"Data inscrita ou atribuída ao fragmento",typeTooltip:"Descreve o tipo de documento como manuscrito, datiloscrito ou impresso",ldodLabelTooltip:"Marcação explícita feita por Fernando Pessoa de que o documento pertence ao LdoD",dimensionsTooltip:"Descreve as dimensões dos testemunhos",facTooltip:"Imagem dos documentos originais",titleTooltip:"Fac-símiles dos documentos originais de Fernando Pessoa (manuscritos, datiloscritos ou impressos)"},en:{interSources:e=>`Witnesses (${e})`,docs:"Documents",transcription:"Transcription",type:"Type",date:"Date",ldodLabel:"LdoD Mark",hadLdoDLabel:e=>""+(e?"Yes":"No"),dimensions:"Dimensions",fac:"Facsimiles",printed:"Printed",manuscript:"Manuscript",typescript:"Typescript",title:"Title",handNote:"Manuscript",typeNote:"Datiloscrito",docsTooltip:"Documents",transcriptionTooltip:"Topographic transcription made by the LdoD Archive team",dateTooltip:"Date inscribed or ascribed to the fragment",typeTooltip:"Describes the type of document as manuscript, typescript or printed",ldodLabelTooltip:"Explicit marking by Fernando Pessoa stating that the document belongs to the LdoD",dimensionsTooltip:"Describes the dimensions of the witnesses",facTooltip:"Image of original documents",titleTooltip:"Facsimiles of original documents by Fernando Pessoa (handwritten, typewritten or printed)"},es:{interSources:e=>`Testimonios (${e})`,docs:"Documentos",transcription:"Transcripción",type:"Tipo",date:"Fecha",ldodLabel:"Marca LdoD",hadLdoDLabel:e=>""+(e?"Si":"No"),dimensions:"Dimensiones",printed:"Impreso",manuscript:"Manuscrito",typescript:"Mecanografiado",title:"Título",handNote:"Manuscrito",typeNote:"Mecanografiado",fac:"Facsimiles",docsTooltip:"Documentos",transcriptionTooltip:"Transcripción topográfica realizada por el equipo del Archivo LdoD",dateTooltip:"Fecha inscrita o atribuida al fragmento",typeTooltip:"Describe el tipo de documento como manuscrito, mecanografiado o impreso",ldodLabelTooltip:"Marcación explícita hecha por Fernando Pessoa para señalar que el documento pertenece al LdoD",dimensionsTooltip:"Describe las dimensiones de los testimonios",facTooltip:"Imagen de los documentos originales",titleTooltip:"Facsímiles de los documentos originales de Fernando Pessoa (manuscritos, mecanografiados o impresos)"}},p=()=>import("@ui/tooltip.js");class u extends HTMLElement{constructor(){super()}get ldodTable(){return this.querySelector("ldod-table#interSourcesTable")}get language(){return this.getAttribute("language")}get wrapper(){return this.querySelector("div#interSourcesWrapper")}get interSourcesLength(){return this.interSources.length}static get observedAttributes(){return["language","data"]}getConstants(e,...t){const a=c[this.language][e];return t.length?a(...t):a}connectedCallback(){this.appendChild(e("div",{id:"interSourcesWrapper"})),this.render(),this.addEventListeners()}render(){this.hasAttribute("data")&&(this.wrapper.innerHTML="",this.wrapper.appendChild(e(t,null,e("div",{style:{display:"flex",justifyContent:"center"}},e(o,{title:this.getConstants("interSources",this.interSourcesLength),args:this.interSourcesLength,key:"interSources"}),e("span",{id:"titleTooltip",class:"icon-flex icon-info"})),e("ldod-tooltip",{"data-ref":"div#interSourcesWrapper span#titleTooltip","data-tooltipkey":"titleTooltip",placement:"top",light:!0,width:"250px",content:this.getConstants("titleTooltip")}),e(l,{node:this,constants:{headers:c.headers,...c[this.language]}}))))}attributeChangedCallback(e,t,a){this.handeChangedAttribute[e](t,a)}handeChangedAttribute={language:(e,t)=>{e&&e!==t&&this.handleChangedLanguage()},data:()=>{this.render(),this.addHeadersTooltips(),this.wrapper.addEventListener("pointerenter",p)}};addEventListeners=()=>{this.addEventListener("ldod-table-searched",this.updateTitle),this.addEventListener("ldod-table-increased",this.handleChangedLanguage)};updateTitle=({detail:e})=>{this.ldodTable.isFullyLoaded&&(this.querySelector("h3#title").firstChild.textContent=this.getConstants("interSources",e.size))};handleChangedLanguage=()=>{this.querySelectorAll("[data-key]").forEach((e=>e.firstChild.textContent=e.dataset.args?this.getConstants(e.dataset.key,JSON.parse(e.dataset.args)):this.getConstants(e.dataset.key))),this.querySelectorAll("[data-tooltipkey]").forEach((e=>e.setAttribute("content",this.getConstants(e.dataset.tooltipkey))))};addHeadersTooltips=()=>{this.ldodTable.querySelectorAll("table>thead>tr>th").forEach((t=>{this.wrapper.appendChild(e("ldod-tooltip",{"data-ref":`thead>tr>th[data-key='${t.dataset.key}']`,"data-tooltipkey":`${t.dataset.key}Tooltip`,placement:"top",content:this.getConstants(`${t.dataset.key}Tooltip`)}))}))}}!customElements.get("ldod-sources")&&customElements.define("ldod-sources",u);const m=async(t,o)=>{const s=document.querySelector(o).appendChild(e("ldod-sources",{language:t}));s.interSources=await a.sources,s.toggleAttribute("data",!0)},h=()=>document.querySelector("ldod-sources")?.remove(),g="/sources";export{m as mount,g as path,h as unMount};
//# sourceMappingURL=sources-fea83b61.js.map
