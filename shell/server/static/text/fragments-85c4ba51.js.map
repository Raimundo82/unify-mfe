{"version":3,"file":"fragments-85c4ba51.js","sources":["../src/pages/fragments/components/table-data.jsx","../src/pages/fragments/components/frags-table.jsx","../src/pages/fragments/ldod-fragments.jsx","../src/pages/fragments/fragments.jsx"],"sourcesContent":["import textReferences from '@src/references';\nimport { getExpertEdition } from './expert-edition';\nimport { getSourceInter } from './source-inter.jsx';\n\nexport const getTableData = (node) => {\n  return node.fragments?.map((frag, index) => {\n    return {\n      externalId: frag.externalId,\n      data: () => ({\n        title: (\n          <a is=\"nav-to\" to={textReferences.fragment(frag.xmlId)}>\n            {frag.title}\n          </a>\n        ),\n        jpc: getExpertEdition(frag.expertsInterMap.JPC, node),\n        tsc: getExpertEdition(frag.expertsInterMap.TSC, node),\n        rz: getExpertEdition(frag.expertsInterMap.RZ, node),\n        jp: getExpertEdition(frag.expertsInterMap.JP, node),\n        wit1: getSourceInter(\n          frag.sortedSourceInterList[0] ?? {},\n          node,\n          `wit-1${index}`\n        ),\n        wit2: getSourceInter(\n          frag.sortedSourceInterList[1] ?? {},\n          node,\n          `wit-2${index}`\n        ),\n        wit3: getSourceInter(\n          frag.sortedSourceInterList[2] ?? {},\n          node,\n          `wit-3${index}`\n        ),\n      }),\n      search: JSON.stringify(frag),\n    };\n  });\n};\n","/** @format */\n\nimport { getTableData } from './table-data';\nimport.meta.env.DEV ? await import('@ui/table-dev.js') : await import('@ui/table.js');\n\nexport default ({ node, constants }) => {\n\treturn (\n\t\t<>\n\t\t\t<ldod-table\n\t\t\t\tid=\"encodedFragsTable\"\n\t\t\t\tclasses=\"table table-bordered table-hover\"\n\t\t\t\theaders={constants.headers}\n\t\t\t\tdata={getTableData(node)}\n\t\t\t\tdata-rows=\"5\"\n\t\t\t\tconstants={constants}\n\t\t\t\tdata-searchkey=\"externalId\"></ldod-table>\n\t\t</>\n\t);\n};\n","/** @format */\n\nimport FragsTable from './components/frags-table.jsx';\nimport Title from '@src/common/title.jsx';\nimport constants from './constants.js';\nimport { loadingPublisher } from '../../events-module.js';\nimport { sleep } from '../../utils.js';\n\nexport class LdodFragments extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget ldodTable() {\n\t\treturn this.querySelector('ldod-table#encodedFragsTable');\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\tget wrapper() {\n\t\treturn this.querySelector('div#encodedFragsWrapper');\n\t}\n\n\tget numberOfFragments() {\n\t\treturn this.fragments.length;\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['language', 'data'];\n\t}\n\n\tgetConstants(key, ...args) {\n\t\tconst constant = constants[this.language][key];\n\t\treturn args.length ? constant(...args) : constant;\n\t}\n\n\tconnectedCallback() {\n\t\tthis.appendChild(<div id=\"encodedFragsWrapper\"></div>);\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tif (!this.hasAttribute('data')) return;\n\t\tthis.wrapper.innerHTML = '';\n\t\tthis.wrapper.appendChild(\n\t\t\t<>\n\t\t\t\t<div id=\"titleNavContainer\">\n\t\t\t\t\t<Title\n\t\t\t\t\t\ttitle={this.getConstants('encodedFragments', this.numberOfFragments)}\n\t\t\t\t\t\targs={this.numberOfFragments}\n\t\t\t\t\t\tkey=\"encodedFragments\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<FragsTable\n\t\t\t\t\t\t\tnode={this}\n\t\t\t\t\t\t\tconstants={{\n\t\t\t\t\t\t\t\theaders: constants.headers,\n\t\t\t\t\t\t\t\t...constants[this.language],\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t\tthis.addEventListeners();\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tthis.handeChangedAttribute[name](oldV, newV);\n\t}\n\n\thandeChangedAttribute = {\n\t\tlanguage: (oldV, newV) => {\n\t\t\tif (oldV && oldV !== newV) this.onChangedLanguage();\n\t\t},\n\t\tdata: () => {\n\t\t\tthis.render();\n\t\t},\n\t};\n\n\taddEventListeners = () => {\n\t\tthis.addEventListener('ldod-table-searched', this.updateTitle);\n\t\tthis.addEventListener('ldod-table-increased', this.handleChangedLanguage);\n\t};\n\n\tupdateTitle = ({ detail }) => {\n\t\tif (this.ldodTable.isFullyLoaded)\n\t\t\tthis.querySelector('h3#title').firstChild.textContent = this.getConstants(\n\t\t\t\t'encodedFragments',\n\t\t\t\tdetail.size\n\t\t\t);\n\t};\n\n\tonChangedLanguage = () => {\n\t\tloadingPublisher(true);\n\t\tsleep(1).then(() => {\n\t\t\tthis.handleChangedLanguage();\n\t\t\tloadingPublisher(false);\n\t\t});\n\t};\n\n\thandleChangedLanguage = () => {\n\t\tthis.querySelectorAll('[data-key]').forEach(node => {\n\t\t\tnode.firstChild.textContent =\n\t\t\t\tnode.dataset.args || node.hasAttribute('data-args')\n\t\t\t\t\t? this.getConstants(\n\t\t\t\t\t\t\tnode.dataset.key,\n\t\t\t\t\t\t\tJSON.parse(node.dataset.args || node.hasAttribute('data-args'))\n\t\t\t\t\t  )\n\t\t\t\t\t: this.getConstants(node.dataset.key);\n\t\t});\n\t};\n}\n!customElements.get('ldod-fragments') && customElements.define('ldod-fragments', LdodFragments);\n","\nimport { dataProxy } from '@src/api-requests.js';\nimport './ldod-fragments';\n\n\nconst mount = async (lang, ref) => {\n  const encodedFragments = document\n    .querySelector(ref)\n    .appendChild(<ldod-fragments language={lang}></ldod-fragments>);\n  encodedFragments.fragments = await dataProxy.fragments;\n  encodedFragments.toggleAttribute('data', true);\n};\n\nconst unMount = () => document.querySelector('ldod-fragments')?.remove();\n\nconst path = '/fragments';\n\nexport { mount, unMount, path };\n"],"names":["getTableData","node","fragments","map","frag","index","externalId","data","title","createElement","is","to","textReferences","fragment","xmlId","jpc","getExpertEdition","expertsInterMap","JPC","tsc","TSC","rz","RZ","jp","JP","wit1","getSourceInter","sortedSourceInterList","wit2","wit3","search","JSON","stringify","import","FragsTable","constants","createFragment","id","classes","headers","LdodFragments","HTMLElement","constructor","ldodTable","this","querySelector","language","getAttribute","wrapper","numberOfFragments","length","observedAttributes","getConstants","key","args","constant","connectedCallback","appendChild","render","hasAttribute","innerHTML","Title","addEventListeners","attributeChangedCallback","name","oldV","newV","handeChangedAttribute","onChangedLanguage","addEventListener","updateTitle","handleChangedLanguage","detail","isFullyLoaded","firstChild","textContent","size","loadingPublisher","sleep","then","querySelectorAll","forEach","dataset","parse","customElements","get","define","mount","async","lang","ref","encodedFragments","document","dataProxy","toggleAttribute","unMount","remove","path"],"mappings":"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"}