import{createElement as e,createFragment as t}from"@core";import{d as a}from"./api-requests-c6fca00d.js";import{t as s}from"./text-7122b869.js";import{g as r}from"./expert-edition-56d6ee5a.js";import{g as n}from"./source-inter-e69668f8.js";import{T as d}from"./title-1f9bc6b4.js";import{f as i,s as o}from"./constants-5d8195b3.js";import{loadingPublisher as l}from"./events-module-f429bffa.js";import"./header-data-6f3b8c10.js";const g=t=>t.fragments?.map(((a,d)=>({externalId:a.externalId,data:()=>({title:e("a",{is:"nav-to",to:s.fragment(a.xmlId)},a.title),jpc:r(a.expertsInterMap.JPC,t),tsc:r(a.expertsInterMap.TSC,t),rz:r(a.expertsInterMap.RZ,t),jp:r(a.expertsInterMap.JP,t),wit1:n(a.sortedSourceInterList[0]??{},t,`wit-1${d}`),wit2:n(a.sortedSourceInterList[1]??{},t,`wit-2${d}`),wit3:n(a.sortedSourceInterList[2]??{},t,`wit-3${d}`)}),search:JSON.stringify(a)})));await import("@ui/table.js");const h=({node:a,constants:s})=>e(t,null,e("ldod-table",{id:"encodedFragsTable",classes:"table table-bordered table-hover",headers:s.headers,data:g(a),"data-rows":"5",constants:s,"data-searchkey":"externalId"}));class u extends HTMLElement{constructor(){super()}get ldodTable(){return this.querySelector("ldod-table#encodedFragsTable")}get language(){return this.getAttribute("language")}get wrapper(){return this.querySelector("div#encodedFragsWrapper")}get numberOfFragments(){return this.fragments.length}static get observedAttributes(){return["language","data"]}getConstants(e,...t){const a=i[this.language][e];return t.length?a(...t):a}connectedCallback(){this.appendChild(e("div",{id:"encodedFragsWrapper"})),this.render()}render(){this.hasAttribute("data")&&(this.wrapper.innerHTML="",this.wrapper.appendChild(e(t,null,e("div",{id:"titleNavContainer"},e(d,{title:this.getConstants("encodedFragments",this.numberOfFragments),args:this.numberOfFragments,key:"encodedFragments"}),e("div",null,e(h,{node:this,constants:{headers:i.headers,...i[this.language]}}))))),this.addEventListeners())}attributeChangedCallback(e,t,a){this.handeChangedAttribute[e](t,a)}handeChangedAttribute={language:(e,t)=>{e&&e!==t&&this.onChangedLanguage()},data:()=>{this.render()}};addEventListeners=()=>{this.addEventListener("ldod-table-searched",this.updateTitle),this.addEventListener("ldod-table-increased",this.handleChangedLanguage)};updateTitle=({detail:e})=>{this.ldodTable.isFullyLoaded&&(this.querySelector("h3#title").firstChild.textContent=this.getConstants("encodedFragments",e.size))};onChangedLanguage=()=>{l(!0),o(1).then((()=>{this.handleChangedLanguage(),l(!1)}))};handleChangedLanguage=()=>{this.querySelectorAll("[data-key]").forEach((e=>{e.firstChild.textContent=e.dataset.args||e.hasAttribute("data-args")?this.getConstants(e.dataset.key,JSON.parse(e.dataset.args||e.hasAttribute("data-args"))):this.getConstants(e.dataset.key)}))}}!customElements.get("ldod-fragments")&&customElements.define("ldod-fragments",u);const m=async(t,s)=>{const r=document.querySelector(s).appendChild(e("ldod-fragments",{language:t}));r.fragments=await a.fragments,r.toggleAttribute("data",!0)},c=()=>document.querySelector("ldod-fragments")?.remove(),p="/fragments";export{m as mount,p as path,c as unMount};
//# sourceMappingURL=fragments-85c4ba51.js.map
