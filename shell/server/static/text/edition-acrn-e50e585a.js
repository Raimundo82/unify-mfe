import{e as t}from"./api-requests-c6fca00d.js";import{createElement as e,createFragment as a}from"@core";import{c as n}from"./ldod-edition-4b5f279c.js";import{T as s}from"./title-1f9bc6b4.js";import{t as r}from"./text-7122b869.js";import{r as i}from"./external-deps-3bddd128.js";const d=t=>t.data?.map((a=>({externalId:a.externalId,data:()=>({number:+a.number,title:e("a",{is:"nav-to",to:r.fragment(a.xmlId)},a.title),reading:e("a",{is:"nav-to",to:i(a.xmlId,a.urlId)},e("span",{class:"icon icon-eye"})),volume:a.volume,page:a.startPage,date:a.date,heteronym:a.heteronym||e("span",{"data-key":"notAssigned"},t.getConstants("notAssigned"))}),search:JSON.stringify(a)})));await import("@ui/table.js");const o=({node:t,constants:n})=>e(a,null,e("ldod-table",{id:"expertEditionTable",classes:"table table-bordered table-hover",headers:n.headers,data:d(t),constants:n,language:t.language,"data-searchkey":"externalId"}));class l extends HTMLElement{constructor(t,e){super(),this.language=t,this.data=e,this.editor=e?.[0]?.editor}get ldodTable(){return this.querySelector("ldod-table#expertEditionTable")}get language(){return this.getAttribute("language")}set language(t){this.setAttribute("language",t)}get wrapper(){return this.querySelector("div#expertEditionFragsWrapper")}static get observedAttributes(){return["language"]}getConstants(t,...e){const a=n[this.language][t];return e.length?a(...e):a}connectedCallback(){this.appendChild(e("div",{id:"expertEditionFragsWrapper"})),this.addEventListeners(),this.render()}render(){let t={editor:this.editor,value:this.data.length};this.wrapper.innerHTML="",this.wrapper.appendChild(e(a,null,e(s,{args:JSON.stringify(t),title:this.getConstants("edition",t),key:"edition"}),e(o,{node:this,constants:n})))}attributeChangedCallback(t,e,a){this.handeChangedAttribute[t](e,a)}handeChangedAttribute={language:(t,e)=>{t&&t!==e&&this.handleChangedLanguage()}};addEventListeners=()=>{this.addEventListener("ldod-table-searched",this.updateTitle)};updateTitle=({detail:t})=>{let e={editor:this.editor,value:t.size};this.ldodTable.isFullyLoaded&&(this.querySelector("h3#title").firstChild.textContent=this.getConstants("edition",e))};handleChangedLanguage=()=>{this.querySelectorAll("[data-key]").forEach((t=>t.firstChild.textContent=t.dataset.args?this.getConstants(t.dataset.key,JSON.parse(t.dataset.args)):this.getConstants(t.dataset.key)))};disconnectedCallback(){}}!customElements.get("ldod-edition-acrn")&&customElements.define("ldod-edition-acrn",l);const g="/acronym/:acrn",h=async(e,a)=>{const n=history.state?.acrn,s=await t(n);s&&document.querySelector(a).appendChild(new l(e,s))},u=()=>document.querySelector("ldod-edition-acrn")?.remove();export{h as mount,g as path,u as unMount};
//# sourceMappingURL=edition-acrn-e50e585a.js.map
