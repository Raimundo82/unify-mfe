{"version":3,"file":"nav-bar-70dcc18e.js","sources":["../src/nav-bar/ldod-event-bus.js","../src/nav-bar/li-lang-drop.js","../src/nav-bar/json-schemas/constants-schema.js","../src/nav-bar/json-schemas/navbar-menu-schema.js","../src/nav-bar/auth-menu/auth-menu-html.js","../src/nav-bar/json-schemas/navbar-auth-schema.js","../src/nav-bar/auth-menu/auth-menu.js","../src/nav-bar/nav-bar.js"],"sourcesContent":["/** @format */\nconst warn = () => console.warn('eventBus not found');\nexport const ldodEventBus = globalThis.eventBus ?? {\n\tpublisher: warn,\n\tsubscribe: warn,\n\tregister: warn,\n};\n","/** @format */\n\nimport { ldodEventBus } from './ldod-event-bus';\n\nclass LangDrop extends HTMLLIElement {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget items() {\n\t\treturn Array.from(this.children);\n\t}\n\n\tconnectedCallback() {\n\t\tthis.unsub = ldodEventBus.subscribe('ldod:language', true, ({ payload }) => {\n\t\t\tthis.language = payload;\n\t\t\tthis.setActive();\n\t\t\tthis.addEventListeners();\n\t\t}).unsubscribe;\n\t\tthis.unsub();\n\t}\n\n\taddEventListeners = () => {\n\t\tthis.items.forEach(ele => ele.addEventListener('click', this.updateLanguage));\n\t};\n\n\tupdateLanguage = e => {\n\t\te.stopPropagation();\n\t\tthis.language = e.target.id;\n\t\tthis.setActive();\n\t\tldodEventBus.publish('ldod:language', this.language);\n\t};\n\n\tsetActive() {\n\t\tthis.items.forEach(ele => {\n\t\t\tele.classList.remove('active');\n\t\t\tele.id === this.language && ele.classList.add('active');\n\t\t});\n\t}\n}\n\ncustomElements.define('lang-drop', LangDrop, { extends: 'li' });\n","/** @format */\n\nexport default {\n\ttype: 'object',\n\trequired: ['pt', 'en', 'es'],\n\tproperties: {\n\t\tpt: { type: 'object' },\n\t\ten: { type: 'object' },\n\t\tes: { type: 'object' },\n\t},\n};\n","/** @format */\nimport constants from './constants-schema';\nexport default {\n\ttype: 'object',\n\trequired: ['name', 'data'],\n\tproperties: {\n\t\tname: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tdata: {\n\t\t\ttype: 'object',\n\t\t\trequired: ['name', 'links'],\n\t\t\tproperties: {\n\t\t\t\tname: { type: 'string' },\n\t\t\t\tlinks: {\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\titems: {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\trequired: ['key'],\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\troute: {\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlink: {\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\treplace: { type: 'boolean' },\n\t\tconstants,\n\t},\n};\n","/** @format */\n\nexport default ({ isAuth, data, name }, lang) => {\n\treturn isAuth ? authed(name, data, lang) : links(data, lang);\n};\n\nconst authed = (name, data, lang) => {\n\treturn /*html*/ `\n  <a class=\"dropdown-toggle nav-link\" role=\"button\" key=\"user\">\n    ${name}\n    <span class=\"caret\"></span>\n  </a>\n  <ul class=\"dropdown-menu\">\n    ${links(data, lang)}\n  </ul>`;\n};\n\nconst links = ({ constants, links }, lang) => {\n\treturn links\n\t\t.map(({ key, path }) => {\n\t\t\treturn /* html */ `\n\t\t\t<a is=\"nav-to\" class=\"dropdown-item\" data-key=\"${key}\" to=\"${path}\" key=\"user\">\n\t\t\t\t${constants[lang]?.[key] ?? key}\n\t\t\t</a>`;\n\t\t})\n\t\t.join('');\n};\n","/** @format */\nimport constants from './constants-schema';\nexport default {\n\ttype: 'object',\n\trequired: ['name', 'data'],\n\tproperties: {\n\t\tname: {\n\t\t\ttype: 'string',\n\t\t},\n\t\tdata: {\n\t\t\ttype: 'object',\n\t\t\trequired: ['links'],\n\t\t\tproperties: {\n\t\t\t\tlinks: {\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\titems: {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\trequired: ['key', 'path'],\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpath: {\n\t\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tconstants,\n\t\t\t},\n\t\t},\n\t\tisAuth: { type: 'boolean' },\n\t},\n};\n","/** @format */\n\nimport { ldodEventBus } from '../ldod-event-bus';\nimport authMenuHtml from './auth-menu-html';\nimport navbarAuthSchema from '../json-schemas/navbar-auth-schema';\n\nclass UserAuthMenu extends HTMLLIElement {\n\tconstructor() {\n\t\tsuper();\n\t\tldodEventBus.register('navbar:auth-status', navbarAuthSchema);\n\t\tldodEventBus.subscribe('navbar:auth-status', this.render);\n\t}\n\n\tstatic observedAttributes = ['language'];\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tif (name === 'language' && oldV && oldV !== newV) this.onLanguage();\n\t}\n\n\tonLanguage = () => {\n\t\tthis.querySelectorAll('[data-key]').forEach(element => {\n\t\t\telement.textContent = this.constants?.[this.language]?.[element.dataset.key] ?? key;\n\t\t});\n\t};\n\n\trender = ({ payload }) => {\n\t\tthis.constants = payload.data.constants;\n\t\tthis.innerHTML = authMenuHtml(payload, this.language);\n\t};\n}\n\ncustomElements.define('user-auth-menu', UserAuthMenu, { extends: 'li' });\n","/** @format */\n\nimport './li-lang-drop';\nimport '@ui/nav-dropdown.js';\nimport transitionsCss from '@ui/bootstrap/transitions-css.js';\nimport navbarMenuSchema from './json-schemas/navbar-menu-schema';\nimport { ldodEventBus } from './ldod-event-bus';\nimport './auth-menu/auth-menu';\n\nconst constants = {\n\ten: {\n\t\theader_title: 'LdoD Archive',\n\t},\n\tpt: {\n\t\theader_title: 'Arquivo LdoD',\n\t},\n\tes: {\n\t\theader_title: 'Archivo LdoD',\n\t},\n};\n\nconst sheet = new CSSStyleSheet();\nsheet.replaceSync(transitionsCss);\n\nlet Collapse;\nconst loadBootstrapJSModules = async () => {\n\tCollapse = (await import('@ui/bootstrap/collapse.js')).default;\n};\n\nclass NavBar extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.isRendered = this.shadowRoot?.innerHTML;\n\t\tldodEventBus.register(`ldod:header`, navbarMenuSchema);\n\t\tldodEventBus.subscribe(`ldod:header`, this.onMenuCallback);\n\t\tif (!this.isRendered) this.attachShadow({ mode: 'open' });\n\t\tthis.headersToConsume = [];\n\t\tif (!NavBar.instance) NavBar.instance = this;\n\t\treturn NavBar.instance;\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['language'];\n\t}\n\tget language() {\n\t\treturn this.getAttribute('language') || 'en';\n\t}\n\n\tget dropdowns() {\n\t\treturn this.shadowRoot.querySelectorAll(\"li[is='nav-dropdown']\");\n\t}\n\n\tget userComponents() {\n\t\treturn this.shadowRoot.querySelectorAll(\"li[is='user-auth-menu']\");\n\t}\n\n\tget collapseToggler() {\n\t\treturn this.shadowRoot.querySelector('button[data-bs-toggle=\"collapse\"]');\n\t}\n\n\tget dropItems() {\n\t\treturn Array.from(this.shadowRoot.querySelectorAll('.dropdown-menu a.dropdown-item'));\n\t}\n\n\tget reference() {\n\t\treturn this.shadowRoot.querySelector('div#reference');\n\t}\n\n\tget dropdownSize() {\n\t\treturn this.shadowRoot.querySelectorAll(\"li[is='nav-dropdown']\").length + 1;\n\t}\n\n\t// Custom Elements hooks\n\n\tasync connectedCallback() {\n\t\tif (!this.isRendered) {\n\t\t\tthis.shadowRoot.innerHTML = await getNavbarHTML(this.language);\n\t\t\tthis.isRendered = true;\n\t\t\tthis.consumeHeaders();\n\t\t}\n\t\tthis.shadowRoot.adoptedStyleSheets = [sheet];\n\t\twindow.addEventListener('pointermove', this.render, { once: true });\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.unsubLogout?.();\n\t\tthis.unsubLogin?.();\n\t}\n\n\tattributeChangedCallback(name, oldValue, newValue) {\n\t\tthis.handleChangedAttribute[name](oldValue, newValue);\n\t}\n\n\t// Custom element on render\n\n\trender = async () => {\n\t\tawait this.createInstances();\n\t\tthis.addEventListeners();\n\t\tthis.setDropDownMaxWidth();\n\t};\n\n\tasync createInstances() {\n\t\tawait loadBootstrapJSModules().then(() => {\n\t\t\tthis.collapses = Array.from(this.shadowRoot.querySelectorAll('.collapse')).map(\n\t\t\t\tcollapse => new Collapse(collapse, { toggle: false })\n\t\t\t);\n\t\t});\n\t}\n\n\taddEventListeners() {\n\t\tthis.collapseToggler?.addEventListener('click', this.onToggler);\n\n\t\tdocument.addEventListener('click', e => {\n\t\t\tif (!this.contains(e.target)) this.toggleDropdownMenu(e);\n\t\t});\n\n\t\tthis.shadowRoot.addEventListener('click', this.toggleDropdownMenu);\n\n\t\tthis.shadowRoot.addEventListener('click', e => {\n\t\t\tif (e.target.classList.contains('dropdown-item'))\n\t\t\t\tthis.shadowRoot.querySelector('#navbar-nav').classList.remove('show');\n\t\t});\n\t}\n\n\tsetDropDownMaxWidth() {\n\t\tsheet.insertRule(`ul.navbar-nav>li{max-width: ${100 / this.dropdownSize}%}`);\n\t}\n\n\tonToggler = () =>\n\t\tthis.collapses.forEach(element => {\n\t\t\telement.toggle();\n\t\t});\n\n\ttoggleDropdownMenu = e => {\n\t\tconst key = e.target.getAttribute('key');\n\t\tthis.dropdowns.forEach(drop => {\n\t\t\tif (drop.key === key) return drop.toggleAttribute('show');\n\t\t\tdrop.toggleAttribute('show', false);\n\t\t});\n\n\t\tthis.userComponents.forEach(userC => {\n\t\t\tif (userC.getAttribute('key') === key) return this.toggleUserComponentMenu(userC);\n\t\t\tthis.toggleUserComponentMenu(userC, false);\n\t\t});\n\t};\n\n\ttoggleUserComponentMenu = (userC, force = undefined) => {\n\t\tif (force === undefined)\n\t\t\treturn userC.querySelectorAll('a.dropdown-toggle, ul.dropdown-menu').forEach(ele => {\n\t\t\t\tele.classList.toggle('show');\n\t\t\t});\n\n\t\tuserC\n\t\t\t.querySelectorAll('a.dropdown-toggle, ul.dropdown-menu')\n\t\t\t.forEach(ele => ele.classList.toggle('show', force));\n\t};\n\n\thandleChangedAttribute = {\n\t\tlanguage: (oldV, newV) => oldV !== newV && this.onLanguageChange(),\n\t};\n\n\tonLanguageChange() {\n\t\tthis.shadowRoot.querySelectorAll('[language]').forEach(ele => {\n\t\t\tele.setAttribute('language', this.language);\n\t\t});\n\t\tthis.shadowRoot.querySelectorAll('[data-navbar-key]').forEach(ele => {\n\t\t\tele.textContent = constants[this.language][ele.dataset.navbarKey];\n\t\t});\n\t}\n\n\tonMenuCallback = ({ payload }) => {\n\t\tconst drop = this.getNavbarMenuByKey(payload.name);\n\t\tif (drop) drop.onNewLink({ payload });\n\t\telse {\n\t\t\tconst header = this.newMenu(payload);\n\t\t\tthis.addMenu(header);\n\t\t}\n\t};\n\n\tnewMenu = payload => {\n\t\tconst template = document.createElement('template');\n\t\ttemplate.innerHTML = /*html*/ `\n\t\t<li\n\t\t\t${payload.hidden ? 'hidden' : ''} \n\t\t\tis=\"nav-dropdown\"\n\t\t\tkey=\"${payload.name}\"\n\t\t\tlanguage=\"${this.language}\"\n\t\t\tdata-headers='${JSON.stringify(payload)}'\n\t\t></li>`;\n\t\treturn template.content.firstElementChild.cloneNode(true);\n\t};\n\n\taddMenu(liDropdownNode) {\n\t\tif (!this.checkNavBarRenderedAndValid(liDropdownNode)) return;\n\t\tconst key = liDropdownNode.getAttribute('key');\n\t\tconst where = key === 'admin' ? 'afterend' : 'beforebegin';\n\t\t(this.getNavbarMenuByKey(key) || this.reference).insertAdjacentElement(\n\t\t\twhere,\n\t\t\tliDropdownNode\n\t\t);\n\t}\n\n\tconsumeHeaders() {\n\t\twhile (this.headersToConsume.length) this.addMenu(this.headersToConsume.pop());\n\t}\n\n\tcheckNavBarRenderedAndValid(liDropdownNode) {\n\t\tif (!this.isRendered) this.headersToConsume.push(liDropdownNode);\n\t\treturn this.isRendered && liDropdownNode instanceof HTMLLIElement && this.dropdownSize < 10;\n\t}\n\n\tgetNavbarMenuByKey = key =>\n\t\tthis.shadowRoot.querySelector(`li[is='nav-dropdown'][key='${key}']`);\n\n\tsetMenuVis = (key, hidden) => {\n\t\tconst menu = this.getNavbarMenuByKey(key);\n\t\tif (!menu) return;\n\t\tmenu.hidden = hidden;\n\t};\n}\n\n!customElements.get('nav-bar') && customElements.define('nav-bar', NavBar);\n\nasync function getNavbarHTML(lang) {\n\treturn (await import('./nav-bar-html')).default(lang);\n}\n"],"names":["warn","console","ldodEventBus","globalThis","eventBus","publisher","subscribe","register","LangDrop","HTMLLIElement","constructor","items","Array","from","this","children","connectedCallback","unsub","payload","language","setActive","addEventListeners","unsubscribe","forEach","ele","addEventListener","updateLanguage","e","stopPropagation","target","id","publish","classList","remove","add","customElements","define","extends","constants$1","type","required","properties","pt","en","es","navbarMenuSchema","name","data","links","key","route","link","replace","constants","authed","lang","map","path","join","navbarAuthSchema","isAuth","UserAuthMenu","render","static","getAttribute","attributeChangedCallback","oldV","newV","onLanguage","querySelectorAll","element","textContent","dataset","innerHTML","authMenuHtml","header_title","sheet","CSSStyleSheet","Collapse","replaceSync","transitionsCss","NavBar","HTMLElement","super","isRendered","shadowRoot","onMenuCallback","attachShadow","mode","headersToConsume","instance","observedAttributes","dropdowns","userComponents","collapseToggler","querySelector","dropItems","reference","dropdownSize","length","async","import","default","getNavbarHTML","consumeHeaders","adoptedStyleSheets","window","once","disconnectedCallback","unsubLogout","unsubLogin","oldValue","newValue","handleChangedAttribute","createInstances","setDropDownMaxWidth","loadBootstrapJSModules","then","collapses","collapse","toggle","onToggler","document","contains","toggleDropdownMenu","insertRule","drop","toggleAttribute","userC","toggleUserComponentMenu","force","onLanguageChange","setAttribute","navbarKey","getNavbarMenuByKey","onNewLink","header","newMenu","addMenu","template","createElement","hidden","JSON","stringify","content","firstElementChild","cloneNode","liDropdownNode","checkNavBarRenderedAndValid","where","insertAdjacentElement","pop","push","setMenuVis","menu","get"],"mappings":"4EACA,MAAMA,EAAO,IAAMC,QAAQD,KAAK,sBACnBE,EAAeC,WAAWC,UAAY,CAClDC,UAAWL,EACXM,UAAWN,EACXO,SAAUP,GCDX,MAAMQ,UAAiBC,cACtBC,qBAEC,CAEGC,YACI,OAAAC,MAAMC,KAAKC,KAAKC,SACvB,CAEDC,oBACMF,KAAAG,MAAQf,EAAaI,UAAU,iBAAiB,GAAM,EAAGY,QAAAA,MAC7DJ,KAAKK,SAAWD,EAChBJ,KAAKM,YACLN,KAAKO,mBAAiB,IACpBC,YACHR,KAAKG,OACL,CAEDI,kBAAoB,KACdP,KAAAH,MAAMY,SAAQC,GAAOA,EAAIC,iBAAiB,QAASX,KAAKY,iBAAe,EAG7EA,eAAsBC,IACrBA,EAAEC,kBACFd,KAAKK,SAAWQ,EAAEE,OAAOC,GACzBhB,KAAKM,YACLlB,EAAa6B,QAAQ,gBAAiBjB,KAAKK,SAAQ,EAGpDC,YACMN,KAAAH,MAAMY,SAAQC,IAClBA,EAAIQ,UAAUC,OAAO,UACrBT,EAAIM,KAAOhB,KAAKK,UAAYK,EAAIQ,UAAUE,IAAI,SAAQ,GAEvD,EAGFC,eAAeC,OAAO,YAAa5B,EAAU,CAAE6B,QAAS,OCvCxD,MAAeC,EAAA,CACdC,KAAM,SACNC,SAAU,CAAC,KAAM,KAAM,MACvBC,WAAY,CACXC,GAAI,CAAEH,KAAM,UACZI,GAAI,CAAEJ,KAAM,UACZK,GAAI,CAAEL,KAAM,YCNCM,EAAA,CACdN,KAAM,SACNC,SAAU,CAAC,OAAQ,QACnBC,WAAY,CACXK,KAAM,CACLP,KAAM,UAEPQ,KAAM,CACLR,KAAM,SACNC,SAAU,CAAC,OAAQ,SACnBC,WAAY,CACXK,KAAM,CAAEP,KAAM,UACdS,MAAO,CACNT,KAAM,QACN5B,MAAO,CACN4B,KAAM,SACNC,SAAU,CAAC,OACXC,WAAY,CACXQ,IAAK,CACJV,KAAM,UAEPW,MAAO,CACNX,KAAM,UAEPY,KAAM,CACLZ,KAAM,eAOZa,QAAS,CAAEb,KAAM,WACnBc,UAAEA,IC7BIC,EAAS,CAACR,EAAMC,EAAMQ,IAAAA,0EAGtBT,iFAIAE,EAAMD,EAAMQ,cAIZP,EAAQ,EAAGK,UAAAA,EAAWL,MAAAA,GAASO,IAC7BP,EACLQ,KAAI,EAAGP,IAAAA,EAAKQ,KAAAA,+DAEqCR,UAAYQ,2BAC1DJ,EAAUE,KAAQN,IAAQA,kBAG7BS,KAAK,ICvBOC,EAAA,CACdpB,KAAM,SACNC,SAAU,CAAC,OAAQ,QACnBC,WAAY,CACXK,KAAM,CACLP,KAAM,UAEPQ,KAAM,CACLR,KAAM,SACNC,SAAU,CAAC,SACXC,WAAY,CACXO,MAAO,CACNT,KAAM,QACN5B,MAAO,CACN4B,KAAM,SACNC,SAAU,CAAC,MAAO,QAClBC,WAAY,CACXQ,IAAK,CACJV,KAAM,UAEPkB,KAAM,CACLlB,KAAM,aAKdc,UAAIA,IAGFO,OAAQ,CAAErB,KAAM,aCzBlB,MAAMsB,UAAqBpD,cAC1BC,sBAECR,EAAaK,SAAS,qBAAsBoD,GAC5CzD,EAAaI,UAAU,qBAAsBQ,KAAKgD,OAClD,CAEDC,0BAA4B,CAAC,YAEzB5C,eACI,OAAAL,KAAKkD,aAAa,WACzB,CAEDC,yBAAyBnB,EAAMoB,EAAMC,GACvB,aAATrB,GAAuBoB,GAAQA,IAASC,GAAMrD,KAAKsD,YACvD,CAEDA,WAAa,KACZtD,KAAKuD,iBAAiB,cAAc9C,SAAQ+C,IAC3CA,EAAQC,YAAczD,KAAKuC,YAAYvC,KAAKK,YAAYmD,EAAQE,QAAQvB,MAAQA,GAAA,GAChF,EAGFa,OAAS,EAAG5C,QAAAA,MACNJ,KAAAuC,UAAYnC,EAAQ6B,KAAKM,UAC9BvC,KAAK2D,UF7BQ,GAAGb,OAAAA,EAAQb,KAAAA,EAAMD,KAAAA,GAAQS,IAChCK,EAASN,EAAOR,EAAMC,EAAMQ,GAAQP,EAAMD,EAAMQ,GE4BrCmB,CAAaxD,EAASJ,KAAKK,SAAQ,EAItDgB,eAAeC,OAAO,iBAAkByB,EAAc,CAAExB,QAAS,OC1BjE,MAAMgB,EAAY,CACjBV,GAAI,CACHgC,aAAc,gBAEfjC,GAAI,CACHiC,aAAc,gBAEf/B,GAAI,CACH+B,aAAc,iBAIVC,EAAQ,IAAIC,cAGlB,IAAIC,EAFJF,EAAMG,YAAYC,GAOlB,MAAMC,UAAeC,YACpBxE,cACC,OAAAyE,QACArE,KAAKsE,WAAatE,KAAKuE,YAAYZ,UACnCvE,EAAaK,SAAS,cAAesC,GACrC3C,EAAaI,UAAU,cAAeQ,KAAKwE,gBACtCxE,KAAKsE,YAAYtE,KAAKyE,aAAa,CAAEC,KAAM,SAChD1E,KAAK2E,iBAAmB,GACnBR,EAAOS,WAAUT,EAAOS,SAAW5E,MACjCmE,EAAOS,QACd,CAEUC,gCACV,MAAO,CAAC,WACR,CACGxE,eACI,OAAAL,KAAKkD,aAAa,aAAe,IACxC,CAEG4B,gBACI,OAAA9E,KAAKuE,WAAWhB,iBAAiB,wBACxC,CAEGwB,qBACI,OAAA/E,KAAKuE,WAAWhB,iBAAiB,0BACxC,CAEGyB,sBACI,OAAAhF,KAAKuE,WAAWU,cAAc,oCACrC,CAEGC,gBACH,OAAOpF,MAAMC,KAAKC,KAAKuE,WAAWhB,iBAAiB,kCACnD,CAEG4B,gBACI,OAAAnF,KAAKuE,WAAWU,cAAc,gBACrC,CAEGG,mBACH,OAAOpF,KAAKuE,WAAWhB,iBAAiB,yBAAyB8B,OAAS,CAC1E,CAIDC,0BACMtF,KAAKsE,aACTtE,KAAKuE,WAAWZ,gBAmJnB2B,eAA6B7C,GAC5B,aAAc8C,OAAO,+BAAmBC,QAAQ/C,EACjD,CArJqCgD,CAAczF,KAAKK,UACrDL,KAAKsE,YAAa,EAClBtE,KAAK0F,kBAEN1F,KAAKuE,WAAWoB,mBAAqB,CAAC7B,GACtC8B,OAAOjF,iBAAiB,cAAeX,KAAKgD,OAAQ,CAAE6C,MAAM,GAC5D,CAEDC,uBACM9F,KAAA+F,gBACL/F,KAAKgG,cACL,CAED7C,yBAAyBnB,EAAMiE,EAAUC,GACxClG,KAAKmG,uBAAuBnE,GAAMiE,EAAUC,EAC5C,CAIDlD,OAASsC,gBACFtF,KAAKoG,kBACXpG,KAAKO,oBACLP,KAAKqG,qBAAmB,EAGzBf,6BA5E8BA,WAC9BtB,SAAkBuB,OAAO,8BAA8BC,OAAA,EA4EhDc,GAAyBC,MAAK,KAC9BvG,KAAAwG,UAAY1G,MAAMC,KAAKC,KAAKuE,WAAWhB,iBAAiB,cAAcb,KAC1E+D,GAAY,IAAIzC,EAASyC,EAAU,CAAEC,QAAQ,KACjD,GAEE,CAEDnG,oBACMP,KAAAgF,iBAAiBrE,iBAAiB,QAASX,KAAK2G,WAErDC,SAASjG,iBAAiB,SAAcE,IAClCb,KAAK6G,SAAShG,EAAEE,SAASf,KAAK8G,mBAAmBjG,EAAC,IAGxDb,KAAKuE,WAAW5D,iBAAiB,QAASX,KAAK8G,oBAE/C9G,KAAKuE,WAAW5D,iBAAiB,SAAcE,IAC1CA,EAAEE,OAAOG,UAAU2F,SAAS,kBAC/B7G,KAAKuE,WAAWU,cAAc,eAAe/D,UAAUC,OAAO,OAAM,GAEtE,CAEDkF,sBACCvC,EAAMiD,WAAW,+BAA+B,IAAM/G,KAAKoF,iBAC3D,CAEDuB,UAAY,IACX3G,KAAKwG,UAAU/F,SAAQ+C,IACtBA,EAAQkD,QAAM,IAGhBI,mBAA0BjG,IACzB,MAAMsB,EAAMtB,EAAEE,OAAOmC,aAAa,OAC7BlD,KAAA8E,UAAUrE,SAAQuG,IACtB,GAAIA,EAAK7E,MAAQA,EAAY6E,OAAAA,EAAKC,gBAAgB,QAClDD,EAAKC,gBAAgB,QAAQ,EAAK,IAGnCjH,KAAK+E,eAAetE,SAAQyG,IACvBA,GAAAA,EAAMhE,aAAa,SAAWf,EAAY,OAAAnC,KAAKmH,wBAAwBD,GACtElH,KAAAmH,wBAAwBD,GAAO,EAAK,GACzC,EAGFC,wBAA0B,CAACD,EAAOE,OAAQ,KACzC,QAAc,IAAVA,EACH,OAAOF,EAAM3D,iBAAiB,uCAAuC9C,SAAQC,IAC5EA,EAAIQ,UAAUwF,OAAO,OAAM,IAG7BQ,EACE3D,iBAAiB,uCACjB9C,SAAQC,GAAOA,EAAIQ,UAAUwF,OAAO,OAAQU,IAAM,EAGrDjB,uBAAyB,CACxB9F,SAAU,CAAC+C,EAAMC,IAASD,IAASC,GAAQrD,KAAKqH,oBAGjDA,mBACCrH,KAAKuE,WAAWhB,iBAAiB,cAAc9C,SAAQC,IACtDA,EAAI4G,aAAa,WAAYtH,KAAKK,SAAQ,IAE3CL,KAAKuE,WAAWhB,iBAAiB,qBAAqB9C,SAAQC,IAC7DA,EAAI+C,YAAclB,EAAUvC,KAAKK,UAAUK,EAAIgD,QAAQ6D,UAAS,GAEjE,CAED/C,eAAiB,EAAGpE,QAAAA,MACnB,MAAM4G,EAAOhH,KAAKwH,mBAAmBpH,EAAQ4B,MACzCgF,GAAAA,EAAMA,EAAKS,UAAU,CAAErH,QAAAA,QACtB,CACEsH,MAAAA,EAAS1H,KAAK2H,QAAQvH,GAC5BJ,KAAK4H,QAAQF,EAAM,GAIrBC,QAAUvH,IACHyH,MAAAA,EAAWjB,SAASkB,cAAc,YACxC,OAAAD,EAASlE,UAAqB,oBAE3BvD,EAAQ2H,OAAS,SAAW,4CAEvB3H,EAAQ4B,0BACHhC,KAAKK,kCACD2H,KAAKC,UAAU7H,kBAEzByH,EAASK,QAAQC,kBAAkBC,WAAU,EAAI,EAGzDR,QAAQS,GACH,IAACrI,KAAKsI,4BAA4BD,GAAiB,OACjDlG,MAAAA,EAAMkG,EAAenF,aAAa,OAClCqF,EAAgB,UAARpG,EAAkB,WAAa,eAC5CnC,KAAKwH,mBAAmBrF,IAAQnC,KAAKmF,WAAWqD,sBAChDD,EACAF,EAED,CAED3C,iBACC,KAAO1F,KAAK2E,iBAAiBU,QAAQrF,KAAK4H,QAAQ5H,KAAK2E,iBAAiB8D,MACxE,CAEDH,4BAA4BD,GAC3B,OAAKrI,KAAKsE,YAAYtE,KAAK2E,iBAAiB+D,KAAKL,GAC1CrI,KAAKsE,YAAc+D,aAA0B1I,eAAiBK,KAAKoF,aAAe,EACzF,CAEDoC,mBAAqBrF,GACpBnC,KAAKuE,WAAWU,cAAc,8BAA8B9C,OAE7DwG,WAAa,CAACxG,EAAK4F,KACZa,MAAAA,EAAO5I,KAAKwH,mBAAmBrF,GAChCyG,IACLA,EAAKb,OAASA,EAAAA,GAIf1G,eAAewH,IAAI,YAAcxH,eAAeC,OAAO,UAAW6C"}