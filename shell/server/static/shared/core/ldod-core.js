var e,t;e=globalThis,t=function(e){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)};function r(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}
/*! https://mths.be/punycode v1.4.1 by @mathias */
var n=2147483647,a=/[^\x20-\x7E]/,i=/[\x2E\u3002\uFF0E\uFF61]/g,s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},o=Math.floor,h=String.fromCharCode;function u(e){throw new RangeError(s[e])}function c(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function l(e,t,r){var n=0;for(e=r?o(e/700):e>>1,e+=o(e/t);e>455;n+=36)e=o(e/35);return o(n+36*e/(e+38))}function f(e){return function(e,t){var r=e.split("@"),s="";r.length>1&&(s=r[0]+"@",e=r[1]);var f=function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((e=e.replace(i,".")).split("."),(function(e){return a.test(e)?"xn--"+function(e){var t,r,a,i,s,f,p,d,m,g,y,v,b,A,F,w=[];for(v=(e=function(e){for(var t,r,n=[],a=0,i=e.length;a<i;)(t=e.charCodeAt(a++))>=55296&&t<=56319&&a<i?56320==(64512&(r=e.charCodeAt(a++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),a--):n.push(t);return n}(e)).length,t=128,r=0,s=72,f=0;f<v;++f)(y=e[f])<128&&w.push(h(y));for(a=i=w.length,i&&w.push("-");a<v;){for(p=n,f=0;f<v;++f)(y=e[f])>=t&&y<p&&(p=y);for(p-t>o((n-r)/(b=a+1))&&u("overflow"),r+=(p-t)*b,t=p,f=0;f<v;++f)if((y=e[f])<t&&++r>n&&u("overflow"),y==t){for(d=r,m=36;!(d<(g=m<=s?1:m>=s+26?26:m-s));m+=36)F=d-g,A=36-g,w.push(h(c(g+F%A,0))),d=o(F/A);w.push(h(c(d,0))),s=l(r,b,a==i),r=0,++a}++r,++t}return w.join("")}(e):e})).join(".");return s+f}(e)}function p(e){return null===e}function d(e){return"string"==typeof e}function m(e){return"object"==typeof e&&null!==e}function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function v(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function b(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var A=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function F(e,t,r,n){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var i=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var o=e.length;s>0&&o>s&&(o=s);for(var h=0;h<o;++h){var u,c,l,f,p=e[h].replace(i,"%20"),d=p.indexOf(r);d>=0?(u=p.substr(0,d),c=p.substr(d+1)):(u=p,c=""),l=decodeURIComponent(u),f=decodeURIComponent(c),g(a,l)?y(a[l])?a[l].push(f):a[l]=[a[l],f]:a[l]=f}return a}var w={parse:T,resolve:N,resolveObject:L,format:q,Url:E};function E(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var x=/^([a-z0-9.+-]+:)/i,O=/:[0-9]*$/,S=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,j=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),z=["'"].concat(j),$=["%","/","?",";","#"].concat(z),_=["/","?","#"],Z=/^[+a-z0-9A-Z_-]{0,63}$/,P=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},R={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function T(e,t,r){if(e&&m(e)&&e instanceof E)return e;var n=new E;return n.parse(e,t,r),n}function M(e,t,r,n){if(!d(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var a=t.indexOf("?"),i=-1!==a&&a<t.indexOf("#")?"?":"#",s=t.split(i);s[0]=s[0].replace(/\\/g,"/");var o=t=s.join(i);if(o=o.trim(),!n&&1===t.split("#").length){var h=S.exec(o);if(h)return e.path=o,e.href=o,e.pathname=h[1],h[2]?(e.search=h[2],e.query=r?F(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var u,c,l,p,m=x.exec(o);if(m){var g=(m=m[0]).toLowerCase();e.protocol=g,o=o.substr(m.length)}if(n||m||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var y="//"===o.substr(0,2);!y||m&&R[m]||(o=o.substr(2),e.slashes=!0)}if(!R[m]&&(y||m&&!C[m])){var v,b,A=-1;for(u=0;u<_.length;u++)-1!==(c=o.indexOf(_[u]))&&(-1===A||c<A)&&(A=c);for(-1!==(b=-1===A?o.lastIndexOf("@"):o.lastIndexOf("@",A))&&(v=o.slice(0,b),o=o.slice(b+1),e.auth=decodeURIComponent(v)),A=-1,u=0;u<$.length;u++)-1!==(c=o.indexOf($[u]))&&(-1===A||c<A)&&(A=c);-1===A&&(A=o.length),e.host=o.slice(0,A),o=o.slice(A),V(e),e.hostname=e.hostname||"";var w="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!w){var E=e.hostname.split(/\./);for(u=0,l=E.length;u<l;u++){var O=E[u];if(O&&!O.match(Z)){for(var j="",T=0,M=O.length;T<M;T++)O.charCodeAt(T)>127?j+="x":j+=O[T];if(!j.match(Z)){var q=E.slice(0,u),N=E.slice(u+1),L=O.match(P);L&&(q.push(L[1]),N.unshift(L[2])),N.length&&(o="/"+N.join(".")+o),e.hostname=q.join(".");break}}}}e.hostname.length>255?e.hostname="":e.hostname=e.hostname.toLowerCase(),w||(e.hostname=f(e.hostname)),p=e.port?":"+e.port:"";var U=e.hostname||"";e.host=U+p,e.href+=e.host,w&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!k[g])for(u=0,l=z.length;u<l;u++){var D=z[u];if(-1!==o.indexOf(D)){var H=encodeURIComponent(D);H===D&&(H=escape(D)),o=o.split(D).join(H)}}var J=o.indexOf("#");-1!==J&&(e.hash=o.substr(J),o=o.slice(0,J));var B=o.indexOf("?");if(-1!==B?(e.search=o.substr(B),e.query=o.substr(B+1),r&&(e.query=F(e.query)),o=o.slice(0,B)):r&&(e.search="",e.query={}),o&&(e.pathname=o),C[g]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){p=e.pathname||"";var W=e.search||"";e.path=p+W}return e.href=I(e),e}function q(e){return d(e)&&(e=M({},e)),I(e)}function I(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r,n,a,i=e.protocol||"",s=e.pathname||"",o=e.hash||"",h=!1,u="";e.host?h=t+e.host:e.hostname&&(h=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(h+=":"+e.port)),e.query&&m(e.query)&&Object.keys(e.query).length&&(r=e.query,n=n||"&",a=a||"=",null===r&&(r=void 0),u="object"==typeof r?b(A(r),(function(e){var t=encodeURIComponent(v(e))+a;return y(r[e])?b(r[e],(function(e){return t+encodeURIComponent(v(e))})).join(n):t+encodeURIComponent(v(r[e]))})).join(n):"");var c=e.search||u&&"?"+u||"";return i&&":"!==i.substr(-1)&&(i+=":"),e.slashes||(!i||C[i])&&!1!==h?(h="//"+(h||""),s&&"/"!==s.charAt(0)&&(s="/"+s)):h||(h=""),o&&"#"!==o.charAt(0)&&(o="#"+o),c&&"?"!==c.charAt(0)&&(c="?"+c),i+h+(s=s.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(c=c.replace("#","%23"))+o}function N(e,t){return T(e,!1,!0).resolve(t)}function L(e,t){return e?T(e,!1,!0).resolveObject(t):t}function V(e){var t=e.host,r=O.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}E.prototype.parse=function(e,t,r){return M(this,e,t,r)},E.prototype.format=function(){return I(this)},E.prototype.resolve=function(e){return this.resolveObject(T(e,!1,!0)).format()},E.prototype.resolveObject=function(e){if(d(e)){var t=new E;t.parse(e,!1,!0),e=t}for(var r,n=new E,a=Object.keys(this),i=0;i<a.length;i++){var s=a[i];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),h=0;h<o.length;h++){var u=o[h];"protocol"!==u&&(n[u]=e[u])}return C[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!C[e.protocol]){for(var c=Object.keys(e),l=0;l<c.length;l++){var f=c[l];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||R[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var m=n.pathname||"",g=n.search||"";n.path=m+g}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y,v=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),A=b||v||n.host&&e.pathname,F=A,w=n.pathname&&n.pathname.split("/")||[],x=n.protocol&&!C[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],x&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),A=A&&(""===r[0]||""===w[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=r;else if(r.length)w||(w=[]),w.pop(),w=w.concat(r),n.search=e.search,n.query=e.query;else if(null!=e.search)return x&&(n.hostname=n.host=w.shift(),(y=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=y.shift(),n.host=n.hostname=y.shift())),n.search=e.search,n.query=e.query,p(n.pathname)&&p(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var O=w.slice(-1)[0],S=(n.host||e.host||w.length>1)&&("."===O||".."===O)||""===O,j=0,z=w.length;z>=0;z--)"."===(O=w[z])?w.splice(z,1):".."===O?(w.splice(z,1),j++):j&&(w.splice(z,1),j--);if(!A&&!F)for(;j--;j)w.unshift("..");!A||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var $=""===w[0]||w[0]&&"/"===w[0].charAt(0);return x&&(n.hostname=n.host=$?"":w.length?w.shift():"",(y=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=y.shift(),n.host=n.hostname=y.shift())),(A=A||n.host&&w.length)&&!$&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),p(n.pathname)&&p(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},E.prototype.parseHost=function(){return V(this)};var U=function(e){var t=e.default;if("function"==typeof t){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}(Object.freeze({__proto__:null,parse:T,resolve:N,resolveObject:L,format:q,default:w,Url:E})),D={},H=U,J=D.ValidationError=function(e,t,r,n,a,i){if(Array.isArray(n)?(this.path=n,this.property=n.reduce((function(e,t){return e+Q(t)}),"instance")):void 0!==n&&(this.property=n),e&&(this.message=e),r){var s=r.$id||r.id;this.schema=s||r}void 0!==t&&(this.instance=t),this.name=a,this.argument=i,this.stack=this.toString()};J.prototype.toString=function(){return this.property+" "+this.message};var B=D.ValidatorResult=function(e,t,r,n){this.instance=e,this.schema=t,this.options=r,this.path=n.path,this.propertyPath=n.propertyPath,this.errors=[],this.throwError=r&&r.throwError,this.throwFirst=r&&r.throwFirst,this.throwAll=r&&r.throwAll,this.disableFormat=r&&!0===r.disableFormat};function W(e,t){return t+": "+e.toString()+"\n"}function G(e){Error.captureStackTrace&&Error.captureStackTrace(this,G),this.instance=e.instance,this.schema=e.schema,this.options=e.options,this.errors=e.errors}B.prototype.addError=function(e){var t;if("string"==typeof e)t=new J(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new J(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new G(this);if(this.throwError)throw t;return t},B.prototype.importErrors=function(e){"string"==typeof e||e&&e.validatorType?this.addError(e):e&&e.errors&&(this.errors=this.errors.concat(e.errors))},B.prototype.toString=function(e){return this.errors.map(W).join("")},Object.defineProperty(B.prototype,"valid",{get:function(){return!this.errors.length}}),D.ValidatorResultError=G,G.prototype=new Error,G.prototype.constructor=G,G.prototype.name="Validation Error";var K=D.SchemaError=function e(t,r){this.message=t,this.schema=r,Error.call(this,t),Error.captureStackTrace(this,e)};K.prototype=Object.create(Error.prototype,{constructor:{value:K,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var X=D.SchemaContext=function(e,t,r,n,a){this.schema=e,this.options=t,Array.isArray(r)?(this.path=r,this.propertyPath=r.reduce((function(e,t){return e+Q(t)}),"instance")):this.propertyPath=r,this.base=n,this.schemas=a};X.prototype.resolve=function(e){return H.resolve(this.base,e)},X.prototype.makeChild=function(e,t){var r=void 0===t?this.path:this.path.concat([t]),n=e.$id||e.id,a=H.resolve(this.base,n||""),i=new X(e,this.options,r,a,Object.create(this.schemas));return n&&!i.schemas[a]&&(i.schemas[a]=e),i};var Y=D.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,duration:/P(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S)|\d+(D|M(\d+D)?|Y(\d+M(\d+D)?)?)(T\d+(H(\d+M(\d+S)?)?|M(\d+S)?|S))?|\d+W)/i,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"idn-email":/^("(?:[!#-\[\]-\u{10FFFF}]|\\[\t -\u{10FFFF}])*"|[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*)@([!#-'*+\-/-9=?A-Z\^-\u{10FFFF}](?:\.?[!#-'*+\-/-9=?A-Z\^-\u{10FFFF}])*|\[[!-Z\^-\u{10FFFF}]*\])$/u,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,iri:/^[a-zA-Z][a-zA-Z0-9+.-]*:[^\s]*$/,"iri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~-\u{10FFFF}]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~-\u{10FFFF}])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~-\u{10FFFF}]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~-\u{10FFFF}])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~-\u{10FFFF}])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~-\u{10FFFF}])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~-\u{10FFFF}]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/u,uuid:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,"uri-template":/(%[0-9a-f]{2}|[!#$&(-;=?@\[\]_a-z~]|\{[!#&+,./;=?@|]?(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?(,(%[0-9a-f]{2}|[0-9_a-z])(\.?(%[0-9a-f]{2}|[0-9_a-z]))*(:[1-9]\d{0,3}|\*)?)*\})*/iu,"json-pointer":/^(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*$/iu,"relative-json-pointer":/^\d+(#|(\/([\x00-\x2e0-@\[-}\x7f]|~[01])*)*)$/iu,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"utc-millisec":function(e){return"string"==typeof e&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)},regex:function(e){var t=!0;try{new RegExp(e)}catch{t=!1}return t},style:/[\r\n\t ]*[^\r\n\t ][^:]*:[\r\n\t ]*[^\r\n\t ;]*[\r\n\t ]*;?/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/};Y.regexp=Y.regex,Y.pattern=Y.regex,Y.ipv4=Y["ip-address"],D.isFormat=function(e,t,r){if("string"==typeof e&&void 0!==Y[t]){if(Y[t]instanceof RegExp)return Y[t].test(e);if("function"==typeof Y[t])return Y[t](e)}else if(r&&r.customFormats&&"function"==typeof r.customFormats[t])return r.customFormats[t](e);return!0};var Q=D.makeSuffix=function(e){return(e=e.toString()).match(/[.\s\[\]]/)||e.match(/^[\d]/)?e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]":"."+e},ee=D.deepCompareStrict=function e(t,r){if(typeof t!=typeof r)return!1;if(Array.isArray(t))return!!Array.isArray(r)&&t.length===r.length&&t.every((function(n,a){return e(t[a],r[a])}));if("object"==typeof t){if(!t||!r)return t===r;var n=Object.keys(t),a=Object.keys(r);return n.length===a.length&&n.every((function(n){return e(t[n],r[n])}))}return t===r};function te(e,t,r,n){"object"==typeof r?t[n]=ae(e[n],r):-1===e.indexOf(r)&&t.push(r)}function re(e,t,r){t[r]=e[r]}function ne(e,t,r,n){"object"==typeof t[n]&&t[n]&&e[n]?r[n]=ae(e[n],t[n]):r[n]=t[n]}function ae(e,t){var r=Array.isArray(t),n=r&&[]||{};return r?(e=e||[],n=n.concat(e),t.forEach(te.bind(null,e,n))):(e&&"object"==typeof e&&Object.keys(e).forEach(re.bind(null,e,n)),Object.keys(t).forEach(ne.bind(null,e,t,n))),n}function ie(e){return"/"+encodeURIComponent(e).replace(/~/g,"%7E")}D.deepMerge=ae,D.objectGetPath=function(e,t){for(var r,n=t.split("/").slice(1);"string"==typeof(r=n.shift());){var a=decodeURIComponent(r.replace(/~0/,"~").replace(/~1/g,"/"));if(!(a in e))return;e=e[a]}return e},D.encodePath=function(e){return e.map(ie).join("")},D.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;"number"!=typeof e&&(e=Number(e));var r=e.toString().split("e");if(2===r.length){if("-"!==r[1][0])return t;t=Number(r[1].slice(1))}var n=r[0].split(".");return 2===n.length&&(t+=n[1].length),t},D.isSchema=function(e){return"object"==typeof e&&e||"boolean"==typeof e};var se=D,oe=se.ValidatorResult,he=se.SchemaError,ue={ignoreProperties:{id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0}},ce=ue.validators={};function le(e,t,r,n,a){var i=t.throwError,s=t.throwAll;t.throwError=!1,t.throwAll=!1;var o=this.validateSchema(e,a,t,r);return t.throwError=i,t.throwAll=s,!o.valid&&n instanceof Function&&n(o),o.valid}function fe(e,t){if(Object.hasOwnProperty.call(e,t))return e[t];if(t in e)for(;e=Object.getPrototypeOf(e);)if(Object.propertyIsEnumerable.call(e,t))return e[t]}function pe(e,t,r,n,a,i){if(this.types.object(e)&&(!t.properties||void 0===t.properties[a]))if(!1===t.additionalProperties)i.addError({name:"additionalProperties",argument:a,message:"is not allowed to have the additional property "+JSON.stringify(a)});else{var s=t.additionalProperties||{};"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,a,s,r,n);var o=this.validateSchema(e[a],s,r,n.makeChild(s,a));o.instance!==i.instance[a]&&(i.instance[a]=o.instance),i.importErrors(o)}}ce.type=function(e,t,r,n){if(void 0===e)return null;var a=new oe(e,t,r,n),i=Array.isArray(t.type)?t.type:[t.type];if(!i.some(this.testType.bind(this,e,t,r,n))){var s=i.map((function(e){if(e){var t=e.$id||e.id;return t?"<"+t+">":e+""}}));a.addError({name:"type",argument:s,message:"is not of a type(s) "+s})}return a},ce.anyOf=function(e,t,r,n){if(void 0===e)return null;var a=new oe(e,t,r,n),i=new oe(e,t,r,n);if(!Array.isArray(t.anyOf))throw new he("anyOf must be an array");if(!t.anyOf.some(le.bind(this,e,r,n,(function(e){i.importErrors(e)})))){var s=t.anyOf.map((function(e,t){var r=e.$id||e.id;return r?"<"+r+">":e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));r.nestedErrors&&a.importErrors(i),a.addError({name:"anyOf",argument:s,message:"is not any of "+s.join(",")})}return a},ce.allOf=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.allOf))throw new he("allOf must be an array");var a=new oe(e,t,r,n),i=this;return t.allOf.forEach((function(t,s){var o=i.validateSchema(e,t,r,n);if(!o.valid){var h=t.$id||t.id||t.title&&JSON.stringify(t.title)||t.$ref&&"<"+t.$ref+">"||"[subschema "+s+"]";a.addError({name:"allOf",argument:{id:h,length:o.errors.length,valid:o},message:"does not match allOf schema "+h+" with "+o.errors.length+" error[s]:"}),a.importErrors(o)}})),a},ce.oneOf=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.oneOf))throw new he("oneOf must be an array");var a=new oe(e,t,r,n),i=new oe(e,t,r,n),s=t.oneOf.filter(le.bind(this,e,r,n,(function(e){i.importErrors(e)}))).length,o=t.oneOf.map((function(e,t){return e.$id||e.id||e.title&&JSON.stringify(e.title)||e.$ref&&"<"+e.$ref+">"||"[subschema "+t+"]"}));return 1!==s&&(r.nestedErrors&&a.importErrors(i),a.addError({name:"oneOf",argument:o,message:"is not exactly one from "+o.join(",")})),a},ce.if=function(e,t,r,n){if(void 0===e)return null;if(!se.isSchema(t.if))throw new Error('Expected "if" keyword to be a schema');var a,i=le.call(this,e,r,n,null,t.if),s=new oe(e,t,r,n);if(i){if(void 0===t.then)return;if(!se.isSchema(t.then))throw new Error('Expected "then" keyword to be a schema');a=this.validateSchema(e,t.then,r,n.makeChild(t.then)),s.importErrors(a)}else{if(void 0===t.else)return;if(!se.isSchema(t.else))throw new Error('Expected "else" keyword to be a schema');a=this.validateSchema(e,t.else,r,n.makeChild(t.else)),s.importErrors(a)}return s},ce.propertyNames=function(e,t,r,n){if(this.types.object(e)){var a=new oe(e,t,r,n),i=void 0!==t.propertyNames?t.propertyNames:{};if(!se.isSchema(i))throw new he('Expected "propertyNames" to be a schema (object or boolean)');for(var s in e)if(void 0!==fe(e,s)){var o=this.validateSchema(s,i,r,n.makeChild(i));a.importErrors(o)}return a}},ce.properties=function(e,t,r,n){if(this.types.object(e)){var a=new oe(e,t,r,n),i=t.properties||{};for(var s in i){var o=i[s];if(void 0!==o){if(null===o)throw new he('Unexpected null, expected schema in "properties"');"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,s,o,r,n);var h=fe(e,s),u=this.validateSchema(h,o,r,n.makeChild(o,s));u.instance!==a.instance[s]&&(a.instance[s]=u.instance),a.importErrors(u)}}return a}},ce.patternProperties=function(e,t,r,n){if(this.types.object(e)){var a=new oe(e,t,r,n),i=t.patternProperties||{};for(var s in e){var o=!0;for(var h in i){var u=i[h];if(void 0!==u){if(null===u)throw new he('Unexpected null, expected schema in "patternProperties"');try{var c=new RegExp(h,"u")}catch{c=new RegExp(h)}if(c.test(s)){o=!1,"function"==typeof r.preValidateProperty&&r.preValidateProperty(e,s,u,r,n);var l=this.validateSchema(e[s],u,r,n.makeChild(u,s));l.instance!==a.instance[s]&&(a.instance[s]=l.instance),a.importErrors(l)}}}o&&pe.call(this,e,t,r,n,s,a)}return a}},ce.additionalProperties=function(e,t,r,n){if(this.types.object(e)){if(t.patternProperties)return null;var a=new oe(e,t,r,n);for(var i in e)pe.call(this,e,t,r,n,i,a);return a}},ce.minProperties=function(e,t,r,n){if(this.types.object(e)){var a=new oe(e,t,r,n);return Object.keys(e).length>=t.minProperties||a.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),a}},ce.maxProperties=function(e,t,r,n){if(this.types.object(e)){var a=new oe(e,t,r,n);return Object.keys(e).length<=t.maxProperties||a.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),a}},ce.items=function(e,t,r,n){var a=this;if(this.types.array(e)&&void 0!==t.items){var i=new oe(e,t,r,n);return e.every((function(e,s){if(Array.isArray(t.items))var o=void 0===t.items[s]?t.additionalItems:t.items[s];else o=t.items;if(void 0===o)return!0;if(!1===o)return i.addError({name:"items",message:"additionalItems not permitted"}),!1;var h=a.validateSchema(e,o,r,n.makeChild(o,s));return h.instance!==i.instance[s]&&(i.instance[s]=h.instance),i.importErrors(h),!0})),i}},ce.contains=function(e,t,r,n){var a=this;if(this.types.array(e)&&void 0!==t.contains){if(!se.isSchema(t.contains))throw new Error('Expected "contains" keyword to be a schema');var i=new oe(e,t,r,n);return!1===e.some((function(e,i){return 0===a.validateSchema(e,t.contains,r,n.makeChild(t.contains,i)).errors.length}))&&i.addError({name:"contains",argument:t.contains,message:"must contain an item matching given schema"}),i}},ce.minimum=function(e,t,r,n){if(this.types.number(e)){var a=new oe(e,t,r,n);return t.exclusiveMinimum&&!0===t.exclusiveMinimum?e>t.minimum||a.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||a.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),a}},ce.maximum=function(e,t,r,n){if(this.types.number(e)){var a=new oe(e,t,r,n);return t.exclusiveMaximum&&!0===t.exclusiveMaximum?e<t.maximum||a.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||a.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),a}},ce.exclusiveMinimum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMinimum&&this.types.number(e)){var a=new oe(e,t,r,n);return e>t.exclusiveMinimum||a.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),a}},ce.exclusiveMaximum=function(e,t,r,n){if("boolean"!=typeof t.exclusiveMaximum&&this.types.number(e)){var a=new oe(e,t,r,n);return e<t.exclusiveMaximum||a.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),a}};var de=function(e,t,r,n,a,i){if(this.types.number(e)){var s=t[a];if(0==s)throw new he(a+" cannot be zero");var o=new oe(e,t,r,n),h=se.getDecimalPlaces(e),u=se.getDecimalPlaces(s),c=Math.max(h,u),l=Math.pow(10,c);return Math.round(e*l)%Math.round(s*l)!=0&&o.addError({name:a,argument:s,message:i+JSON.stringify(s)}),o}};function me(e,t,r){var n,a=r.length;for(n=t+1;n<a;n++)if(se.deepCompareStrict(e,r[n]))return!1;return!0}ce.multipleOf=function(e,t,r,n){return de.call(this,e,t,r,n,"multipleOf","is not a multiple of (divisible by) ")},ce.divisibleBy=function(e,t,r,n){return de.call(this,e,t,r,n,"divisibleBy","is not divisible by (multiple of) ")},ce.required=function(e,t,r,n){var a=new oe(e,t,r,n);return void 0===e&&!0===t.required?a.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach((function(t){void 0===fe(e,t)&&a.addError({name:"required",argument:t,message:"requires property "+JSON.stringify(t)})})),a},ce.pattern=function(e,t,r,n){if(this.types.string(e)){var a=new oe(e,t,r,n),i=t.pattern;try{var s=new RegExp(i,"u")}catch{s=new RegExp(i)}return e.match(s)||a.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),a}},ce.format=function(e,t,r,n){if(void 0!==e){var a=new oe(e,t,r,n);return a.disableFormat||se.isFormat(e,t.format,this)||a.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),a}},ce.minLength=function(e,t,r,n){if(this.types.string(e)){var a=new oe(e,t,r,n),i=e.match(/[\uDC00-\uDFFF]/g);return e.length-(i?i.length:0)>=t.minLength||a.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),a}},ce.maxLength=function(e,t,r,n){if(this.types.string(e)){var a=new oe(e,t,r,n),i=e.match(/[\uDC00-\uDFFF]/g);return e.length-(i?i.length:0)<=t.maxLength||a.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),a}},ce.minItems=function(e,t,r,n){if(this.types.array(e)){var a=new oe(e,t,r,n);return e.length>=t.minItems||a.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),a}},ce.maxItems=function(e,t,r,n){if(this.types.array(e)){var a=new oe(e,t,r,n);return e.length<=t.maxItems||a.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),a}},ce.uniqueItems=function(e,t,r,n){if(!0===t.uniqueItems&&this.types.array(e)){var a=new oe(e,t,r,n);return e.every(me)||a.addError({name:"uniqueItems",message:"contains duplicate item"}),a}},ce.dependencies=function(e,t,r,n){if(this.types.object(e)){var a=new oe(e,t,r,n);for(var i in t.dependencies)if(void 0!==e[i]){var s=t.dependencies[i],o=n.makeChild(s,i);if("string"==typeof s&&(s=[s]),Array.isArray(s))s.forEach((function(t){void 0===e[t]&&a.addError({name:"dependencies",argument:o.propertyPath,message:"property "+t+" not found, required by "+o.propertyPath})}));else{var h=this.validateSchema(e,s,r,o);a.instance!==h.instance&&(a.instance=h.instance),h&&h.errors.length&&(a.addError({name:"dependencies",argument:o.propertyPath,message:"does not meet dependency required by "+o.propertyPath}),a.importErrors(h))}}return a}},ce.enum=function(e,t,r,n){if(void 0===e)return null;if(!Array.isArray(t.enum))throw new he("enum expects an array",t);var a=new oe(e,t,r,n);return t.enum.some(se.deepCompareStrict.bind(null,e))||a.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),a},ce.const=function(e,t,r,n){if(void 0===e)return null;var a=new oe(e,t,r,n);return se.deepCompareStrict(t.const,e)||a.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),a},ce.not=ce.disallow=function(e,t,r,n){var a=this;if(void 0===e)return null;var i=new oe(e,t,r,n),s=t.not||t.disallow;return s?(Array.isArray(s)||(s=[s]),s.forEach((function(s){if(a.testType(e,t,r,n,s)){var o=s&&(s.$id||s.id)||s;i.addError({name:"not",argument:o,message:"is of prohibited type "+o})}})),i):null};var ge=ue,ye={},ve=U,be=D;function Ae(e,t){this.id=e,this.ref=t}ye.SchemaScanResult=Ae,ye.scan=function(e,t){function r(e,t){if(t&&"object"==typeof t)if(t.$ref){var o=ve.resolve(e,t.$ref);s[o]=s[o]?s[o]+1:0}else{var h=t.$id||t.id,u=h?ve.resolve(e,h):e;if(u){if(u.indexOf("#")<0&&(u+="#"),i[u]){if(!be.deepCompareStrict(i[u],t))throw new Error("Schema <"+u+"> already exists with different definition");return i[u]}i[u]=t,"#"==u[u.length-1]&&(i[u.substring(0,u.length-1)]=t)}n(u+"/items",Array.isArray(t.items)?t.items:[t.items]),n(u+"/extends",Array.isArray(t.extends)?t.extends:[t.extends]),r(u+"/additionalItems",t.additionalItems),a(u+"/properties",t.properties),r(u+"/additionalProperties",t.additionalProperties),a(u+"/definitions",t.definitions),a(u+"/patternProperties",t.patternProperties),a(u+"/dependencies",t.dependencies),n(u+"/disallow",t.disallow),n(u+"/allOf",t.allOf),n(u+"/anyOf",t.anyOf),n(u+"/oneOf",t.oneOf),r(u+"/not",t.not)}}function n(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)r(e+"/"+n,t[n])}function a(e,t){if(t&&"object"==typeof t)for(var n in t)r(e+"/"+n,t[n])}var i={},s={};return r(e,t),new Ae(i,s)};var Fe=U,we=ge,Ee=D,xe=ye.scan,Oe=Ee.ValidatorResult,Se=Ee.ValidatorResultError,je=Ee.SchemaError,ze=Ee.SchemaContext,$e=function e(){this.customFormats=Object.create(e.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(Ze),this.attributes=Object.create(we.validators)};function _e(e){var t="string"==typeof e?e:e.$ref;return"string"==typeof t&&t}$e.prototype.customFormats={},$e.prototype.schemas=null,$e.prototype.types=null,$e.prototype.attributes=null,$e.prototype.unresolvedRefs=null,$e.prototype.addSchema=function(e,t){var r=this;if(!e)return null;var n=xe(t||"/",e),a=t||e.$id||e.id;for(var i in n.id)this.schemas[i]=n.id[i];for(var i in n.ref)this.unresolvedRefs.push(i);return this.unresolvedRefs=this.unresolvedRefs.filter((function(e){return void 0===r.schemas[e]})),this.schemas[a]},$e.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addSubSchema(e,t[r])},$e.prototype.addSubSchemaObject=function(e,t){if(t&&"object"==typeof t)for(var r in t)this.addSubSchema(e,t[r])},$e.prototype.setSchemas=function(e){this.schemas=e},$e.prototype.getSchema=function(e){return this.schemas[e]},$e.prototype.validate=function(e,t,r,n){if("boolean"!=typeof t&&"object"!=typeof t||null===t)throw new je("Expected `schema` to be an object or boolean");r||(r={});var a,i=t.$id||t.id,s=Fe.resolve(r.base||"/",i||"");if(!n){(n=new ze(t,r,[],s,Object.create(this.schemas))).schemas[s]||(n.schemas[s]=t);var o=xe(s,t);for(var h in o.id){var u=o.id[h];n.schemas[h]=u}}if(r.required&&void 0===e)return(a=new Oe(e,t,r,n)).addError("is required, but is undefined"),a;if(!(a=this.validateSchema(e,t,r,n)))throw new Error("Result undefined");if(r.throwAll&&a.errors.length)throw new Se(a);return a},$e.prototype.validateSchema=function(e,t,r,n){var a=new Oe(e,t,r,n);if("boolean"==typeof t)!0===t?t={}:!1===t&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(Array.isArray(t.extends)){var i={schema:t,ctx:n};t.extends.forEach(this.schemaTraverser.bind(this,i)),t=i.schema,i.schema=null,i.ctx=null,i=null}else t=Ee.deepMerge(t,this.superResolve(t.extends,n));var s=_e(t);if(s){var o=this.resolve(t,s,n),h=new ze(o.subschema,r,n.path,o.switchSchema,n.schemas);return this.validateSchema(e,o.subschema,r,h)}var u=r&&r.skipAttributes||[];for(var c in t)if(!we.ignoreProperties[c]&&u.indexOf(c)<0){var l=null,f=this.attributes[c];if(f)l=f.call(this,e,t,r,n);else if(!1===r.allowUnknownAttributes)throw new je("Unsupported attribute: "+c,t);l&&a.importErrors(l)}if("function"==typeof r.rewrite){var p=r.rewrite.call(this,e,t,r,n);a.instance=p}return a},$e.prototype.schemaTraverser=function(e,t){e.schema=Ee.deepMerge(e.schema,this.superResolve(t,e.ctx))},$e.prototype.superResolve=function(e,t){var r=_e(e);return r?this.resolve(e,r,t).subschema:e},$e.prototype.resolve=function(e,t,r){if(t=r.resolve(t),r.schemas[t])return{subschema:r.schemas[t],switchSchema:t};var n=Fe.parse(t),a=n&&n.hash,i=a&&a.length&&t.substr(0,t.length-a.length);if(!i||!r.schemas[i])throw new je("no such schema <"+t+">",e);var s=Ee.objectGetPath(r.schemas[i],a.substr(1));if(void 0===s)throw new je("no such schema "+a+" located in <"+i+">",e);return{subschema:s,switchSchema:t}},$e.prototype.testType=function(e,t,r,n,a){if(void 0!==a){if(null===a)throw new je('Unexpected null in "type" keyword');if("function"==typeof this.types[a])return this.types[a].call(this,e);if(a&&"object"==typeof a){var i=this.validateSchema(e,a,r,n);return void 0===i||!(i&&i.errors.length)}return!0}};var Ze=$e.prototype.types={};Ze.string=function(e){return"string"==typeof e},Ze.number=function(e){return"number"==typeof e&&isFinite(e)},Ze.integer=function(e){return"number"==typeof e&&e%1==0},Ze.boolean=function(e){return"boolean"==typeof e},Ze.array=function(e){return Array.isArray(e)},Ze.null=function(e){return null===e},Ze.date=function(e){return e instanceof Date},Ze.any=function(e){return!0},Ze.object=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Date)};var Pe=$e;e.Validator=void 0;var ke=e.Validator=Pe;D.ValidatorResult,D.ValidatorResultError,D.ValidationError,D.SchemaError;var Re=function(e){function t(r,n,a){var i=e.call(this,"payload does not match the specified schema for channel [".concat(r,"]."))||this;return i.channel=r,i.schema=n,i.payload=a,Error.captureStackTrace&&Error.captureStackTrace(i,t),i.name="PayloadMismatchError",i}return r(t,e),t}(Error),Ce=function(e){function t(r,n,a){var i=e.call(this,"schema registration for [".concat(r,"] must match already registered schema."))||this;return i.channel=r,i.schema=n,i.newSchema=a,Error.captureStackTrace&&Error.captureStackTrace(i,t),i.name="SchemaMismatchError",i}return r(t,e),t}(Error),Te=function(){function e(){this._lastId=0,this._subscriptions={}}return e.prototype._getNextId=function(){return this._lastId++},e.prototype.register=function(e,t){var r=!0;this._subscriptions[e]||(r=!1,this._subscriptions[e]={});var n=this._subscriptions[e].__schema;if(n&&!ee(n,t))throw new Ce(e,n,t);return this._subscriptions[e].__schema=t,r},e.prototype.unregister=function(e){var t=this._subscriptions[e],r=!1;return t&&t.__schema&&(r=!0,delete t.__schema),r},e.prototype.subscribe=function(e,t,r){var n=this._getNextId(),a="boolean"==typeof t&&t,i="function"==typeof t?t:r;if("function"!=typeof i)throw new Error("Callback function must be supplied as either the second or third argument.");var s=this._subscriptions[e];return s?a&&i({channel:e,payload:s.__replay}):s=this._subscriptions[e]={},s[n]=i,{unsubscribe:function(){return delete s[n]}}},e.prototype.publish=function(e,t){var r=this._subscriptions[e];r||(r=this._subscriptions[e]={});var n,a,i=r.__schema;if(void 0!==t&&i&&!(n=t,a=i,(new ke).validate(n,a,void 0)).valid)throw new Re(e,i,t);for(var s in r.__replay=t,r)"__replay"!==s&&"__schema"!==s&&"function"==typeof r[s]&&r[s]({channel:e,payload:t});if(r=this._subscriptions["*"])for(var s in r)"__replay"!==s&&"__schema"!==s&&"function"==typeof r[s]&&r[s]({channel:e,payload:t})},e.prototype.getLatest=function(e){if(this._subscriptions[e])return this._subscriptions[e].__replay},e.prototype.getSchema=function(e){if(this._subscriptions[e])return this._subscriptions[e].__schema},e}(),Me=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")};Me().eventBus=new Te,Me().validate=new e.Validator,e.EventBus=Te,e.getGlobal=Me,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof exports&&typeof module<"u"?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=typeof globalThis<"u"?globalThis:e||self).EventBus={});const r={type:"object",required:["username","roles","selectedVE","firstName","lastName"],properties:{username:{type:"string"},firstName:{type:"string"},lastName:{type:"string"},roles:{type:"string"},selectedVE:{type:"array"}}},n={type:"object",required:["selected","name"],properties:{name:{type:"string"},externalId:{type:"string"},selected:{type:"boolean"}}},a={type:"object",properties:{path:{type:"string"},state:{type:"object"}},required:["path"]},i=eventBus,s=new EventBus.Validator;globalThis.validator=s,i.register("ldod:url-changed",a),i.register("ldod:loading",{type:"boolean"}),i.register("ldod:language",{type:"string",required:!0}),i.register("ldod:error",{type:"string",required:!0}),i.register("ldod:message",{type:"string",required:!0}),i.register("ldod:token",{type:"string"}),i.register("ldod:logout"),i.register("ldod:login",r),i.register("ldod:selected-ve",n);const o=globalThis.eventBus;function h(e,t){o?.publish(`ldod:${e}`,t)}function u(e,t,r=!1){return o?.subscribe(`ldod:${e}`,r,t).unsubscribe}const c=/^\/[^/]*/,l=e=>"/"===e,f=e=>{if(e&&e.trim())return e.startsWith("/")?e:`/${e}`},p=e=>{if(e&&e.trim())return l(e)||!e.endsWith("/")?e:e.substring(0,e.length-1)};let d;class m extends HTMLElement{constructor(){super(),this.routes={},this.shadow&&this.attachShadow({mode:"open"})}static get observedAttributes(){return["language","base"]}get shadow(){return this.hasAttribute("shadow")}get self(){return this.shadow?this.shadowRoot:this}get location(){return p(location.pathname)}get route(){return f(p(this.getAttribute("route")))||""}get base(){return f(p(d))||""}get routerPathname(){return p(`/${this.base}${this.route}`)?.replace(/\/\/+/g,"/")}get outlet(){let e=this.self.querySelector("ldod-outlet");return e||(e=document.createElement("ldod-outlet")),e.id=`${this.id}-outlet`,e}get language(){return this.getAttribute("language")}set language(e){this.setAttribute("language",e)}getFullPath=e=>p(`/${this.base}/${e??""}`.replace(/\/\/+/g,"/"));normalizePath=e=>l(this.routerPathname)?e:(e=>{if(e&&e.trim())return e.endsWith("/")?e:`${e}/`})(e).replace(`${this.routerPathname}/`,"/").replace(/\/\/+/g,"/");isPathActive=e=>{if(!this.active)return!1;let t=c.exec(this.normalizePath(e)).at(0);return p(this.normalizePath(this.active.path))===t};isFromThisRouter=e=>!this.route||(this.base?e.replace(this.base,""):e).startsWith(this.route);async connectedCallback(){if(this.addEventListeners(),!this.id)throw new Error("Each router must have an unique ID");this.self.append(this.outlet),this.processRoutes()}processRoutes(e=this.routes){this.routes=Object.entries(e).reduce(((e,[t,r])=>(e[p(`/${this.base}/${this.route}/${t}`.replace(/\/\/+/g,"/"))]=r,e)),{}),this.navigate()}attributeChangedCallback(e,t,r){this.onAttributeChange[e](t,r)}onAttributeChange={language:(e,t)=>e&&e!==t&&this.handleLanguageChange(t),base:(e,t)=>{!d&&t&&(d=t)}};handleLanguageChange(e){this.self.querySelectorAll("[language]").forEach((t=>t.setAttribute("language",e)))}disconnectedCallback(){this.unsubURL(),window.removeEventListener("popstate",this.handlePopstate)}addEventListeners(){this.unsubURL=u("url-changed",this.handleURLChanged),window.addEventListener("popstate",this.handlePopstate)}navigate=(e=this.location,t={})=>{this.isPathActive(e)||(this.location!==e&&history.pushState(t,void 0,e),this.render())};handleURLChanged=({payload:{path:e,state:t}})=>{e&&this.isFromThisRouter(e)&&this.navigate(this.getFullPath(e),t)};handlePopstate=()=>this.isFromThisRouter(this.location)&&this.navigate(this.location);async render(){let e=await this.getRoute();h("loading",!0),await this.appendMFE(e).catch(console.error),h("loading",!1)}isARouteMatch=e=>{const t=e.split("/"),r=this.location.split("/");return t.every(((e,t)=>!!e.startsWith(":")||r[t]===e))};async getRoute(){let e=this.location===this.routerPathname?this.index:Object.entries(this.routes).filter((([e,t])=>this.isARouteMatch(e)&&t)).sort((([e],[t])=>{const r=this.location.split("/").length,n=e?.split("/").length;return+(t?.split("/").length===r)-+(n===r)}))[0]?.[1]??this.fallback;return"function"==typeof e&&this.updateRoutingParameters(await e()),e}updateRoutingParameters=e=>{const t=this.updateHistoryState(e.path.split("/"));t&&history.replaceState(t,"")};updateHistoryState=e=>{let t={...history.state};return e.forEach(((e,r)=>{if(!e.startsWith(":"))return;const n=e.replace(":",""),a=f(this.location.replace(this.routerPathname,"")).split("/")[r];t={...t,[n]:a}})),t};async appendMFE(e){e&&(this.active&&await this.removeMFE(),this.active=await e(),await this.active.mount(this.language,`#${this.outlet.id}`))}async removeMFE(){await(this.active?.unMount()),this.outlet.innerHTML=""}}!customElements.get("ldod-router")&&customElements.define("ldod-router",m);class g extends HTMLAnchorElement{get to(){const e=this.getAttribute("to");return"string"==typeof e?e.trim():""}get mfePath(){return"/"===this.to?this.to:this.to?.split("/")[1]}get hasTo(){return this.hasAttribute("to")}get hasContent(){return this.hasAttribute("content")}get publishedMfes(){return[...window.mfes??[],"/"]}static get observedAttributes(){return["to"]}attributeChangedCallback(e,t,r){this.attributeChanged[e](t,r)}attributeChanged={to:()=>!this.target&&this.hasTo&&this.interceptBehavior()};connectedCallback(){this.href||(!this.target&&this.hasTo&&this.interceptBehavior(),this.target&&(this.handleMfePublishState(),this.hasTo&&(this.href=`${d}${this.to}`)))}interceptBehavior=()=>{this.handleMfePublishState(),this.addEventListener("click",this.onclick)};handleMfePublishState=()=>{this.isMfePublished()||this.hasAttribute("force")||(this.removeToAttr(),!this.hasContent&&this.hide())};onclick(e){e.preventDefault(),this.emitURLEvent()}emitURLEvent(){this.to&&h("url-changed",{path:this.to})}isMfePublished=()=>this.publishedMfes.includes(this.mfePath);hide=()=>{this.style.display="none"};removeToAttr=()=>this.removeAttribute("to")}customElements.define("nav-to",g,{extends:"a"});const y=(e,t)=>{h("url-changed",{path:e,state:t})};function v(e,t){const r=(e=>JSON.parse(sessionStorage.getItem(e)))(e)||{};Object.entries(t).forEach((([e,t])=>r[e]=t)),(e=>{sessionStorage.removeItem(e)})(e),((e,t)=>{sessionStorage.setItem(e,JSON.stringify(t))})(e,r)}function b(e,t){if(w(e,t)&&Object.values(e).length===Object?.values(t).length)return Object.entries(e).every((([e,r],n)=>{const[a,i]=Object.entries(t)[n];return w(r,i)?e===a&&b(r,i):e===a&&r===i}))}function A(e,t){let r=globalThis.sessionStorage.getItem(e);if(r)return F(JSON.parse(r),t)}function F(e,t){return Array.from(t).reduce(((t,r)=>(Object.keys(e).includes(r)&&(t[r]=e[r]),t)),{})}function w(e,t){return E(e)&&E(t)}function E(e){return e&&"object"==typeof e}class x{#e;#t;#r;#n;constructor(e,{storageName:t,keys:r}={}){if(this.#n="object"==typeof e?e:e?{state:e}:{},this.#e=new Map,this.#r=new Set,this.#t=void 0,t&&r){this.#t={storageName:t,keys:r};const e=A(t,r);e?this.setState(e,!0):v(t,F(this.#n,r))}}subscribe(e,t,r={}){return t?(this.#e.has(t)?this.#e.get(t).add(e):this.#e.set(t,new Set([e])),r.fire&&e(this.#n[t],this.#n[t]),()=>this.#e.get(t).delete(e)):this.subscribeAll(e,r)}subscribeAll(e,t){return this.#r.add(e),t.fire&&e(this.#n,this.#n),()=>this.#r.delete(e)}destroy(){this.#e.clear(),this.#r.clear()}getState(e){return e?this.#n[e]:this.#n}setState(e,t){if(!e)return;e=function(e){return e="object"==typeof e||"function"==typeof e?e:{state:e},e}(e);const r=this.setNextStateAccordingType(e);if(!b(r,this.#n)){const e=this.#n;this.#n=t?r:{...this.#n,...r},this.#t?.storageName&&this.#t?.keys&&v(this.#t.storageName,F(this.#n,this.#t.keys)),Object.keys(r).forEach((t=>this.#e.get(t)?.forEach((r=>r(this.#n[t],e[t]))))),this.#r.forEach((t=>t(this.#n,e)))}}invokeListener(e,t,r){t(r?e[r]:e,this.#n)}setNextStateAccordingType(e){return"function"==typeof e?(()=>e(this.#n)||this.#n)():e}}const O=window.process?.apiHost||"http://localhost:8000/api",S=e=>h("loading",e),j=e=>h("error",e||"Something went wrong");const z=Object.freeze({JSON:"application/json",FORM_DATA:"multipart/form-data"});class ${constructor(){if($.instance)return $.instance;$.instance=this}get storageToken(){return A("ldod-store",["token"])?.token}async fetchRequest(e,t){try{const r=await fetch(e,t),n=await r.json();return S(!1),r.ok?n:(401===r.status?h("logout"):j(n?.message),Promise.reject(n||r))}catch(e){console.error("FETCH ERROR: ",e?.stack??e),j(),y("/"),S(!1)}}async request(e,{url:t,path:r,token:n,signal:a},i,s){S(!0);const o=function(e,t,r){const n=new Headers({Authorization:`Bearer ${t||""}`,"Accept-Encoding":"gzip"});return r===z.JSON&&n.set("Content-Type",r),{method:e,headers:n,token:t}}(e,n||this.storageToken,i);return s&&(o.body=s),a&&(o.signal=a),await this.fetchRequest(t??O.concat(r),o)}async get(e){return await this.request("GET",e,z.JSON)}async post(e,t){return await this.request("POST",e,z.JSON,JSON.stringify(t))}async upload(e,t){return await this.request("POST",e,z.FORM_DATA,t)}}const _=Object.freeze(new $),Z=window.process?.apiHost||"http://localhost:8000/api",P=e=>h("loading",e),k=e=>h("error",e||"Something went wrong"),R=async(e,t)=>{try{const r=await fetch(e,t);if(401===r.status)return h("logout"),Promise.reject(r);const n=await r.json();return r.ok?n:(k(n?.message),Promise.reject(n||r))}catch(e){console.error("FETCH ERROR: ",e?.stack??e),k(),y("/")}finally{P(!1)}},C=async(e,t,r,n,a)=>{P(!0);const i={},s=n||A("ldod-store",["token"])?.token;if(r&&"object"!=typeof r)throw new Error("Data must be an Object");return i.headers=new Headers,i.headers.append("Authorization",`Bearer ${s||""}`),i.headers.append("Content-Type","application/json"),i.headers.append("Accept-Encoding","gzip"),(t.includes("restricted")||t.includes("admin"))&&i.headers.append("Cache-Control","private"),i.method=e,a&&(i.signal=a),r&&(i.body=JSON.stringify(r)),await R(Z.concat(t),i)},T=["get","post","put","delete"].reduce(((e,t)=>(e[t]=(e,r={},n,a)=>C(t.toUpperCase(),e,r,n,a),e)),{}),M=e=>{const t=new Request(e).headers;return new Headers({Authorization:t.get("Authorization")||`Bearer ${A("ldod-store",["token"])?.token||""}`,"Accept-Encoding":t.get("Accept-Encoding")||"gzip","Content-Type":t.get("Content-Type")||"application/json"})},q=new Proxy(fetch,{apply:function(e,t,r){I(!0);const[n,a]=r,s=new Request(n,{headers:M(new Request(n,a))});return new Promise(((t,r)=>{e(s).then((e=>(I(!1),t(e)))).catch((e=>((e=>{i.publish("ldod:error",e||"Something went wrong")})(e?.message),I(!1),r(e))))}))}}),I=e=>i.publish("ldod:loading",e);const N=async e=>new Promise((t=>setTimeout(t,e))),L=(...e)=>document.createRange().createContextualFragment(e);globalThis.htmlRender=L,globalThis.sleep=N;const V=(e,t,...r)=>{if("string"==typeof e){const n=document.createElement(e,t?.is?{is:t.is}:"");return Object.entries(t||{}).forEach((e=>function([e,t],r){if((e=>e.startsWith("on")&&e.toLowerCase()in window)(e))return r.addEventListener(e.toLowerCase().substring(2),t);if("style"===e)return Object.entries(t).forEach((([e,t])=>r.style[e]=t));let n=typeof t;if("function"===n||"object"===n)return void(r[e]=t);if("boolean"===n)return r.toggleAttribute(e,t);r.setAttribute(e,t?.toString())}(e,n))),r.forEach((e=>U(n,e))),n}if("function"==typeof e)return e(t,r);throw new TypeError(`Element ${e} not recognized`)},U=(e,t)=>{if(Array.isArray(t))return t.forEach((t=>U(e,t)));if(!t)return;let r=t.nodeType?t:document.createTextNode(t);return e instanceof HTMLTemplateElement?e.content.appendChild(r):e.appendChild(r)},D=(...e)=>{const t=document.createDocumentFragment();return e.forEach((e=>e&&U(t,e))),t};export{d as BASE_PATH,x as Store,V as createElement,D as createFragment,q as fetchProxy,T as fetcher,F as filterObjectByKeys,A as getPartialStorage,L as htmlRender,i as ldodEventBus,h as ldodEventPublisher,u as ldodEventSubscriber,s as ldodValidator,M as mergeHeaders,y as navigateTo,_ as requestProxy,N as sleep};
//# sourceMappingURL=ldod-core.js.map
