{"version":3,"file":"modal-bs.js","sources":["../../ldod-ui/modal/ldod-bs-modal/modal-bs.js","../../ldod-ui/modal/ldod-bs-modal/modal-html.js"],"sourcesContent":["/** @format */\n\nimport modalCss from '@ui/bootstrap/modal-css.js';\nimport buttonsCss from '@ui/bootstrap/buttons-css.js';\n\nimport style from './style.css?inline';\nimport { modal } from './modal-html';\n\nconst sheet = new CSSStyleSheet();\nsheet.replaceSync(modalCss + buttonsCss + style);\n\nexport class LdodBsModal extends HTMLElement {\n\tstatic modalsOpened = 0;\n\tconstructor() {\n\t\tsuper();\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tthis.shadowRoot.adoptedStyleSheets = [sheet];\n\t\tthis.self.innerHTML = modal();\n\t\tthis.modalBackdrop = this.self.querySelector('#modal-backdrop');\n\t}\n\n\tget self() {\n\t\treturn this.shadowRoot || this;\n\t}\n\n\tget modal() {\n\t\treturn this.self.firstElementChild;\n\t}\n\n\tget dialog() {\n\t\treturn this.modal.firstElementChild;\n\t}\n\n\tget static() {\n\t\treturn this.hasAttribute('static');\n\t}\n\tget closeBtn() {\n\t\treturn this.modal.querySelector('#modal-btn-close');\n\t}\n\n\tget dialogClass() {\n\t\treturn this.getAttribute('dialog-class');\n\t}\n\n\tget show() {\n\t\treturn this.hasAttribute('show');\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['show', 'dialog-class'];\n\t}\n\n\tattributeChangedCallback(name) {\n\t\tthis.handleAttributeChange[name]();\n\t}\n\n\thandleAttributeChange = {\n\t\t'dialog-class': () => this.setDialogClass(),\n\t\tshow: () => (this.show ? this.showModal() : this.hideModal()),\n\t};\n\n\tconnectedCallback() {\n\t\tthis.dialog.addEventListener('click', e => e.stopPropagation());\n\t\tthis.self.querySelectorAll('slot').forEach(slot => {\n\t\t\tif (!slot.assignedNodes().length) slot.parentElement.hidden = true;\n\t\t});\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.removeEventListeners();\n\t}\n\n\taddEventListeners() {\n\t\tthis.closeBtn.addEventListener('click', this.toggle);\n\t\tthis.addEventListener('click', this.onClickOutsiteContent);\n\t\tdocument.addEventListener('keydown', this.onEscape);\n\t}\n\n\tremoveEventListeners() {\n\t\tthis.closeBtn.removeEventListener('click', this.toggle);\n\t\tthis.removeEventListener('click', this.toggle);\n\t\tdocument.removeEventListener('keydown', this.onEscape);\n\t}\n\tonEscape = e => e.key === 'Escape' && this.onClickOutsiteContent();\n\tonClickOutsiteContent = () => {\n\t\tif (!this.static) return this.toggle();\n\t\tif (this.show) {\n\t\t\tthis.modal.classList.toggle('modal-static');\n\t\t\tsetTimeout(() => this.modal.classList.toggle('modal-static'), 500);\n\t\t}\n\t};\n\n\ttoggle = () => this.toggleAttribute('show');\n\n\tshowModal = () => {\n\t\tthis.addEventListeners();\n\t\tthis.modal.style.display = 'block';\n\t\tthis.ariaModal = 'true';\n\t\tthis.removeAttribute('aria-hidden');\n\t\tsetTimeout(() => {\n\t\t\tdocument.body.classList.add('modal-open');\n\t\t\t++LdodBsModal.modalsOpened;\n\t\t\tthis.modalBackdrop.className = 'modal-backdrop show';\n\t\t\tthis.modal.classList.add('show');\n\t\t}, 100);\n\t};\n\n\thideModal = () => {\n\t\tthis.removeEventListeners();\n\t\tthis.modalBackdrop.className = '';\n\t\tthis.ariaHidden = 'true';\n\t\tthis.removeAttribute('aria-modal');\n\t\tthis.modal.classList.remove('show');\n\t\tthis.onHide();\n\t\tsetTimeout(() => {\n\t\t\tthis.modal.style.display = 'none';\n\t\t\tif (LdodBsModal.modalsOpened === 1) {\n\t\t\t\t--LdodBsModal.modalsOpened;\n\t\t\t\tdocument.body.classList.remove('modal-open');\n\t\t\t}\n\t\t}, 100);\n\t};\n\n\tonHide = () =>\n\t\tthis.dispatchEvent(\n\t\t\tnew CustomEvent('ldod-modal-close', {\n\t\t\t\tdetail: { id: this.id },\n\t\t\t\tbubbles: true,\n\t\t\t\tcomposed: true,\n\t\t\t})\n\t\t);\n\n\tsetDialogClass() {\n\t\tthis.dialog.classList.add(...this.dialogClass.split(' '));\n\t}\n}\n\n!customElements.get('ldod-bs-modal') && customElements.define('ldod-bs-modal', LdodBsModal);\n","/** @format */\n\nexport const modal = () => {\n\treturn /*html*/ `\n        <div\n            class=\"modal fade\"\n            id=\"new-ldod-modal\"\n            tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n               <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <slot name=\"header-slot\"></slot>\n                        <button\n                            id=\"modal-btn-close\"\n                            type=\"button\"\n                            class=\"btn-close\">\n                        </button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <slot name=\"body-slot\"></slot>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <slot name=\"footer-slot\"></slot>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div id=\"modal-backdrop\"></div>\n`;\n};\n"],"names":["sheet","CSSStyleSheet","replaceSync","modalCss","buttonsCss","LdodBsModal","HTMLElement","static","constructor","this","attachShadow","mode","shadowRoot","adoptedStyleSheets","self","innerHTML","modalBackdrop","querySelector","modal","firstElementChild","dialog","hasAttribute","closeBtn","dialogClass","getAttribute","show","observedAttributes","attributeChangedCallback","name","handleAttributeChange","setDialogClass","showModal","hideModal","connectedCallback","addEventListener","e","stopPropagation","querySelectorAll","forEach","slot","assignedNodes","length","parentElement","hidden","disconnectedCallback","removeEventListeners","addEventListeners","toggle","onClickOutsiteContent","document","onEscape","removeEventListener","key","classList","setTimeout","toggleAttribute","style","display","ariaModal","removeAttribute","body","add","modalsOpened","className","ariaHidden","remove","onHide","dispatchEvent","CustomEvent","detail","id","bubbles","composed","split","customElements","get","define"],"mappings":"4FAQMA,EAAQ,IAAIC,cAClBD,EAAME,YAAYC,EAAWC,6HAEtB,MAAMC,UAAoBC,YAChCC,oBAAsB,EACtBC,sBAECC,KAAKC,aAAa,CAAEC,KAAM,SAC1BF,KAAKG,WAAWC,mBAAqB,CAACb,GACtCS,KAAKK,KAAKC,UCdK,w4BDefN,KAAKO,cAAgBP,KAAKK,KAAKG,cAAc,kBAC7C,CAEGH,WACH,OAAOL,KAAKG,YAAcH,IAC1B,CAEGS,YACH,OAAOT,KAAKK,KAAKK,iBACjB,CAEGC,aACH,OAAOX,KAAKS,MAAMC,iBAClB,CAEGZ,aACI,OAAAE,KAAKY,aAAa,SACzB,CACGC,eACI,OAAAb,KAAKS,MAAMD,cAAc,mBAChC,CAEGM,kBACI,OAAAd,KAAKe,aAAa,eACzB,CAEGC,WACI,OAAAhB,KAAKY,aAAa,OACzB,CAEUK,gCACH,MAAA,CAAC,OAAQ,eAChB,CAEDC,yBAAyBC,GACnBnB,KAAAoB,sBAAsBD,IAC3B,CAEDC,sBAAwB,CACvB,eAAgB,IAAMpB,KAAKqB,iBAC3BL,KAAM,IAAOhB,KAAKgB,KAAOhB,KAAKsB,YAActB,KAAKuB,aAGlDC,oBACCxB,KAAKW,OAAOc,iBAAiB,SAASC,GAAKA,EAAEC,oBAC7C3B,KAAKK,KAAKuB,iBAAiB,QAAQC,SAAQC,IACrCA,EAAKC,gBAAgBC,SAAQF,EAAKG,cAAcC,QAAS,EAAA,GAE/D,CAEDC,uBACCnC,KAAKoC,sBACL,CAEDC,oBACCrC,KAAKa,SAASY,iBAAiB,QAASzB,KAAKsC,QAC7CtC,KAAKyB,iBAAiB,QAASzB,KAAKuC,uBACpCC,SAASf,iBAAiB,UAAWzB,KAAKyC,SAC1C,CAEDL,uBACCpC,KAAKa,SAAS6B,oBAAoB,QAAS1C,KAAKsC,QAChDtC,KAAK0C,oBAAoB,QAAS1C,KAAKsC,QACvCE,SAASE,oBAAoB,UAAW1C,KAAKyC,SAC7C,CACDA,SAAWf,GAAe,WAAVA,EAAEiB,KAAoB3C,KAAKuC,wBAC3CA,sBAAwB,KACvB,IAAKvC,KAAKF,OAAQ,OAAOE,KAAKsC,SAC1BtC,KAAKgB,OACRhB,KAAKS,MAAMmC,UAAUN,OAAO,gBAC5BO,YAAW,IAAM7C,KAAKS,MAAMmC,UAAUN,OAAO,iBAAiB,KAAG,EAInEA,OAAS,IAAMtC,KAAK8C,gBAAgB,QAEpCxB,UAAY,KACXtB,KAAKqC,oBACLrC,KAAKS,MAAMsC,MAAMC,QAAU,QAC3BhD,KAAKiD,UAAY,OACjBjD,KAAKkD,gBAAgB,eACrBL,YAAW,KACVL,SAASW,KAAKP,UAAUQ,IAAI,gBAC1BxD,EAAYyD,aACdrD,KAAKO,cAAc+C,UAAY,sBAC/BtD,KAAKS,MAAMmC,UAAUQ,IAAI,OAAM,GAC7B,IAAG,EAGP7B,UAAY,KACNvB,KAAAoC,uBACLpC,KAAKO,cAAc+C,UAAY,GAC/BtD,KAAKuD,WAAa,OAClBvD,KAAKkD,gBAAgB,cACrBlD,KAAKS,MAAMmC,UAAUY,OAAO,QAC5BxD,KAAKyD,SACLZ,YAAW,KACV7C,KAAKS,MAAMsC,MAAMC,QAAU,OACM,IAA7BpD,EAAYyD,iBACbzD,EAAYyD,aACdb,SAASW,KAAKP,UAAUY,OAAO,cAAY,GAE1C,IAAG,EAGPC,OAAS,IACRzD,KAAK0D,cACJ,IAAIC,YAAY,mBAAoB,CACnCC,OAAQ,CAAEC,GAAI7D,KAAK6D,IACnBC,SAAS,EACTC,UAAU,KAIb1C,iBACMrB,KAAAW,OAAOiC,UAAUQ,OAAOpD,KAAKc,YAAYkD,MAAM,KACpD,GAGDC,eAAeC,IAAI,kBAAoBD,eAAeE,OAAO,gBAAiBvE"}