{"version":3,"file":"tooltip.js","sources":["../../ldod-ui/tooltip/popper.js","../../ldod-ui/tooltip/popover.js","../../ldod-ui/tooltip/tooltip.js","../../ldod-ui/tooltip/tooltip-html.js"],"sourcesContent":["/** @format */\n\nimport * as mod from '@vendor/@popperjs/core_2.11.6/dist/umd/popper.min.js';\nlet createPopper;\n\nif (globalThis?.Popper) createPopper = Popper.createPopper;\nelse createPopper = mod?.createPopper;\nexport { createPopper };\n","/** @format */\n\nimport popoverStyle from './popover.css?inline';\nimport { createPopper } from './popper.js';\n\nexport class LdodPopover extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget show() {\n\t\treturn this.hasAttribute('show');\n\t}\n\n\tget content() {\n\t\treturn this.querySelector('[ldod-popover]');\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['show'];\n\t}\n\n\tget options() {\n\t\treturn {\n\t\t\tstrategy: 'fixed',\n\t\t\tplacement: 'bottom',\n\t\t\tmodifiers: [\n\t\t\t\t{\n\t\t\t\t\tname: 'offset',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\toffset: [this.dataset.skidding || 0, this.dataset.distance || 8],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tgetComponent = () => {\n\t\tconst element = this.element();\n\t\telement.lastElementChild.toggleAttribute('ldod-popover');\n\t\treturn element.children;\n\t};\n\n\tconnectedCallback() {\n\t\tthis.innerHTML = /*html*/ `<style>${popoverStyle}</style>`;\n\t\twindow.addEventListener('click', this.hidePopover);\n\t}\n\n\thidePopover = ({ target }) => {\n\t\tif (target.hasAttribute('open-popover')) return;\n\t\tthis.toggleAttribute('show', false);\n\t};\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tthis.handleChangeAttribute[name]();\n\t}\n\n\thandleChangeAttribute = {\n\t\tshow: () => {\n\t\t\tif (!this.show) return this.content.remove();\n\t\t\tthis.append(...this.getComponent());\n\t\t\tthis.content.toggleAttribute('show');\n\t\t\tthis.update();\n\t\t},\n\t};\n\n\tdisconnectedCallback() {\n\t\twindow.removeEventListener('click', this.hidePopover);\n\t}\n\n\tupdate = () => {\n\t\tthis.target && createPopper(this.target, this.content, this.options).update();\n\t};\n}\n\n!customElements.get('ldod-popover') && customElements.define('ldod-popover', LdodPopover);\n","/** @format */\n\nimport './popover';\nimport tooltipStyle from './tooltip.css?inline';\nimport tooltipHtml from './tooltip-html';\nimport { createPopper } from './popper.js';\n\nexport class LdodTooltip extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tconst sheet = new CSSStyleSheet();\n\t\tsheet.replaceSync(tooltipStyle);\n\t\tthis.shadowRoot.adoptedStyleSheets = [sheet];\n\t\tthis.shadowRoot.innerHTML = tooltipHtml;\n\t}\n\n\tget element() {\n\t\treturn this.getRootNode().querySelector(this.dataset.ref);\n\t}\n\n\tget tooltip() {\n\t\treturn this.shadowRoot.querySelector('#tooltip');\n\t}\n\n\tget placement() {\n\t\treturn this.getAttribute('placement') ?? 'bottom';\n\t}\n\n\tisLightTheme() {\n\t\treturn this.hasAttribute('light');\n\t}\n\n\tsetLightTheme() {\n\t\tthis.tooltip.toggleAttribute('dark', false);\n\t\tthis.tooltip.toggleAttribute('light', true);\n\t}\n\n\tget options() {\n\t\treturn {\n\t\t\tstrategy: 'fixed',\n\t\t\tplacement: this.placement,\n\t\t\tmodifiers: [\n\t\t\t\t{\n\t\t\t\t\tname: 'offset',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\toffset: [0, 8],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t}\n\n\tget content() {\n\t\treturn this.getAttribute('content') || this.dataset.content;\n\t}\n\n\tget instance() {\n\t\treturn createPopper(this.element, this.tooltip, this.options);\n\t}\n\tstatic get observedAttributes() {\n\t\treturn ['content'];\n\t}\n\n\tconnectedCallback() {\n\t\tthis.addEventListeners();\n\t\tthis.render();\n\t}\n\n\trender() {\n\t\tthis.isLightTheme() && this.setLightTheme();\n\t\tthis.tooltip.style.maxWidth = this.getAttribute('width');\n\t\tthis.tooltip.querySelector('#content').textContent = this.content;\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tif (name === 'content' && oldV && oldV !== newV) this.render();\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.removeEventListeners();\n\t}\n\n\taddEventListeners() {\n\t\t['mouseenter', 'focus'].forEach(event => this.element?.addEventListener(event, this.show));\n\t\t['mouseleave', 'blur'].forEach(event => this.element?.addEventListener(event, this.hide));\n\t}\n\n\tremoveEventListeners() {\n\t\t['mouseenter', 'focus'].forEach(event => {\n\t\t\tthis.element?.removeEventListener(event, this.show);\n\t\t});\n\t\t['mouseleave', 'blur'].forEach(event =>\n\t\t\tthis.element?.removeEventListener(event, this.hide)\n\t\t);\n\t}\n\n\tshow = () => {\n\t\tthis.tooltip.toggleAttribute('data-show', true);\n\t\tthis.instance.setOptions(options => ({\n\t\t\t...options,\n\t\t\tmodifiers: [...options.modifiers, { name: 'eventListeners', enabled: true }],\n\t\t}));\n\t\tthis.instance.update();\n\t};\n\n\thide = () => {\n\t\tthis.tooltip.toggleAttribute('data-show', false);\n\t\tthis.instance.setOptions(options => ({\n\t\t\t...options,\n\t\t\tmodifiers: [...options.modifiers, { name: 'eventListeners', enabled: false }],\n\t\t}));\n\t};\n}\n\n!customElements.get('ldod-tooltip') && customElements.define('ldod-tooltip', LdodTooltip);\n","export default /*html*/ `\n<div id=\"tooltip\" role=\"tooltip\" dark>\n<div id=\"arrow\" data-popper-arrow></div>\n<span id=\"content\"></span>\n</div>`;\n"],"names":["createPopper","globalThis","Popper","mod","LdodPopover","HTMLElement","constructor","show","this","hasAttribute","content","querySelector","observedAttributes","options","strategy","placement","modifiers","name","offset","dataset","skidding","distance","getComponent","element","lastElementChild","toggleAttribute","children","connectedCallback","innerHTML","window","addEventListener","hidePopover","target","attributeChangedCallback","oldV","newV","handleChangeAttribute","remove","append","update","disconnectedCallback","removeEventListener","customElements","get","define","LdodTooltip","super","attachShadow","mode","sheet","CSSStyleSheet","replaceSync","shadowRoot","adoptedStyleSheets","getRootNode","ref","tooltip","getAttribute","isLightTheme","setLightTheme","instance","addEventListeners","render","style","maxWidth","textContent","removeEventListeners","forEach","event","hide","setOptions","enabled"],"mappings":"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"}