{"version":3,"file":"ldod-core-ui.js","sources":["../../ldod-core-ui/src/scroll-btn/scroll-btn.js","../../ldod-core-ui/src/notifications/ldod-notification.js","../../ldod-core-ui/src/notifications/notification-html.js","../../ldod-core-ui/src/icons/helpers.js","../../ldod-core-ui/src/icons/ldod-span-icon.js","../../ldod-core-ui/src/loading-spinner/loading-spinner.js"],"sourcesContent":["/** @format */\n\nclass ScrollBtn extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tif (!this.shadowRoot) this.attachShadow({ mode: 'open' });\n\t}\n\n\tasync connectedCallback() {\n\t\tif (!this.shadowRoot.innerHTML) await this.render();\n\t\tthis.button = this.shadowRoot.querySelector('button');\n\t\tthis.addEventListeners();\n\t}\n\n\tasync render() {\n\t\tthis.shadowRoot.innerHTML = (await import('./scroll-btn-html.js')).default();\n\t}\n\n\taddEventListeners() {\n\t\twindow.addEventListener('scroll', () =>\n\t\t\tthis.toggleAttribute('scrolled', window.scrollY > 750)\n\t\t);\n\t\tthis.button?.addEventListener('click', onClickScroll);\n\t}\n}\n\nfunction onClickScroll() {\n\twindow.scrollTo({ top: 0, behavior: 'smooth' });\n}\n\n!customElements.get('scroll-btn') && customElements.define('scroll-btn', ScrollBtn);\n","/** @format */\nimport style from './style.css?inline';\nimport toastCss from '@ui/bootstrap/toast-css.js';\nimport buttonsCss from '@ui/bootstrap/buttons-css.js';\nimport notificationHtml from './notification-html';\n\nconst sheet = new CSSStyleSheet();\nsheet.replaceSync(toastCss + buttonsCss + style);\n\nexport class LdodNotification extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tthis.shadowRoot.adoptedStyleSheets = [sheet];\n\t\tthis.toastHtml = notificationHtml();\n\t}\n\n\tget show() {\n\t\treturn this.hasAttribute('show');\n\t}\n\n\tget theme() {\n\t\treturn this.getAttribute('theme') || 'primary';\n\t}\n\n\tget toast() {\n\t\treturn this.shadowRoot.querySelector('.toast');\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['show'];\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tthis.handleAttributeChange[name](oldV, newV);\n\t}\n\n\thandleAttributeChange = {\n\t\tshow: () => this.show && this.showNotification(),\n\t};\n\n\tconnectedCallback() {\n\t\tthis.addEventListener('pointerenter', this.clearTimeout);\n\t\tthis.addEventListener('pointerleave', this.hideNotification);\n\t}\n\n\trender() {\n\t\tthis.shadowRoot.innerHTML = this.toastHtml(this.theme);\n\t\tthis.addEventListeners();\n\t}\n\n\taddEventListeners = () => {\n\t\tthis.shadowRoot.querySelector('.btn-close').addEventListener('click', this.close);\n\t};\n\n\ttoggle = () => this.toggleAttribute('show');\n\n\tclearTimeout = () => {\n\t\twindow.clearTimeout(this.timeout);\n\t\tthis.timeout = null;\n\t};\n\n\tshowNotification = () => {\n\t\tthis.clearTimeout();\n\t\tthis.render();\n\t\tthis.toast.classList.add('show');\n\t\tthis.fadeTransition();\n\t\tthis.toggleAttribute('show', false);\n\t\tthis.hideNotification();\n\t};\n\n\thideNotification = () => {\n\t\tthis.timeout = setTimeout(() => {\n\t\t\tthis.timeout && this.close();\n\t\t}, 3000);\n\t};\n\n\tfadeTransition = (close = false) => {\n\t\tthis.toast.classList.add('showing');\n\t\tsetTimeout(() => {\n\t\t\tthis.toast.classList.remove('showing');\n\t\t\tclose && this.toast.classList.remove('show');\n\t\t\tclose && this.remove();\n\t\t}, 100);\n\t};\n\n\tclose = () => {\n\t\tthis.fadeTransition(true);\n\t};\n}\n\n!customElements.get('ldod-notification') &&\n\tcustomElements.define('ldod-notification', LdodNotification);\n","/** @format */\n\nexport default () => theme =>\n\t/*html*/ `\n        <div\n            class=\"toast fade alert-${theme}\"\n            role=\"alert\"\n            aria-live=\"assertive\"\n            aria-atomic=\"true\"\n        >\n            <div class=\"d-flex\">\n            ${\n\t\t\t\ttheme === 'success'\n\t\t\t\t\t? /*html*/ `<span is=\"ldod-span-icon\" icon=\"check\" size=\"18px\" fill=\"#0f5132\"></span>`\n\t\t\t\t\t: /*html*/ `<span is=\"ldod-span-icon\" icon=\"triangle-exclamation\" size=\"18px\" fill=\"#842029\"></span>`\n\t\t\t}\n            <div class=\"toast-body\">\n                <slot ></slot>\n                </div>\n                <button\n                    type=\"button\"\n                    class=\"btn-close btn-close-alert btn-close-margin\"\n                ></button>\n            </div>\n        </div>\n`;\n","/** @format */\n\nconst parser = new DOMParser();\nexport const getIconSVG = iconRaw => parser.parseFromString(iconRaw, 'image/svg+xml');\n\nexport const iconSVGLoader = async iconName => {\n\tconst iconRaw = window.LDOD_PRODUCTION\n\t\t? (await import(/* @vite-ignore */ `@ui/icons/${iconName}.js`)).default\n\t\t: (await import(/* @vite-ignore */ `./icons/${iconName}.js`)).default;\n\treturn getIconSVG(iconRaw).firstChild;\n};\n","/** @format */\n\nimport { iconSVGLoader } from './helpers';\nimport style from './ldod-span-icon-style.css?inline';\n\nconst iconStyle = (icon, iconHover, size) => /*css*/ `\n:host {\n    --icon-background: url(data:image/svg+xml,${encodeURIComponent(icon)});\n\tbackground-image: var(--icon-background);\n\tmin-width: ${size};\n\tmin-height: ${size};\n\tbackground-size: ${size};\n}\n:host(:hover) {\n    --icon-background: url(data:image/svg+xml,${encodeURIComponent(iconHover)});\n}\n`;\n\nexport class LdodSpanIcon extends HTMLSpanElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tthis.sheet = new CSSStyleSheet();\n\t\tthis.sheet.replaceSync(style);\n\t\tthis.shadowRoot.adoptedStyleSheets = [this.sheet];\n\t}\n\n\tget icon() {\n\t\treturn this.getAttribute('icon');\n\t}\n\tget fill() {\n\t\treturn this.getAttribute('fill') || '#6c757d';\n\t}\n\tget hoverIcon() {\n\t\treturn this.getAttribute('hover-icon') || this.icon;\n\t}\n\n\tget hoverFill() {\n\t\treturn this.getAttribute('hover-fill') || this.fill;\n\t}\n\tget size() {\n\t\treturn this.getAttribute('size') || '24px';\n\t}\n\n\tsetFillColor(iconSVG, color) {\n\t\ticonSVG.querySelector('path').setAttribute('fill', color);\n\t\treturn iconSVG;\n\t}\n\n\tasync connectedCallback() {\n\t\tconst iconSVG = this.setFillColor(await iconSVGLoader(this.icon), this.fill);\n\t\tconst iconHoverSVG = this.setFillColor(await iconSVGLoader(this.hoverIcon), this.hoverFill);\n\t\tthis.sheet.replaceSync(\n\t\t\tstyle + iconStyle(iconSVG.outerHTML, iconHoverSVG.outerHTML, this.size)\n\t\t);\n\t}\n}\n\n!customElements.get('ldod-span-icon') &&\n\tcustomElements.define('ldod-span-icon', LdodSpanIcon, { extends: 'span' });\n","/** @format */\n\nconst ldodEventBus = globalThis.eventBus;\nexport class LoadingSpinner extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tif (!this.shadowRoot) this.attachShadow({ mode: 'open' });\n\t\tthis.pendingLoading = 0;\n\t}\n\n\tget isLoading() {\n\t\treturn this.hasAttribute('show');\n\t}\n\n\thandleLoading = async isLoading => {\n\t\tif (this.pendingLoading > 1 && isLoading) return;\n\t\tif (this.pendingLoading !== 0 && !isLoading) return;\n\t\tthis.toggleVisibility(isLoading);\n\t};\n\n\ttoggleVisibility = isLoading => (this.hidden = !isLoading);\n\n\tasync connectedCallback() {\n\t\tif (!this.shadowRoot.innerHTML) await this.render();\n\t\tthis.addEventListeners();\n\t}\n\n\tasync render() {\n\t\tthis.shadowRoot.innerHTML = (await import('./loading-spinner-html')).default();\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.unsubLoading?.();\n\t}\n\n\taddEventListeners = () => {\n\t\tthis.unsubLoading = ldodEventBus?.subscribe(\n\t\t\t'ldod:loading',\n\t\t\tthis.handleLoadingEvent\n\t\t).unsubscribe;\n\t};\n\n\thandleLoadingEvent = ({ payload: isLoading }) => {\n\t\tif (isLoading) ++this.pendingLoading;\n\t\telse if (this.pendingLoading > 0) --this.pendingLoading;\n\t\telse this.pendingLoading = 0;\n\t\tthis.handleLoading(isLoading);\n\t};\n}\n\n!customElements.get('loading-spinner') && customElements.define('loading-spinner', LoadingSpinner);\n"],"names":["ScrollBtn","HTMLElement","constructor","this","shadowRoot","attachShadow","mode","async","innerHTML","render","button","querySelector","addEventListeners","import","default","window","addEventListener","toggleAttribute","scrollY","onClickScroll","scrollTo","top","behavior","customElements","get","define","sheet","CSSStyleSheet","replaceSync","toastCss","buttonsCss","LdodNotification","super","adoptedStyleSheets","toastHtml","theme","show","hasAttribute","getAttribute","toast","observedAttributes","attributeChangedCallback","name","oldV","newV","handleAttributeChange","showNotification","connectedCallback","clearTimeout","hideNotification","close","toggle","timeout","classList","add","fadeTransition","setTimeout","remove","parser","DOMParser","iconSVGLoader","iconName","iconRaw","parseFromString","getIconSVG","LDOD_PRODUCTION","firstChild","LdodSpanIcon","HTMLSpanElement","style","icon","fill","hoverIcon","hoverFill","size","setFillColor","iconSVG","color","setAttribute","iconHoverSVG","iconHover","encodeURIComponent","iconStyle","outerHTML","extends","ldodEventBus","globalThis","eventBus","LoadingSpinner","pendingLoading","isLoading","handleLoading","toggleVisibility","hidden","disconnectedCallback","unsubLoading","subscribe","handleLoadingEvent","unsubscribe","payload"],"mappings":"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"}