import{Store as e,ldodEventSubscriber as t,ldodEventPublisher as o}from"@core";navigator.serviceWorker&&async function(){const e=await navigator.serviceWorker.register("/ldod-mfes/service-worker.js",{scope:"/ldod-mfes/",updateViaCache:"none"}).catch((e=>console.error(e)));e?.installing&&console.log("Service worker installing");e?.waiting&&console.log("Service worker installed");e?.active&&console.log("Service worker active")}(),navigator.serviceWorker.addEventListener("message",(e=>{console.log("Main thread received a message:",e.data),location.reload()}));const a=document.body;customElements.whenDefined("nav-bar").then((({instance:e})=>{if(!(e instanceof HTMLElement))return;const t=e.shadowRoot.firstElementChild;new MutationObserver((e=>{e.forEach((e=>{a.scrollHeight<=window.innerHeight||(e.target.classList.contains("modal-open")?(t.style.paddingRight="15px",a.style.paddingRight="15px"):(t.style.paddingRight="0px",a.style.paddingRight="0px"))}))})).observe(a,{attributes:!0,attributeFilter:["class"]})}));const n=new e({language:"en",token:""},{storageName:"ldod-store",keys:["language","token"]});function s(){return n.getState().language}function r(){document.body.querySelectorAll("[language]").forEach((e=>e.setAttribute("language",s())))}let i;n.subscribe((function(e,t){e.language!==t.language&&r()})),r();const l=document.getElementById("notification-container");async function c(e,t){i||await(async()=>{i=(await import("./notification.js")).default})(),l.appendChild(i(e,t))}const d=({payload:e})=>n.setState({token:e}),g=({payload:e})=>c(e||"Something went wrong","danger"),u=({payload:e})=>c(e||"","success");t("language",(({payload:e})=>n.setState({language:e||"en"}))),t("token",d),t("logout",d),t("message",u),t("error",g),o("language",s());const p={pt:"LdoD: Esta página não existe...",en:"LdoD: Page not found...",es:"LdoD: Esta página no existe"},m=()=>document.body.querySelector("div#no-page.container");let y;const f=(e,o)=>{document.body.querySelector(o).innerHTML=(e=>`<div id="no-page" class="container">${p[e]}</div>`)(e),y=t("language",w)},h=()=>{y(),m().remove()},w=({payload:e})=>m().textContent=p[e];const v=JSON.parse(document.querySelector("script#importmap").textContent).imports,b=document.body.querySelector("ldod-router");b.setAttribute("language",s()),b.fallback=()=>({path:"/not-found",mount:f,unMount:h});const S=await Object.keys(v).filter((e=>!e.startsWith("@"))).reduce((async(e,t)=>(await import(t).then((async t=>{const o=t.default,a=o.path;"/"===a?b.index=()=>o:a&&((await e)[a]=()=>o)})).catch((e=>console.error(e))),await e)),Promise.resolve({}));b.processRoutes(S);const k=new Worker("/ldod-mfes/shell/worker.js",{type:"module"}),L="/ldod-mfes/shell/style/fonts",E=[{family:"Work-Sans",src:`${L}/WorkSans-VariableFont_wght.ttf`,style:"normal",weight:"200 800",display:"optional"},{family:"Space-Mono",src:`${L}/space-mono/SpaceMono-Bold.ttf`,style:"normal",weight:700,display:"swap"},{family:"Ultra",src:`${L}/ultra/Ultra-Regular.ttf`,style:"normal",weight:400,display:"swap"},{family:"League-Gothic",src:`${L}/league-gothic/LeagueGothic-Regular.otf`,style:"normal",weight:400,display:"swap"},{family:"League-Gothic-Condensed",src:`${L}/league-gothic/LeagueGothic-CondensedRegular.otf`,style:"normal",weight:400,display:"swap"},{family:"Space-Mono",src:`${L}/space-mono/SpaceMono-Regular.ttf`,style:"normal",weight:400,display:"swap"}];E.forEach((e=>{k.postMessage({type:"font",url:e.src})})),k.postMessage({type:"css",url:"/ldod-mfes/shared/ui/bootstrap/root.css"});const M={font:(e,t)=>function(e,t){const{family:o,display:a,style:n,weight:s}=E.find((e=>e.src===t));document.fonts.add(new FontFace(o,e,{style:n,weight:s,display:a}))}(e,t),css:(e,t)=>function(e){const t=document.createElement("style");t.innerHTML=(new TextDecoder).decode(e),document.head.appendChild(t)}(e),script:(e,t)=>function(e){const t=document.createElement("script");t.type="module",t.innerHTML=(new TextDecoder).decode(e),document.body.appendChild(t)}(e)};k.onmessage=({data:{type:e,url:t,res:o}})=>M[e](o,t);globalThis?.addEventListener("pointermove",(()=>import("@core-ui")),{once:!0});
//# sourceMappingURL=shell.js.map
