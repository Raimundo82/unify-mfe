{"version":3,"file":"api-requests-b469b3fc.js","sources":["../src/external-deps.js","../src/api-requests.js"],"sourcesContent":["/** @format */\n\nconst text = window?.references?.text || {};\n\nexport const textFrag = xmlId => text.fragment?.(xmlId);\n","/** @format */\n\nimport { fetcher } from '@core';\n\nconst PATH = '/social';\nconst ADMIN_PATH = '/admin/social';\n\nexport const getCitationsList = async () => await fetcher.get(`${PATH}/twitter-citations`, null);\n\nexport const getTweetsToManage = async () => await fetcher.get(`${ADMIN_PATH}/tweets`, null);\n\nexport const generateCitations = async () => {\n\tdataProxy.reset = true;\n\treturn await fetcher.post(`${ADMIN_PATH}/tweets/generateCitations`, {});\n};\n\nexport const removeTweets = async () => {\n\tdataProxy.reset = true;\n\treturn await fetcher.post(`${ADMIN_PATH}/remove-tweets`, {});\n};\n\nconst API = {\n\tcitations: async () => await fetcher.get(`${PATH}/twitter-citations`, null),\n\tmanageCitations: async () => await fetcher.get(`${ADMIN_PATH}/tweets`, null),\n};\n\nconst data = {};\n\nconst handler = {\n\tset(target, prop, value) {\n\t\tif (prop === 'reset' && value) Reflect.ownKeys(target).forEach(key => delete target[key]);\n\t\telse target[prop] = value;\n\t\treturn true;\n\t},\n\tasync get(target, prop) {\n\t\tif (prop === 'reset') {\n\t\t\treturn Reflect.ownKeys(target).forEach(key => delete target[key]);\n\t\t}\n\t\tif (!target[prop]) target[prop] = await API[prop]();\n\t\treturn target[prop];\n\t},\n};\n\nexport const dataProxy = new Proxy(data, handler);\n"],"names":["text","window","references","textFrag","xmlId","fragment","ADMIN_PATH","generateCitations","async","dataProxy","reset","fetcher","post","removeTweets","API","citations","get","manageCitations","Proxy","set","target","prop","value","Reflect","ownKeys","forEach","key"],"mappings":"gCAEA,MAAMA,EAAOC,QAAQC,YAAYF,MAAQ,CAAA,EAE5BG,EAAWC,GAASJ,EAAKK,WAAWD,GCC3CE,EAAa,gBAMNC,EAAoBC,UAChCC,EAAUC,OAAQ,QACLC,EAAQC,KAAK,GAAGN,6BAAuC,CAAA,IAGxDO,EAAeL,UAC3BC,EAAUC,OAAQ,QACLC,EAAQC,KAAK,GAAGN,kBAA4B,CAAA,IAGpDQ,EAAM,CACXC,UAAWP,eAAkBG,EAAQK,IAAI,4BAA6B,MACtEC,gBAAiBT,eAAkBG,EAAQK,IAAI,GAAGV,WAAqB,OAoB3DG,EAAY,IAAIS,MAjBhB,CAAA,EAEG,CACfC,IAAA,CAAIC,EAAQC,EAAMC,KACJ,UAATD,GAAoBC,EAAOC,QAAQC,QAAQJ,GAAQK,SAAQC,UAAcN,EAAOM,KAC/EN,EAAOC,GAAQC,GACb,GAERd,IAAUY,MAAAA,EAAQC,IACJ,UAATA,EACIE,QAAQC,QAAQJ,GAAQK,SAAQC,UAAcN,EAAOM,MAExDN,EAAOC,KAAOD,EAAOC,SAAcP,EAAIO,MACrCD,EAAOC"}