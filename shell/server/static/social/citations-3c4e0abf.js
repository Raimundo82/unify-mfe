import{createElement as t,createFragment as e}from"@core";import{t as a,d as n}from"./api-requests-b469b3fc.js";const s=({citationsTitle:e,numberOfCitations:a})=>t("h3",{id:"title","data-key":"title","data-args":a,class:"text-center"},e),i={headers:["date","fragment","sourceLink","tweetText","location","country","username"],pt:{title:t=>`Citações no Twitter (${t})`,date:"Data",fragment:"Fragmento",sourceLink:"Tweet",tweetText:"Texto",location:"Localização Geográfica",country:"País",username:"Utilizador"},en:{title:t=>`Citations on Twitter (${t})`,date:"Date",fragment:"Fragment",sourceLink:"Tweet",tweetText:"Text",location:"Geographic Location",country:"Country",username:"User"},es:{title:t=>`Citas en Twitter (${t})`,date:"Fechas",fragment:"Fragmento",sourceLink:"Tweet",tweetText:"Texto",location:"Localización Geográfica",country:"País",username:"Usuario"}},o=t=>t<10?`0${t}`:t,r=e=>e?.map((e=>({tweetId:e.sourceLink.split("/")[5],date:`${o(e.formattedDate[2])}-${o(e.formattedDate[1])}-${e.formattedDate[0]} ${o(e.formattedDate[3])}:${o(e.formattedDate[4])}`,fragment:t("a",{is:"nav-to",to:a(e.xmlId)},e.title),sourceLink:t("a",{href:`${e.sourceLink}`,target:"_blank"},"Tweet"),tweetText:e.tweetText,location:e.location,country:e.country,username:t("a",{href:`https://twitter.com/${e.username}`,target:"_blank"},e.username),search:JSON.stringify(e)}))),l=({node:e,constants:a})=>t("ldod-table",{id:"twitterCitationsTable",classes:"table table-responsive-sm table-hover table-bordered",headers:a.headers,data:r(e.citations),language:e.language,constants:a,"data-searchkey":"tweetId"});await import("@ui/table.js");class c extends HTMLElement{constructor(){super()}get language(){return this.getAttribute("language")}get numberOfCitations(){return this.citations?.length}static get observedAttributes(){return["data","language"]}getConstants(t,...e){const a=i[this.language][t];return e.length?a(...e):a}async connectedCallback(){this.citations=await n.citations,this.citations&&(this.render(),this.addEventListeners())}attributeChangedCallback(t,e,a){this.handleChangeAttribute[t](e,a)}handleChangeAttribute={language:(t,e)=>{t&&t!==e&&this.querySelectorAll("[data-key]").forEach((t=>t.firstChild.textContent=t.dataset.args?this.getConstants(t.dataset.key,t.dataset.args):this.getConstants(t.dataset.key)))}};addEventListeners=()=>{this.addEventListener("ldod-table-searched",this.updateTitle)};updateTitle=({detail:t})=>{this.querySelector("h3#title").firstChild.textContent=this.getConstants("title",t.size)};render(){this.innerHTML="",this.citations&&this.appendChild(t(e,null,t(s,{citationsTitle:this.getConstants("title",this.numberOfCitations),numberOfCitations:this.numberOfCitations}),t(l,{node:this,constants:i})))}}!customElements.get("ldod-citations")&&customElements.define("ldod-citations",c);const d=(e,a)=>{document.querySelector(a).appendChild(t("ldod-citations",{language:e}))},u=()=>document.querySelector("ldod-citations")?.remove(),g="/citations";export{d as mount,g as path,u as unMount};
//# sourceMappingURL=citations-3c4e0abf.js.map
