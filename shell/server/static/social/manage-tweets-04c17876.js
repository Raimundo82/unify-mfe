import{createElement as e,createFragment as t}from"@core";import{g as a,r as n,t as s,d as r}from"./api-requests-b469b3fc.js";const i=({generate:t,remove:s,node:r})=>e("div",{style:{display:"flex",justifyContent:"center",flexWrap:"wrap",gap:"20px",marginTop:"50px"}},e("button",{class:"btn btn-success",onClick:async()=>{const e=await a();r.tweets=e,r.render()}},e("span",{class:"icon icon-plus"}),e("span",{"data-key":"generate"},t)),e("button",{class:"btn btn-danger",onClick:async()=>{const e=await n();r.tweets=e,r.render()}},e("span",{class:"icon icon-xmark"}),e("span",{"data-key":"remove","data-args":r.numberOfTweets},s))),o=({numberOfCitations:t,title:a})=>e("h3",{id:"title","data-key":"title","data-args":t,class:"text-center"},a),l=({headers:t,data:a})=>e("table",{class:"table table-stripped table-condensed table-bordered"},e("thead",null,e("tr",null,t.map((t=>e("th",{style:{textTransform:"capitalize"}},t))))),e("tbody",null,a.reverse().map((a=>e("tr",null,t.map((t=>e("td",null,a[t])))))))),d=t=>{const a=["xmlId","text","quote","start","end","startOffset","endOffset"];return t?.map((t=>({tweetId:t.sourceLink.split("/")[5],date:t.data.replace(".",""),fragment:e("a",{is:"nav-to",to:s(t.xmlId)},t.title),sourceLink:e("a",{href:`${t.sourceLink}`,target:"_blank"},"Tweet"),infoRanges:e(l,{headers:a,data:t.rangeList}),annotations:t.awareSetSize,retweets:`${t.numberOfRetweets}`,location:t.location,country:t.country,username:t.username,profile:t.userProfileURL,image:t.userImageURL,search:JSON.stringify(t)})))},g=({node:a,tableInfo:n,constants:s})=>e(t,null,e("p",{"data-key":"tableInfo","data-args":JSON.stringify(a.getTableInfoArgs())},n),e("ldod-table",{id:"tweetsTable",classes:"table table-responsive table-bordered",headers:s.headers,data:d(a.tweets.twitterCitations),language:a.language,constants:s,"data-searchkey":"tweetId"})),u={headers:["date","fragment","sourceLink","infoRanges","annotations","retweets","location","country","username","profile","image"],pt:{title:e=>`Gerir Tweets (${e})`,generate:"Gerar Citações",remove:e=>`Apagar Tweets (${e})`,tableInfo:({cits:e,ranges:t})=>`Citações: ${e}, Citações com info range: ${t}`,date:"Data",fragment:"Fragmento",sourceLink:"Tweet",infoRanges:"Info Ranges",annotations:"Número de Anotações",retweets:"Número de Retweets",location:"Localização",country:"País",username:"Utilizador",profile:"Perfil do Utilizador",image:"Imagem do Utilizador"},en:{title:e=>`Manage Tweets (${e})`,generate:"Generate Citations",remove:e=>`Delete Tweets (${e})`,tableInfo:({cits:e,ranges:t})=>`Citations: ${e}, Citations with info range: ${t}`,date:"Date",fragment:"Fragment",sourceLink:"Tweet",infoRanges:"Info Ranges",annotations:"Number of Annotations",retweets:"Number of Retweets",location:"Location",country:"Country",username:"Username",profile:"User Profile",image:"User image"},es:{title:e=>`Administrar Tweets (${e})`,generate:"Generar Citas",remove:e=>`Eliminar Tweets (${e})`,tableInfo:({cits:e,ranges:t})=>`Citas: ${e}, Citas com info range: ${t}`,date:"Data",fragment:"Fragmento",sourceLink:"Tweet",infoRanges:"Info Ranges",annotations:"Localização Geográfica",retweets:"País",location:"Localização",country:"País",username:"Utilizador",profile:"Perfil do Utilizador",image:"Imagem do Utilizador"}};await import("@ui/table.js");class c extends HTMLElement{constructor(){super()}get language(){return this.getAttribute("language")}get numberOfCitations(){return this.tweets.twitterCitations?.length}get numberOfCitationsWithInfoRanges(){return this.tweets?.numberOfCitationsWithInfoRanges}get numberOfTweets(){return this.tweets?.tweetsSize}get wrapper(){return this.querySelector("div#manageTweetsWrapper")}getConstants(e,...t){const a=u[this.language][e];return t.length?a(...t):a}static get observedAttributes(){return["data","language"]}async connectedCallback(){this.tweets=await r.manageCitations,this.tweets&&(this.appendChild(e("div",{id:"manageTweetsWrapper"})),this.render(),this.addEventListeners())}attributeChangedCallback(e,t,a){this.handleChangeAttribute[e](t,a)}handleChangeAttribute={language:(e,t)=>e&&e!==t&&this.handleChangedLanguage()};addEventListeners=()=>{this.addEventListener("ldod-table-searched",this.updateTitle)};updateTitle=({detail:e})=>{this.querySelector("h3#title").firstChild.textContent=this.getConstants("title",e.size)};handleChangedLanguage(){this.querySelectorAll("[data-key]").forEach((e=>e.firstChild.textContent=e.dataset.args?this.getConstants(e.dataset.key,JSON.parse(e.dataset.args)):this.getConstants(e.dataset.key)))}getTableInfoArgs(){return{cits:this.numberOfCitations,ranges:this.numberOfCitationsWithInfoRanges}}render(){this.wrapper.innerHTML="",this.wrapper.appendChild(e(t,null,e(o,{title:this.getConstants("title",this.numberOfCitations),numberOfCitations:this.numberOfCitations}),e(i,{generate:this.getConstants("generate"),remove:this.getConstants("remove",this.numberOfTweets),node:this}),e(g,{node:this,tableInfo:this.getConstants("tableInfo",this.getTableInfoArgs()),constants:u})))}}!customElements.get("ldod-manage-tweets")&&customElements.define("ldod-manage-tweets",c);const m=(t,a)=>{document.querySelector(a).appendChild(e("ldod-manage-tweets",{language:t}))},f=()=>document.querySelector("ldod-citations")?.remove(),h="/manage-tweets";export{m as mount,h as path,f as unMount};
//# sourceMappingURL=manage-tweets-04c17876.js.map
