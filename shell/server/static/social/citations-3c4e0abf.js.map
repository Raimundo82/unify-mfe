{"version":3,"file":"citations-3c4e0abf.js","sources":["../src/pages/citations/components/title.jsx","../src/pages/citations/constants.js","../src/pages/citations/components/data.jsx","../src/pages/citations/components/citations-table.jsx","../src/pages/citations/ldod-citations.jsx","../src/pages/citations/citations.jsx"],"sourcesContent":["export default ({ citationsTitle, numberOfCitations }) => {\n  return (\n    <h3\n      id=\"title\"\n      data-key=\"title\"\n      data-args={numberOfCitations}\n      class=\"text-center\">\n      {citationsTitle}\n    </h3>\n  );\n};\n","export default {\n  headers: [\n    'date',\n    'fragment',\n    'sourceLink',\n    'tweetText',\n    'location',\n    'country',\n    'username',\n  ],\n  pt: {\n    title: (val) => `Citações no Twitter (${val})`,\n    date: 'Data',\n    fragment: 'Fragmento',\n    sourceLink: 'Tweet',\n    tweetText: 'Texto',\n    location: 'Localização Geográfica',\n    country: 'País',\n    username: 'Utilizador',\n  },\n  en: {\n    title: (val) => `Citations on Twitter (${val})`,\n    date: 'Date',\n    fragment: 'Fragment',\n    sourceLink: 'Tweet',\n    tweetText: 'Text',\n    location: 'Geographic Location',\n    country: 'Country',\n    username: 'User',\n  },\n  es: {\n    title: (val) => `Citas en Twitter (${val})`,\n    date: 'Fechas',\n    fragment: 'Fragmento',\n    sourceLink: 'Tweet',\n    tweetText: 'Texto',\n    location: 'Localización Geográfica',\n    country: 'País',\n    username: 'Usuario',\n  },\n};\n","import { textFrag } from '@src/external-deps';\n\nconst getStringDate = (value) => (value < 10 ? `0${value}` : value);\n\nexport const getTableData = (citations) => {\n  return citations?.map((row) => {\n    return {\n      tweetId: row.sourceLink.split('/')[5],\n      date: `${getStringDate(row.formattedDate[2])}-${getStringDate(\n        row.formattedDate[1]\n      )}-${row.formattedDate[0]} ${getStringDate(\n        row.formattedDate[3]\n      )}:${getStringDate(row.formattedDate[4])}`,\n      fragment: (\n        <a is=\"nav-to\" to={textFrag(row.xmlId)}>\n          {row.title}\n        </a>\n      ),\n      sourceLink: (\n        <a href={`${row.sourceLink}`} target=\"_blank\">\n          Tweet\n        </a>\n      ),\n      tweetText: row.tweetText,\n      location: row.location,\n      country: row.country,\n      username: (\n        <a href={`https://twitter.com/${row.username}`} target=\"_blank\">\n          {row.username}\n        </a>\n      ),\n      search: JSON.stringify(row),\n    };\n  });\n};\n","import { getTableData } from './data';\n\nexport default ({ node, constants }) => {\n  return (\n    <ldod-table\n      id=\"twitterCitationsTable\"\n      classes=\"table table-responsive-sm table-hover table-bordered\"\n      headers={constants.headers}\n      data={getTableData(node.citations)}\n      language={node.language}\n      constants={constants}\n      data-searchkey=\"tweetId\"></ldod-table>\n  );\n};\n","/** @format */\n\nimport Title from './components/title.jsx';\nimport constants from './constants.js';\nimport CitationsTable from './components/citations-table.jsx';\nimport { dataProxy } from '../../api-requests.js';\nimport.meta.env.DEV ? await import('@ui/table-dev.js') : await import('@ui/table.js');\n\nexport class LdodCitations extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tget numberOfCitations() {\n\t\treturn this.citations?.length;\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['data', 'language'];\n\t}\n\n\tgetConstants(key, ...args) {\n\t\tconst constant = constants[this.language][key];\n\t\treturn args.length ? constant(...args) : constant;\n\t}\n\n\tasync connectedCallback() {\n\t\tthis.citations = await dataProxy.citations;\n\t\tif (!this.citations) return;\n\t\tthis.render();\n\t\tthis.addEventListeners();\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tthis.handleChangeAttribute[name](oldV, newV);\n\t}\n\n\thandleChangeAttribute = {\n\t\tlanguage: (oldV, newV) => {\n\t\t\tif (oldV && oldV !== newV) {\n\t\t\t\tthis.querySelectorAll('[data-key]').forEach(\n\t\t\t\t\tnode =>\n\t\t\t\t\t\t(node.firstChild.textContent = node.dataset.args\n\t\t\t\t\t\t\t? this.getConstants(node.dataset.key, node.dataset.args)\n\t\t\t\t\t\t\t: this.getConstants(node.dataset.key))\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t};\n\n\taddEventListeners = () => {\n\t\tthis.addEventListener('ldod-table-searched', this.updateTitle);\n\t};\n\n\tupdateTitle = ({ detail }) => {\n\t\tthis.querySelector('h3#title').firstChild.textContent = this.getConstants(\n\t\t\t'title',\n\t\t\tdetail.size\n\t\t);\n\t};\n\n\trender() {\n\t\tthis.innerHTML = '';\n\t\tif (!this.citations) return;\n\t\tthis.appendChild(\n\t\t\t<>\n\t\t\t\t<Title\n\t\t\t\t\tcitationsTitle={this.getConstants('title', this.numberOfCitations)}\n\t\t\t\t\tnumberOfCitations={this.numberOfCitations}\n\t\t\t\t/>\n\t\t\t\t<CitationsTable node={this} constants={constants} />\n\t\t\t</>\n\t\t);\n\t}\n}\n!customElements.get('ldod-citations') && customElements.define('ldod-citations', LdodCitations);\n","import './ldod-citations';\n\nconst mount = (lang, ref) => {\n  document\n    .querySelector(ref)\n    .appendChild(<ldod-citations language={lang}></ldod-citations>);\n};\nconst unMount = () => document.querySelector('ldod-citations')?.remove();\n\nconst path = '/citations';\n\nexport { mount, unMount, path };\n"],"names":["Title","citationsTitle","numberOfCitations","createElement","id","class","constants","headers","pt","title","val","date","fragment","sourceLink","tweetText","location","country","username","en","es","getStringDate","value","getTableData","citations","map","row","tweetId","split","formattedDate","is","to","textFrag","xmlId","href","target","search","JSON","stringify","CitationsTable","node","classes","data","language","import","LdodCitations","HTMLElement","constructor","this","getAttribute","length","observedAttributes","getConstants","key","args","constant","async","dataProxy","render","addEventListeners","attributeChangedCallback","name","oldV","newV","handleChangeAttribute","querySelectorAll","forEach","firstChild","textContent","dataset","addEventListener","updateTitle","detail","querySelector","size","innerHTML","appendChild","createFragment","customElements","get","define","mount","lang","ref","document","unMount","remove","path"],"mappings":"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"}