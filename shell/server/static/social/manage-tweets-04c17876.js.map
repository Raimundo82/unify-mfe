{"version":3,"file":"manage-tweets-04c17876.js","sources":["../src/pages/manage-tweets/components/buttons.jsx","../src/pages/manage-tweets/components/title.jsx","../src/pages/manage-tweets/components/info-ranges-table.jsx","../src/pages/manage-tweets/components/table-data.jsx","../src/pages/manage-tweets/components/tweets-table.jsx","../src/pages/manage-tweets/constants.js","../src/pages/manage-tweets/ldod-manage-tweets.jsx","../src/pages/manage-tweets/manage-tweets.jsx"],"sourcesContent":["import { generateCitations, removeTweets } from '@src/api-requests.js';\n\nexport default ({ generate, remove, node }) => {\n  const handleGenerateCitations = async () => {\n    const data = await generateCitations();\n    node.tweets = data;\n    node.render();\n  };\n\n  const handleRemoveCitations = async () => {\n    const data = await removeTweets();\n    node.tweets = data;\n    node.render();\n  };\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        justifyContent: 'center',\n        flexWrap: 'wrap',\n        gap: '20px',\n        marginTop: '50px',\n      }}>\n      <button class=\"btn btn-success\" onClick={handleGenerateCitations}>\n        <span class=\"icon icon-plus\"></span>\n        <span data-key=\"generate\">{generate}</span>\n      </button>\n      <button class=\"btn btn-danger\" onClick={handleRemoveCitations}>\n        <span class=\"icon icon-xmark\"></span>\n        <span data-key=\"remove\" data-args={node.numberOfTweets}>\n          {remove}\n        </span>\n      </button>\n    </div>\n  );\n};\n","export default ({ numberOfCitations, title }) => {\n  return (\n    <h3\n      id=\"title\"\n      data-key=\"title\"\n      data-args={numberOfCitations}\n      class=\"text-center\">\n      {title}\n    </h3>\n  );\n};\n","export default ({ headers, data }) => {\n  return (\n    <table class=\"table table-stripped table-condensed table-bordered\">\n      <thead>\n        <tr>\n          {headers.map((header) => (\n            <th style={{ textTransform: 'capitalize' }}>{header}</th>\n          ))}\n        </tr>\n      </thead>\n      <tbody>\n        {data.reverse().map((row) => (\n          <tr>\n            {headers.map((header) => {\n              return <td>{row[header]}</td>;\n            })}\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n};\n","import { textFrag } from '../../../external-deps';\nimport InfoRangesTable from './info-ranges-table';\n\nexport const getTableData = (citations) => {\n  const infoRangesHeaders = [\n    'xmlId',\n    'text',\n    'quote',\n    'start',\n    'end',\n    'startOffset',\n    'endOffset',\n  ];\n  return citations?.map((row) => {\n    return {\n      tweetId: row.sourceLink.split('/')[5],\n      date: row.data.replace('.', ''),\n      fragment: (\n        <a is=\"nav-to\" to={textFrag(row.xmlId)}>\n          {row.title}\n        </a>\n      ),\n      sourceLink: (\n        <a href={`${row.sourceLink}`} target=\"_blank\">\n          Tweet\n        </a>\n      ),\n      infoRanges: (\n        <InfoRangesTable headers={infoRangesHeaders} data={row.rangeList} />\n      ),\n      annotations: row.awareSetSize,\n      retweets: `${row.numberOfRetweets}`,\n      location: row.location,\n      country: row.country,\n      username: row.username,\n      profile: row.userProfileURL,\n      image: row.userImageURL,\n      search: JSON.stringify(row),\n    };\n  });\n};\n","import { getTableData } from './table-data.jsx';\n\nexport default ({ node, tableInfo, constants }) => {\n  return (\n    <>\n      <p\n        data-key=\"tableInfo\"\n        data-args={JSON.stringify(node.getTableInfoArgs())}>\n        {tableInfo}\n      </p>\n      <ldod-table\n        id=\"tweetsTable\"\n        classes=\"table table-responsive table-bordered\"\n        headers={constants.headers}\n        data={getTableData(node.tweets.twitterCitations)}\n        language={node.language}\n        constants={constants}\n        data-searchkey=\"tweetId\"></ldod-table>\n    </>\n  );\n};\n","export default {\n  headers: [\n    'date',\n    'fragment',\n    'sourceLink',\n    'infoRanges',\n    'annotations',\n    'retweets',\n    'location',\n    'country',\n    'username',\n    'profile',\n    'image',\n  ],\n  pt: {\n    title: (value) => `Gerir Tweets (${value})`,\n    generate: 'Gerar Citações',\n    remove: (tweets) => `Apagar Tweets (${tweets})`,\n    tableInfo: ({ cits, ranges }) =>\n      `Citações: ${cits}, Citações com info range: ${ranges}`,\n    date: 'Data',\n    fragment: 'Fragmento',\n    sourceLink: 'Tweet',\n    infoRanges: 'Info Ranges',\n    annotations: 'Número de Anotações',\n    retweets: 'Número de Retweets',\n    location: 'Localização',\n    country: 'País',\n    username: 'Utilizador',\n    profile: 'Perfil do Utilizador',\n    image: 'Imagem do Utilizador',\n  },\n  en: {\n    title: (value) => `Manage Tweets (${value})`,\n    generate: 'Generate Citations',\n    remove: (tweets) => `Delete Tweets (${tweets})`,\n    tableInfo: ({ cits, ranges }) =>\n      `Citations: ${cits}, Citations with info range: ${ranges}`,\n    date: 'Date',\n    fragment: 'Fragment',\n    sourceLink: 'Tweet',\n    infoRanges: 'Info Ranges',\n    annotations: 'Number of Annotations',\n    retweets: 'Number of Retweets',\n    location: 'Location',\n    country: 'Country',\n    username: 'Username',\n    profile: 'User Profile',\n    image: 'User image',\n  },\n  es: {\n    title: (value) => `Administrar Tweets (${value})`,\n    generate: 'Generar Citas',\n    remove: (tweets) => `Eliminar Tweets (${tweets})`,\n    tableInfo: ({ cits, ranges }) =>\n      `Citas: ${cits}, Citas com info range: ${ranges}`,\n    date: 'Data',\n    fragment: 'Fragmento',\n    sourceLink: 'Tweet',\n    infoRanges: 'Info Ranges',\n    annotations: 'Localização Geográfica',\n    retweets: 'País',\n    location: 'Localização',\n    country: 'País',\n    username: 'Utilizador',\n    profile: 'Perfil do Utilizador',\n    image: 'Imagem do Utilizador',\n  },\n};\n","/** @format */\n\nimport { dataProxy } from '../../api-requests.js';\nimport Buttons from './components/buttons.jsx';\nimport Title from './components/title.jsx';\nimport TweetsTable from './components/tweets-table.jsx';\nimport constants from './constants.js';\nimport.meta.env.DEV ? await import('@ui/table-dev.js') : await import('@ui/table.js');\n\nexport class LdodManageTweets extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tget numberOfCitations() {\n\t\treturn this.tweets.twitterCitations?.length;\n\t}\n\n\tget numberOfCitationsWithInfoRanges() {\n\t\treturn this.tweets?.numberOfCitationsWithInfoRanges;\n\t}\n\n\tget numberOfTweets() {\n\t\treturn this.tweets?.tweetsSize;\n\t}\n\n\tget wrapper() {\n\t\treturn this.querySelector('div#manageTweetsWrapper');\n\t}\n\n\tgetConstants(key, ...args) {\n\t\tconst constant = constants[this.language][key];\n\t\treturn args.length ? constant(...args) : constant;\n\t}\n\tstatic get observedAttributes() {\n\t\treturn ['data', 'language'];\n\t}\n\n\tasync connectedCallback() {\n\t\tthis.tweets = await dataProxy.manageCitations;\n\t\tif (!this.tweets) return;\n\t\tthis.appendChild(<div id=\"manageTweetsWrapper\"></div>);\n\t\tthis.render();\n\t\tthis.addEventListeners();\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tthis.handleChangeAttribute[name](oldV, newV);\n\t}\n\n\thandleChangeAttribute = {\n\t\tlanguage: (oldV, newV) => oldV && oldV !== newV && this.handleChangedLanguage(),\n\t};\n\n\taddEventListeners = () => {\n\t\tthis.addEventListener('ldod-table-searched', this.updateTitle);\n\t};\n\n\tupdateTitle = ({ detail }) => {\n\t\tthis.querySelector('h3#title').firstChild.textContent = this.getConstants(\n\t\t\t'title',\n\t\t\tdetail.size\n\t\t);\n\t};\n\n\thandleChangedLanguage() {\n\t\tthis.querySelectorAll('[data-key]').forEach(\n\t\t\tnode =>\n\t\t\t\t(node.firstChild.textContent = node.dataset.args\n\t\t\t\t\t? this.getConstants(node.dataset.key, JSON.parse(node.dataset.args))\n\t\t\t\t\t: this.getConstants(node.dataset.key))\n\t\t);\n\t}\n\n\tgetTableInfoArgs() {\n\t\tconst cits = this.numberOfCitations;\n\t\tconst ranges = this.numberOfCitationsWithInfoRanges;\n\t\treturn { cits, ranges };\n\t}\n\n\trender() {\n\t\tthis.wrapper.innerHTML = '';\n\t\tthis.wrapper.appendChild(\n\t\t\t<>\n\t\t\t\t<Title\n\t\t\t\t\ttitle={this.getConstants('title', this.numberOfCitations)}\n\t\t\t\t\tnumberOfCitations={this.numberOfCitations}\n\t\t\t\t/>\n\t\t\t\t<Buttons\n\t\t\t\t\tgenerate={this.getConstants('generate')}\n\t\t\t\t\tremove={this.getConstants('remove', this.numberOfTweets)}\n\t\t\t\t\tnode={this}\n\t\t\t\t/>\n\n\t\t\t\t<TweetsTable\n\t\t\t\t\tnode={this}\n\t\t\t\t\ttableInfo={this.getConstants('tableInfo', this.getTableInfoArgs())}\n\t\t\t\t\tconstants={constants}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t}\n}\n!customElements.get('ldod-manage-tweets') &&\n\tcustomElements.define('ldod-manage-tweets', LdodManageTweets);\n","import './ldod-manage-tweets.jsx';\n\nconst mount = (lang, ref) => {\n  document\n    .querySelector(ref)\n    .appendChild(<ldod-manage-tweets language={lang}></ldod-manage-tweets>);\n};\nconst unMount = () => document.querySelector('ldod-citations')?.remove();\n\nconst path = '/manage-tweets';\n\nexport { mount, unMount, path };\n"],"names":["Buttons","generate","remove","node","createElement","style","display","justifyContent","flexWrap","gap","marginTop","class","onClick","async","data","generateCitations","tweets","render","removeTweets","numberOfTweets","Title","numberOfCitations","title","id","InfoRangesTable","headers","map","header","textTransform","reverse","row","getTableData","citations","infoRangesHeaders","tweetId","sourceLink","split","date","replace","fragment","is","to","textFrag","xmlId","href","target","infoRanges","rangeList","annotations","awareSetSize","retweets","numberOfRetweets","location","country","username","profile","userProfileURL","image","userImageURL","search","JSON","stringify","TweetsTable","tableInfo","constants","createFragment","getTableInfoArgs","classes","twitterCitations","language","pt","value","cits","ranges","en","es","import","LdodManageTweets","HTMLElement","constructor","this","getAttribute","length","numberOfCitationsWithInfoRanges","tweetsSize","wrapper","querySelector","getConstants","key","args","constant","observedAttributes","dataProxy","manageCitations","appendChild","addEventListeners","attributeChangedCallback","name","oldV","newV","handleChangeAttribute","handleChangedLanguage","addEventListener","updateTitle","detail","firstChild","textContent","size","querySelectorAll","forEach","dataset","parse","innerHTML","customElements","get","define","mount","lang","ref","document","unMount","path"],"mappings":"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"}