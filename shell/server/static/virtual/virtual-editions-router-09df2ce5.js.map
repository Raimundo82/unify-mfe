{"version":3,"file":"virtual-editions-router-09df2ce5.js","sources":["../src/api-requests.js","../src/restricted-api-requests.js","../src/pages/virtual-editions/pages/index/components/create-ve/create-button.jsx","../src/pages/virtual-editions/pages/index/components/edition-actions/CancelParticipantIcon.jsx","../src/pages/virtual-editions/pages/index/components/edition-actions/ManageVEIcon.jsx","../src/pages/virtual-editions/pages/index/components/edition-actions/TableActionsPopover.jsx","../src/pages/virtual-editions/pages/index/components/edition-actions/SelectVEInput.jsx","../src/pages/virtual-editions/pages/index/components/edition-actions/SubmitParticipantIcon.jsx","../src/pages/virtual-editions/pages/index/components/ve-table.jsx","../src/pages/virtual-editions/pages/index/components/title.jsx","../src/pages/virtual-editions/pages/index/ldod-virtual-editions.jsx","../src/pages/virtual-editions/pages/index/virtual-editions.jsx","../src/pages/virtual-editions/virtual-editions-router.jsx"],"sourcesContent":["/** @format */\n\nimport { fetcher } from '@core';\n\nconst PATH = `/virtual/virtual-editions`;\n\nexport const getVirtualEditions = async () => await fetcher.get(PATH, null, window.token);\n\nexport const getVeGame = async gameId => await fetcher.get(`${PATH}/game/${gameId}`, null);\n","/** @format */\n\nimport { fetcher } from '@core';\n\nconst PATH = `/virtual/restricted`;\n\nexport const createVirtualEdition = async body =>\n\tawait fetcher.post(`${PATH}/create`, body, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const toggleSelectedVE = async ({ externalId, selected }) =>\n\tawait fetcher\n\t\t.get(`${PATH}/update-selected-ve/${selected}/${externalId}`, null, window.token)\n\t\t.then(data => {\n\t\t\tif (data?.ok === false) return Promise.reject(data);\n\t\t\treturn Promise.resolve(data);\n\t\t});\n\nexport const submitParticipation = async externalId =>\n\tawait fetcher\n\t\t.get(`${PATH}/participants/submit/${externalId}`, null, window.token)\n\t\t.then(data => {\n\t\t\tif (data?.ok === false) return Promise.reject(data);\n\t\t\treturn Promise.resolve(data);\n\t\t});\n\nexport const cancelParticipation = async externalId =>\n\tawait fetcher\n\t\t.get(`${PATH}/participants/cancel/${externalId}`, null, window.token)\n\t\t.then(data => {\n\t\t\tif (data?.ok === false) return Promise.reject(data);\n\t\t\treturn Promise.resolve(data);\n\t\t});\n\nexport const veAdminDelete = async id =>\n\tawait fetcher.get(`${PATH}/delete/${id}`, null, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const getVirtualEdition = async id =>\n\tawait fetcher.get(`${PATH}/virtual-edition/${id}`, null, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const getEditionGames = async id =>\n\tawait fetcher.get(`${PATH}/${id}/games`, null, window.token);\n\nexport const approveParticipant = async (id, username) =>\n\tawait fetcher\n\t\t.get(`${PATH}/${id}/participants/${username}/approve`, null, window.token)\n\t\t.then(data => {\n\t\t\tif (data?.ok === false) return Promise.reject(data);\n\t\t\treturn Promise.resolve(data);\n\t\t});\n\nexport const addParticipant = async (id, username) =>\n\tawait fetcher\n\t\t.get(`${PATH}/${id}/participants/${username}/add`, null, window.token)\n\t\t.then(data => {\n\t\t\tif (data?.ok === false) return Promise.reject(data);\n\t\t\treturn Promise.resolve(data);\n\t\t});\n\nexport const removeParticipant = async (id, username) =>\n\tawait fetcher\n\t\t.get(`${PATH}/${id}/participants/${username}/remove`, null, window.token)\n\t\t.then(data => {\n\t\t\tif (data?.ok === false) return Promise.reject(data);\n\t\t\treturn Promise.resolve(data);\n\t\t});\n\nexport const switchMemberRole = async (id, username) =>\n\tawait fetcher\n\t\t.get(`${PATH}/${id}/participants/${username}/role`, null, window.token)\n\t\t.then(data => {\n\t\t\tif (data?.ok === false) return Promise.reject(data);\n\t\t\treturn Promise.resolve(data);\n\t\t});\n\nexport const removeClassGame = async (id, gameId) =>\n\tawait fetcher.get(`${PATH}/${id}/games/${gameId}/remove`, null, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const createClassGame = async (id, gameBody) =>\n\tawait fetcher.post(`${PATH}/${id}/games/create`, gameBody, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const editVE = async (id, veBody) =>\n\tawait fetcher.post(`${PATH}/edit/${id}`, veBody, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const getVeIntersWithRecommendation = async id =>\n\tawait fetcher.get(`${PATH}/assisted/${id}`, null, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const setLinearVE = async (id, body) =>\n\tawait fetcher.post(`${PATH}/assisted/${id}/linear`, body, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const saveLinerVE = async (id, body) =>\n\tawait fetcher.post(`${PATH}/assisted/${id}/linear/save`, body, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const getVeIntersForManual = async id =>\n\tawait fetcher.get(`${PATH}/manual/${id}`, null, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n\nexport const saveReorderedVEInters = async (id, inters) =>\n\tawait fetcher.post(`${PATH}/manual/${id}/mutate`, inters, window.token).then(data => {\n\t\tif (data?.ok === false) return Promise.reject(data);\n\t\treturn Promise.resolve(data);\n\t});\n","/** @format */\n\nconst onCreateVEModal = () =>\n\tdocument\n\t\t.querySelector('ldod-virtual-editions ldod-bs-modal#virtual-ve-create-modal')\n\t\t.toggleAttribute('show');\n\nexport default function ({ node }) {\n\treturn (\n\t\t<>\n\t\t\t<div id=\"virtual-createButton\" class=\"flex-center mb-4\">\n\t\t\t\t<button class=\"btn btn-success\" onClick={onCreateVEModal}>\n\t\t\t\t\t<span class=\"icon icon-plus\"></span>\n\t\t\t\t\t<span data-virtualkey=\"createVirtualEdition\">\n\t\t\t\t\t\t{node.getConstants('createVirtualEdition')}\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t\t<ldod-tooltip\n\t\t\t\t\tdata-ref=\"#virtual-createButton button\"\n\t\t\t\t\tdata-virtualtooltipkey=\"createVeInfo\"\n\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\twidth=\"300px\"\n\t\t\t\t\tcontent={node.getConstants('createVeInfo')}></ldod-tooltip>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","import { cancelParticipation } from '@src/restricted-api-requests';\nimport { errorPublisher } from '../../../../../../event-module';\n\nconst onCancelParticipation = (node, id) => {\n  cancelParticipation(id)\n    .then((ve) => node.updateEdition(ve))\n    .catch((error) => {\n      console.error(error);\n      errorPublisher(error?.message);\n    });\n};\n\nexport default ({ node, edition }) => {\n  return (\n    <>\n      <span\n        id=\"action_4\"\n        class=\"icon icon-minus\"\n        data-external-id={edition.externalId}\n        onClick={() => onCancelParticipation(node, edition.externalId)}></span>\n      <ldod-tooltip\n        data-ref={`tr[id=\"${edition.externalId}\"] #action_4`}\n        data-virtualtooltipkey={`action_4`}\n        placement=\"right\"\n        content={node.getConstants(`action_4`)}></ldod-tooltip>\n    </>\n  );\n};\n","import TableActionsPopover from './TableActionsPopover';\n\nconst onManageVirtualEdition = (node, edition, target) => {\n  node.edition = node.virtualEditions.find(\n    ({ externalId }) => externalId === edition.externalId\n  );\n  const popover = node.querySelector('ldod-popover');\n  popover.element = TableActionsPopover(node);\n  popover.target = target;\n  popover.toggleAttribute('show');\n};\n\nexport default ({ node, edition }) => {\n  return (\n    <>\n      <span\n        open-popover\n        id=\"action_2\"\n        class=\"icon icon-edit\"\n        onClick={({ target }) =>\n          onManageVirtualEdition(node, edition, target)\n        }></span>\n      <ldod-tooltip\n        data-ref={`tr[id=\"${edition.externalId}\"] #action_2`}\n        data-virtualtooltipkey={`action_2`}\n        placement=\"right\"\n        content={node.getConstants(`action_2`)}></ldod-tooltip>\n    </>\n  );\n};\n","import style from './manageStyle.css?inline';\n\nexport default (root) => {\n  return () => (\n    <>\n      <style>{style}</style>\n      <ul class=\"manage-menu\" id=\"virtual-managePopover\">\n        <li>\n          <a class=\"manage-item\" onClick={root.onGamesModal}>\n            <span class=\"icon-popover icon-popover-play\"></span>\n            <span data-virtualkey=\"game\">{root.getConstants('game')}</span>\n          </a>\n        </li>\n        <li>\n          <a class=\"manage-item\" onClick={root.onTaxonomy}>\n            <span class=\"icon-popover icon-popover-taxonomy\"></span>\n            <span data-virtualkey=\"taxonomy\">\n              {root.getConstants('taxonomy')}\n            </span>\n          </a>\n        </li>\n        <li>\n          <a class=\"manage-item\" onClick={root.onManualModal}>\n            <span class=\"icon-popover icon-popover-edit\"></span>\n            <span data-virtualkey=\"manualSort\">\n              {root.getConstants('manualSort')}\n            </span>\n          </a>\n        </li>\n        <li>\n          <a class=\"manage-item\" onClick={root.onAssistModal}>\n            <span class=\"icon-popover icon-popover-assist\"></span>\n            <span data-virtualkey=\"assisted\">\n              {root.getConstants('assisted')}\n            </span>\n          </a>\n        </li>\n        <li>\n          <a class=\"manage-item\" onClick={root.onEditorsModal}>\n            <span class=\"icon-popover icon-popover-users\"></span>\n            <span data-virtualkey=\"editors\">\n              {root.getConstants('editors')}\n            </span>\n          </a>\n        </li>\n        {root.edition?.member?.admin && (\n          <>\n            <li>\n              <a class=\"manage-item\" onClick={root.onEditVe}>\n                <span class=\"icon-popover icon-popover-pen\"></span>\n                <span data-virtualkey=\"edit\">{root.getConstants('edit')}</span>\n              </a>\n            </li>\n            <li>\n              <a class=\"manage-item\" onClick={root.onRemoveVE}>\n                <span class=\"icon-popover icon-popover-trash\"></span>\n                <span data-virtualkey=\"remove\">\n                  {root.getConstants('remove')}\n                </span>\n              </a>\n            </li>\n          </>\n        )}\n      </ul>\n    </>\n  );\n};\n","/** @format */\n\nimport { toggleSelectedVE } from '@src/restricted-api-requests';\nimport { errorPublisher, selectedVePublisher } from '@src/event-module';\nimport { selectedVEs } from '../../../../../../event-module';\n\nconst onCheckboxChange = async (node, edition, target) => {\n\tconst ed = {\n\t\tname: edition.acronym,\n\t\texternalId: edition.externalId,\n\t\tselected: target.checked,\n\t};\n\tconst vEdition = node.user\n\t\t? await toggleSelectedVE(ed).catch(({ message }) => errorPublisher(message))\n\t\t: node.virtualEditions.find(ve => {\n\t\t\t\tif (ve.externalId === ed.externalId) {\n\t\t\t\t\tve.selected = ed.selected;\n\t\t\t\t\treturn ve;\n\t\t\t\t}\n\t\t  });\n\n\tif (vEdition) {\n\t\tselectedVePublisher(ed);\n\t\tnode.updateEdition(vEdition);\n\t}\n};\n\nexport default ({ node, edition }) => {\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\tid=\"action_1\"\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tstyle={{ height: '15px', width: '15px' }}\n\t\t\t\tchecked={edition.selected || selectedVEs.includes(edition.acronym)}\n\t\t\t\tonChange={({ target }) => onCheckboxChange(node, edition, target)}\n\t\t\t/>\n\t\t\t<ldod-tooltip\n\t\t\t\tdata-ref={`tr[id=\"${edition.externalId}\"] #action_1`}\n\t\t\t\tdata-virtualtooltipkey={`action_1`}\n\t\t\t\tplacement=\"left\"\n\t\t\t\tcontent={node.getConstants(`action_1`)}></ldod-tooltip>\n\t\t</>\n\t);\n};\n","import { submitParticipation } from '@src/restricted-api-requests';\n\nconst onSubmitParticipation = (node, id) => {\n  submitParticipation(id)\n    .then((ve) => node.updateEdition(ve))\n    .catch((error) => {\n      console.error(error);\n      errorPublisher(error?.message);\n    });\n};\nexport default ({ node, edition }) => {\n  return (\n    <>\n      <span\n        id=\"action_3\"\n        class=\"icon icon-add\"\n        onClick={() => onSubmitParticipation(node, edition.externalId)}></span>\n      <ldod-tooltip\n        data-ref={`tr[id=\"${edition.externalId}\"] #action_3`}\n        data-virtualtooltipkey={`action_3`}\n        placement=\"right\"\n        content={node.getConstants(`action_3`)}></ldod-tooltip>\n    </>\n  );\n};\n","/** @format */\n\nimport references from '@src/references';\nimport CancelParticipantIcon from './edition-actions/CancelParticipantIcon';\nimport ManageVEIcon from './edition-actions/ManageVEIcon';\nimport SelectVEInput from './edition-actions/SelectVEInput';\nimport SubmitParticipantIcon from './edition-actions/SubmitParticipantIcon';\n\nconst LDOD_ARCIVE_ARCHIVE = 'LdoD-Arquivo';\n\nconst isMember = ve => ve.member?.active;\nconst isPending = ve => ve.member?.pending;\nconst canBeAdded = ve => ve.pub && ve.member?.canBeAdded;\nconst isLdodEdition = ve => ve.acronym === LDOD_ARCIVE_ARCHIVE;\n\nconst getTableData = node => {\n\treturn node.virtualEditions\n\t\t.filter(\n\t\t\tve => (ve.pub && !isLdodEdition(ve)) || ve.activeMembers.includes(node.user?.username)\n\t\t)\n\t\t.map(ve => {\n\t\t\treturn {\n\t\t\t\texternalId: ve.externalId,\n\t\t\t\tdata: () => ({\n\t\t\t\t\tacronym: ve.acronym,\n\t\t\t\t\ttitle: (\n\t\t\t\t\t\t<a is=\"nav-to\" to={references.virtualEdition(ve.acronym)}>\n\t\t\t\t\t\t\t{ve.title}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t),\n\t\t\t\t\tdate: ve.date,\n\t\t\t\t\taccess: (\n\t\t\t\t\t\t<span data-key={ve.pub ? 'public' : 'private'}>\n\t\t\t\t\t\t\t{ve.pub ? node.getConstants('public') : node.getConstants('private')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t),\n\n\t\t\t\t\tactions: (\n\t\t\t\t\t\t<div class=\"actions-containers\">\n\t\t\t\t\t\t\t{!isLdodEdition(ve) && <SelectVEInput node={node} edition={ve} />}\n\t\t\t\t\t\t\t{isMember(ve) && <ManageVEIcon node={node} edition={ve} />}\n\t\t\t\t\t\t\t{canBeAdded(ve) && <SubmitParticipantIcon node={node} edition={ve} />}\n\t\t\t\t\t\t\t{isPending(ve) && <CancelParticipantIcon node={node} edition={ve} />}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t),\n\t\t\t\t}),\n\t\t\t\tsearch: JSON.stringify(ve),\n\t\t\t};\n\t\t});\n};\n\nexport default ({ node, constants }) => {\n\treturn (\n\t\t<>\n\t\t\t<ldod-table\n\t\t\t\tlanguage={node.language}\n\t\t\t\tid=\"virtual-virtualEditionsTable\"\n\t\t\t\tclasses=\"table  table-hover\"\n\t\t\t\theaders={constants.headersVe}\n\t\t\t\tdata={getTableData(node)}\n\t\t\t\tconstants={constants}\n\t\t\t\tdata-searchkey=\"externalId\"></ldod-table>\n\t\t\t{[1, 2, 3, 4].map(ind => (\n\t\t\t\t<ldod-tooltip\n\t\t\t\t\tdata-ref={`table#virtual-virtualEditionsTable thead>tr th:nth-child(${ind})`}\n\t\t\t\t\tdata-virtualtooltipkey={`headerVeInfo_${ind}`}\n\t\t\t\t\tplacement=\"left\"\n\t\t\t\t\tcontent={node.getConstants(`headerVeInfo_${ind++}`)}></ldod-tooltip>\n\t\t\t))}\n\t\t</>\n\t);\n};\n","\nexport default function ({ node }) {\n  return (\n    <div class=\"flex-center\">\n      <h3 data-virtualkey=\"virtualEditions\" class=\"text-center\">\n        {node.getConstants('virtualEditions')}\n      </h3>\n      <span id=\"virtual-titleTooltip\" class=\"icon-flex icon-info\"></span>\n      <ldod-tooltip\n        data-ref=\"span#virtual-titleTooltip\"\n        data-virtualtooltipkey=\"virtualEditionsTitleInfo\"\n        placement=\"top\"\n        light\n        width=\"250px\"\n        content={node.getConstants('virtualEditionsTitleInfo')}></ldod-tooltip>\n    </div>\n  )\n}","/** @format */\n\nimport { getVirtualEditions } from '@src/api-requests';\nimport {\n\tcreateVirtualEdition,\n\tgetEditionGames,\n\tgetVeIntersForManual,\n\tgetVeIntersWithRecommendation,\n\tgetVirtualEdition,\n\tveAdminDelete,\n} from '@src/restricted-api-requests';\nimport constants from '../../../constants';\nimport CreateButton from './components/create-ve/create-button';\nimport VETable from './components/ve-table';\nimport Title from './components/title';\nimport { errorPublisher, selectedVEs } from '../../../../event-module';\nimport.meta.env.DEV ? await import('@ui/table-dev.js') : await import('@ui/table.js');\n\nlet gamesModal;\nlet taxonomy;\n\nexport class LdodVirtualEditions extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tget wrapper() {\n\t\treturn this.querySelector('div#virtualEditionsWrapper');\n\t}\n\n\tget veTable() {\n\t\treturn this.querySelector('div#virtual-virtualEditionsContainer');\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['language'];\n\t}\n\n\tgetConstants(key) {\n\t\treturn constants[this.language][key];\n\t}\n\n\tconnectedCallback() {\n\t\tthis.appendChild(<div id=\"virtualEditionsWrapper\"></div>);\n\t\tthis.sortVirtualEditions();\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tthis.onChangedAttribute[name](oldV, newV);\n\t}\n\n\trender() {\n\t\tthis.wrapper.innerHTML = '';\n\t\tthis.wrapper.appendChild(\n\t\t\t<>\n\t\t\t\t<Title node={this} />\n\t\t\t\t<ldod-popover></ldod-popover>\n\t\t\t\t<CreateButton node={this} />\n\t\t\t\t<div id=\"virtual-virtualEditionsContainer\">\n\t\t\t\t\t<VETable node={this} constants={constants} />\n\t\t\t\t</div>\n\t\t\t\t<ldod-ve-editors language={this.language}></ldod-ve-editors>\n\t\t\t\t<ldod-ve-games language={this.language}></ldod-ve-games>\n\t\t\t\t<ldod-ve-edit language={this.language}></ldod-ve-edit>\n\t\t\t\t<ldod-ve-assisted language={this.language}></ldod-ve-assisted>\n\t\t\t\t<ldod-ve-manual language={this.language}></ldod-ve-manual>\n\t\t\t\t<ldod-ve-taxonomy language={this.language}></ldod-ve-taxonomy>\n\t\t\t\t<ldod-bs-modal id=\"virtual-ve-create-modal\" dialog-class=\"modal-lg\">\n\t\t\t\t\t<h4 data-virtual-key=\"modalTitle\" slot=\"header-slot\">\n\t\t\t\t\t\t{this.getConstants('modalTitle')}\n\t\t\t\t\t</h4>\n\t\t\t\t\t<div slot=\"body-slot\">\n\t\t\t\t\t\t<create-ve-form node={this}></create-ve-form>\n\t\t\t\t\t</div>\n\t\t\t\t</ldod-bs-modal>\n\t\t\t</>\n\t\t);\n\t}\n\n\tsortVirtualEditions = () => {\n\t\tthis.virtualEditions\n\t\t\t.sort((ed1, ed2) => ed1.acronym.localeCompare(ed2.acronym))\n\t\t\t.sort((ed1, ed2) => +ed2.member?.pending - +ed1.member?.pending)\n\t\t\t.sort((ed1, ed2) => +ed2.member?.active - +ed1.member?.active)\n\t\t\t.sort(\n\t\t\t\t(ed1, ed2) =>\n\t\t\t\t\t+(ed2.selected || selectedVEs.includes(ed2.acronym)) -\n\t\t\t\t\t(+ed1.selected || selectedVEs.includes(ed1.acronym))\n\t\t\t);\n\t\tthis.render();\n\t\tthis.addEventListeners();\n\t};\n\n\tupdateEdition = edition => {\n\t\tconst index = this.virtualEditions.map(ve => ve.externalId).indexOf(edition.externalId);\n\t\tthis.virtualEditions[index] = {\n\t\t\t...this.virtualEditions[index],\n\t\t\t...edition,\n\t\t};\n\n\t\tthis.sortVirtualEditions();\n\t};\n\n\tupdateTable = async () => {\n\t\tconst data = await getVirtualEditions();\n\t\tthis.virtualEditions = data.virtualEditions;\n\t\tthis.user = data.user;\n\t\tthis.sortVirtualEditions();\n\t};\n\n\tonChangedAttribute = {\n\t\tlanguage: (oldV, newV) => oldV && oldV !== newV && this.onChangedLanguage(oldV, newV),\n\t};\n\n\tonChangedLanguage = () => {\n\t\tthis.querySelectorAll('[language]').forEach(ele =>\n\t\t\tele.setAttribute('language', this.language)\n\t\t);\n\n\t\tthis.querySelectorAll('[data-virtual-key]').forEach(node => {\n\t\t\tnode.firstChild.textContent = this.getConstants(node.dataset.virtualKey);\n\t\t});\n\n\t\t// replace all by the above\n\t\tthis.querySelectorAll('[data-virtualkey]').forEach(node => {\n\t\t\tnode.firstChild.textContent = this.getConstants(node.dataset.virtualkey);\n\t\t});\n\n\t\tthis.querySelectorAll('[data-virtual-tooltip-key]').forEach(tooltip => {\n\t\t\tconsole.log(tooltip.dataset);\n\t\t\ttooltip.setAttribute('content', this.getConstants(tooltip.dataset.virtualTooltipKey));\n\t\t});\n\n\t\t// replace all by the above\n\t\tthis.querySelectorAll('[data-virtualtooltipkey]').forEach(tooltip =>\n\t\t\ttooltip.setAttribute('content', this.getConstants(tooltip.dataset.virtualtooltipkey))\n\t\t);\n\t};\n\n\taddEventListeners = () => {\n\t\tthis.wrapper.addEventListener('pointerenter', onWrapperEnter, { once: true });\n\t};\n\n\t//actions\n\n\tonCreateVE = e => {\n\t\te.preventDefault();\n\t\tconst veDto = Object.fromEntries(new FormData(e.target));\n\t\tcreateVirtualEdition(veDto)\n\t\t\t.then(({ virtualEditions, user }) => {\n\t\t\t\tthis.virtualEditions = virtualEditions;\n\t\t\t\tthis.user = user;\n\t\t\t\tthis.sortVirtualEditions();\n\t\t\t})\n\t\t\t.catch(error => onError(error?.message || ''));\n\t};\n\n\tonGamesModal = async () => {\n\t\tif (!gamesModal) gamesModal = await import('./components/games/ldod-ve-games');\n\t\tconst ldodVeGames = this.querySelector('ldod-ve-games');\n\t\tldodVeGames.edition = this.edition;\n\t\tgetEditionGames(this.edition.externalId)\n\t\t\t.then(data => {\n\t\t\t\tldodVeGames.parent = this;\n\t\t\t\tldodVeGames.updateData(data);\n\t\t\t\tldodVeGames.show();\n\t\t\t})\n\t\t\t.catch(onError);\n\t};\n\n\tonTaxonomy = async () => {\n\t\tif (!taxonomy) taxonomy = await import('./components/taxonomy/ldod-ve-taxonomy');\n\t\tconst ldodVeTaxonomy = this.querySelector('ldod-ve-taxonomy');\n\t\tldodVeTaxonomy.parent = this;\n\t\tldodVeTaxonomy.toggleAttribute('show');\n\t};\n\n\tonManualModal = async () => {\n\t\tawait import('./components/manual/ldod-ve-manual');\n\t\tconst ldodVeManual = this.querySelector('ldod-ve-manual');\n\t\tldodVeManual.edition = this.edition;\n\t\tgetVeIntersForManual(this.edition.externalId)\n\t\t\t.then(data => {\n\t\t\t\tldodVeManual.parent = this;\n\t\t\t\tldodVeManual.inters = data;\n\t\t\t\tldodVeManual.toggleAttribute('show', true);\n\t\t\t})\n\t\t\t.catch(onError);\n\t};\n\n\tonAssistModal = async () => {\n\t\tawait import('./components/assisted/ldod-ve-assisted');\n\t\tconst ldodVeAssisted = this.querySelector('ldod-ve-assisted');\n\t\tldodVeAssisted.edition = this.edition;\n\t\tgetVeIntersWithRecommendation(this.edition.externalId)\n\t\t\t.then(data => {\n\t\t\t\tldodVeAssisted.parent = this;\n\t\t\t\tldodVeAssisted.updateData(data);\n\t\t\t\tldodVeAssisted.toggleAttribute('show', true);\n\t\t\t})\n\t\t\t.catch(onError);\n\t};\n\n\tonEditorsModal = async () => {\n\t\tawait import('./components/editors/ldod-ve-editors');\n\t\tconst element = this.querySelector('ldod-ve-editors');\n\t\tgetVirtualEdition(this.edition.externalId)\n\t\t\t.then(data => {\n\t\t\t\telement.edition = data;\n\t\t\t\telement.parent = this;\n\t\t\t\telement.toggleAttribute('show');\n\t\t\t})\n\t\t\t.catch(onError);\n\t};\n\n\tonEditVe = async () => {\n\t\tawait import('./components/edit-ve/ldod-ve-edit.jsx');\n\t\tconst ldodVeEdit = this.querySelector('ldod-ve-edit');\n\t\tldodVeEdit.edition = this.edition;\n\t\tldodVeEdit.parent = this;\n\t\tldodVeEdit.toggleAttribute('show');\n\t};\n\n\tonRemoveVE = async () => {\n\t\tif (!confirm(`Delete ${this.edition.acronym} ?`)) return;\n\t\tveAdminDelete(this.edition.externalId)\n\t\t\t.then(({ virtualEditions, user }) => {\n\t\t\t\tthis.virtualEditions = virtualEditions;\n\t\t\t\tthis.user = user;\n\t\t\t\tthis.sortVirtualEditions();\n\t\t\t\tthis.edition = null;\n\t\t\t})\n\t\t\t.catch(onError);\n\t};\n}\n!customElements.get('ldod-virtual-editions') &&\n\tcustomElements.define('ldod-virtual-editions', LdodVirtualEditions);\n\nfunction onWrapperEnter() {\n\timport('@ui/modal-bs.js');\n\timport('@ui/tooltip.js');\n\timport('./components/create-ve/create-ve-form/create-ve-form.js');\n}\n\nfunction onError(error) {\n\tconsole.error(error);\n\terrorPublisher(error.message);\n}\n","/** @format */\n\nimport { getVirtualEditions } from '@src/api-requests.js';\nimport './ldod-virtual-editions.jsx';\n\nconst mount = async (lang, ref) => {\n\tconst virtualEditionsData = await getVirtualEditions();\n\tif (virtualEditionsData)\n\t\tdocument\n\t\t\t.querySelector(ref)\n\t\t\t.appendChild(\n\t\t\t\t<ldod-virtual-editions\n\t\t\t\t\tlanguage={lang}\n\t\t\t\t\tvirtualEditions={virtualEditionsData.virtualEditions}\n\t\t\t\t\tuser={virtualEditionsData.user}\n\t\t\t\t\tselectedVE={virtualEditionsData.user?.selectedVE || []}></ldod-virtual-editions>\n\t\t\t);\n};\n\nconst unMount = () => document.querySelector('ldod-virtual-editions')?.remove();\n\nconst path = '/virtual-editions';\n\nexport const index = () => ({\n\tmount,\n\tunMount,\n\tpath,\n});\n","import { index } from './pages/index/virtual-editions';\n\nconst path = '/virtual-editions';\n\nconst mount = async (lang, ref) => {\n  document\n    .querySelector(ref)\n    .appendChild(<VirtualEditionsRouter language={lang} />);\n};\nconst unMount = () => {\n  document.querySelector('ldod-router#virtualEditions-router')?.remove();\n};\nexport { path, mount, unMount };\n\nexport const isDev = () => import.meta.env.DEV;\n\nconst routes = {\n  '/:veId/game/:gameId': async () => await import('./pages/game/ve-class-game'),\n};\n\nconst VirtualEditionsRouter = ({ language }) => (\n  <ldod-router\n    id=\"virtualEditions-router\"\n    base={isDev() ? '' : import.meta.env.VITE_BASE}\n    route=\"/virtual/virtual-editions\"\n    index={index}\n    routes={routes}\n    language={language}></ldod-router>\n);\n"],"names":["PATH","getVirtualEditions","async","fetcher","get","window","token","getVeGame","gameId","approveParticipant","id","username","then","data","ok","Promise","reject","resolve","addParticipant","removeParticipant","switchMemberRole","removeClassGame","createClassGame","gameBody","post","editVE","veBody","setLinearVE","body","saveLinerVE","saveReorderedVEInters","inters","onCreateVEModal","document","querySelector","toggleAttribute","CreateButton","node","createElement","createFragment","class","onClick","getConstants","placement","width","content","onCancelParticipation","externalId","cancelParticipation","ve","updateEdition","catch","error","console","errorPublisher","message","CancelParticipantIcon","edition","onManageVirtualEdition","target","virtualEditions","find","popover","element","root","onGamesModal","onTaxonomy","onManualModal","onAssistModal","onEditorsModal","member","admin","onEditVe","onRemoveVE","TableActionsPopover","ManageVEIcon","onCheckboxChange","ed","name","acronym","selected","checked","vEdition","user","toggleSelectedVE","selectedVePublisher","SelectVEInput","type","style","height","selectedVEs","includes","onChange","onSubmitParticipation","submitParticipation","SubmitParticipantIcon","isMember","active","isPending","pending","canBeAdded","pub","isLdodEdition","getTableData","filter","activeMembers","map","title","is","to","references","virtualEdition","date","access","actions","search","JSON","stringify","VETable","constants","language","classes","headers","headersVe","ind","Title","light","gamesModal","taxonomy","import","LdodVirtualEditions","HTMLElement","constructor","this","getAttribute","wrapper","veTable","observedAttributes","key","connectedCallback","appendChild","sortVirtualEditions","attributeChangedCallback","oldV","newV","onChangedAttribute","render","innerHTML","slot","sort","ed1","ed2","localeCompare","addEventListeners","index","indexOf","updateTable","onChangedLanguage","querySelectorAll","forEach","ele","setAttribute","firstChild","textContent","dataset","virtualKey","virtualkey","tooltip","log","virtualTooltipKey","virtualtooltipkey","addEventListener","onWrapperEnter","once","onCreateVE","e","preventDefault","createVirtualEdition","Object","fromEntries","FormData","onError","ldodVeGames","getEditionGames","parent","updateData","show","ldodVeTaxonomy","ldodVeManual","getVeIntersForManual","ldodVeAssisted","getVeIntersWithRecommendation","getVirtualEdition","ldodVeEdit","confirm","veAdminDelete","customElements","define","mount","lang","ref","virtualEditionsData","selectedVE","unMount","remove","path","routes","VirtualEditionsRouter","base","route"],"mappings":"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"}