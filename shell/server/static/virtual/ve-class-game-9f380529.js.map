{"version":3,"file":"ve-class-game-9f380529.js","sources":["../src/pages/virtual-editions/pages/game/class-game-component.jsx","../src/pages/virtual-editions/pages/game/ldod-ve-class-game.jsx","../src/pages/virtual-editions/pages/game/ve-class-game.js"],"sourcesContent":["/** @format */\n\nimport.meta.env.DEV ? await import('@ui/table-dev.js') : await import('@ui/table.js');\n\nexport default ({ node }) => {\n\treturn (\n\t\t<div>\n\t\t\t<h3 class=\"text-center\">\n\t\t\t\t<span data-virtual-key=\"game\">{node.getConstants('game')}</span>:{' '}\n\t\t\t\t<span>{node.game.veTitle}</span>\n\t\t\t</h3>\n\t\t\t<div id=\"gameData\">\n\t\t\t\t<h4>\n\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t<span data-virtual-key=\"winner\">{node.getConstants('winner')}</span>\n\t\t\t\t\t\t<span>: </span>\n\t\t\t\t\t\t<span>{node.game.winnerUsername}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"text-center\">\n\t\t\t\t\t\t<span data-virtual-key=\"category\">{node.getConstants('category')}</span>\n\t\t\t\t\t\t<span>: </span>\n\t\t\t\t\t\t<span>{node.game.winnerUsername}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</h4>\n\t\t\t</div>\n\t\t\t<ldod-table\n\t\t\t\tid=\"virtual-veClassGameTable\"\n\t\t\t\tclasses=\"table  table-hover\"\n\t\t\t\theaders={node.constants.gameTable}\n\t\t\t\tdata={node.game.participants\n\t\t\t\t\t.sort((a, b) => b.score - a.score)\n\t\t\t\t\t.map((inter, index) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\texternalId: inter.externalId,\n\t\t\t\t\t\t\tposition: ++index,\n\t\t\t\t\t\t\tusername: inter.username,\n\t\t\t\t\t\t\tscore: inter.score.toString(),\n\t\t\t\t\t\t\tsearch: JSON.stringify(inter),\n\t\t\t\t\t\t};\n\t\t\t\t\t})}\n\t\t\t\tconstants={node.constants}\n\t\t\t\tlanguage={node.language}\n\t\t\t\tdata-searchkey=\"externalId\"></ldod-table>{' '}\n\t\t</div>\n\t);\n};\n","import { getVeGame } from '@src/api-requests';\nimport constants from '../../../constants';\nimport ClassGameComponent from './class-game-component';\nimport style from '../../../edition/ve-style.css';\n\nexport class LdodVeClassGame extends HTMLElement {\n  constructor(lang) {\n    super();\n    this.language = lang;\n    this.constants = constants;\n  }\n\n  set language(lang) {\n    this.setAttribute('language', lang);\n  }\n\n  get language() {\n    return this.getAttribute('language');\n  }\n\n  static get observedAttributes() {\n    return ['language'];\n  }\n\n  fetchData = async () => {\n    await getVeGame(history.state?.gameId)\n      .then((data) => (this.game = data))\n      .catch((error) => console.error(error));\n  };\n\n  getConstants = (key) => this.constants[this.language][key];\n\n  async connectedCallback() {\n    await this.fetchData();\n    this.render();\n  }\n\n  render = () => {\n    this.appendChild(<style>{style}</style>);\n    this.appendChild(<ClassGameComponent node={this} />);\n  };\n\n  attributeChangedCallback(name, oldV, newV) {\n    this.onChangeAttribute[name](oldV, newV);\n  }\n\n  onChangeAttribute = {\n    language: (oldV, newV) =>\n      oldV && oldV !== newV && this.handleChangeLanguage(),\n  };\n\n  handleChangeLanguage = () => {\n    this.querySelectorAll('[data-virtual-key]').forEach((ele) => {\n      ele.firstChild.textContent = this.getConstants(ele.dataset.virtualKey);\n    });\n  };\n\n  disconnectedCallback() { }\n}\n!customElements.get('ldod-ve-class-game') &&\n  customElements.define('ldod-ve-class-game', LdodVeClassGame);\n","import { LdodVeClassGame } from './ldod-ve-class-game';\n\nconst mount = async (lang, ref) => {\n  document.querySelector(ref).appendChild(new LdodVeClassGame(lang));\n};\n\nconst unMount = () => document.querySelector('ldod-ve-class-game')?.remove();\n\nconst path = '/:veId/game/:gameId';\n\nexport { mount, unMount, path };\n"],"names":["import","ClassGameComponent","node","createElement","class","getConstants","game","veTitle","id","winnerUsername","classes","headers","constants","gameTable","data","participants","sort","a","b","score","map","inter","index","externalId","position","username","toString","search","JSON","stringify","language","LdodVeClassGame","HTMLElement","constructor","lang","super","this","setAttribute","getAttribute","observedAttributes","fetchData","async","getVeGame","history","state","gameId","then","catch","error","console","key","render","appendChild","attributeChangedCallback","name","oldV","newV","onChangeAttribute","handleChangeLanguage","querySelectorAll","forEach","ele","firstChild","textContent","dataset","virtualKey","disconnectedCallback","customElements","get","define","mount","ref","document","querySelector","unMount","remove","path"],"mappings":"0MAEoFA,OAAA,gBAEpF,MAAAC,EAAe,EAAGC,KAAAA,OAEf,MACA,KAAAC,EAAC,KAAG,CAAAC,MAAM,eACRD,EAAA,OAAA,CAAK,mBAAiB,QAAQD,EAAKG,aAAa,SAAe,IAAE,IAClEF,EAAC,OAAM,KAAAD,EAAKI,KAAKC,UAElBJ,EAAC,OAAIK,GAAG,YACNL,EAAA,KAAA,OACC,MAAI,CAAAC,MAAM,eACTD,EAAA,OAAA,CAAK,mBAAiB,UAAUD,EAAKG,aAAa,WACnDF,EAAC,OAAK,KAAA,MACLA,EAAA,OAAA,KAAMD,EAAKI,KAAKG,mBAEjB,MAAI,CAAAL,MAAM,eACTD,EAAA,OAAA,CAAK,mBAAiB,YAAYD,EAAKG,aAAa,eACpD,OAAK,KAAA,MACNF,EAAC,YAAMD,EAAKI,KAAKG,mBAIpBN,EAAC,aAAA,CACAK,GAAG,2BACHE,QAAQ,qBACRC,QAAST,EAAKU,UAAUC,UACxBC,KAAMZ,EAAKI,KAAKS,aACdC,MAAK,CAACC,EAAGC,IAAMA,EAAEC,MAAQF,EAAEE,QAC3BC,KAAI,CAACC,EAAOC,KACL,CACNC,WAAYF,EAAME,WAClBC,WAAYF,EACZG,SAAUJ,EAAMI,SAChBN,MAAOE,EAAMF,MAAMO,WACnBC,OAAQC,KAAKC,UAAUR,OAG1BT,UAAWV,EAAKU,UAChBkB,SAAU5B,EAAK4B,SACf,iBAAe,eAA2B,KCrCvC,MAAMC,UAAwBC,YACnCC,YAAYC,GACJC,QACNC,KAAKN,SAAWI,EAChBE,KAAKxB,UAAYA,CACnB,CAEIkB,aAASI,GACNE,KAAAC,aAAa,WAAYH,EAChC,CAEIJ,eACK,OAAAM,KAAKE,aAAa,WAC3B,CAEWC,gCACT,MAAO,CAAC,WACV,CAEAC,UAAYC,gBACJC,EAAUC,QAAQC,OAAOC,QAC5BC,MAAMhC,GAAUsB,KAAK9B,KAAOQ,IAC5BiC,OAAOC,GAAUC,QAAQD,MAAMA,IAAM,EAG1C3C,aAAgB6C,GAAQd,KAAKxB,UAAUwB,KAAKN,UAAUoB,GAEtDT,gCACQL,KAAKI,YACXJ,KAAKe,QACP,CAEAA,OAAS,KACPf,KAAKgB,YAAYjD,EAAC,QAAO,+gDACzBiC,KAAKgB,YAAYjD,EAACF,EAAmB,CAAAC,KAAMkC,OAAQ,EAGrDiB,yBAAyBC,EAAMC,EAAMC,GACnCpB,KAAKqB,kBAAkBH,GAAMC,EAAMC,EACrC,CAEAC,kBAAoB,CAClB3B,SAAU,CAACyB,EAAMC,IACfD,GAAQA,IAASC,GAAQpB,KAAKsB,wBAGlCA,qBAAuB,KACrBtB,KAAKuB,iBAAiB,sBAAsBC,SAASC,IACnDA,EAAIC,WAAWC,YAAc3B,KAAK/B,aAAawD,EAAIG,QAAQC,WAAU,GACtE,EAGHC,uBAAyB,GAE1BC,eAAeC,IAAI,uBAClBD,eAAeE,OAAO,qBAAsBtC,GC1DzC,MAACuC,EAAQ7B,MAAOP,EAAMqC,KACzBC,SAASC,cAAcF,GAAKnB,YAAY,IAAIrB,EAAgBG,GAAK,EAG7DwC,EAAU,IAAMF,SAASC,cAAc,uBAAuBE,SAE9DC,EAAO"}