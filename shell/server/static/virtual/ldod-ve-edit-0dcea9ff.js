import{createElement as e,createFragment as t}from"@core";import"@ui/modal-bs.js";import{i as a}from"./virtual-editions-router-09df2ce5.js";import{c as o}from"./constants-833df29c.js";import"@ui/tooltip.js";import{errorPublisher as n}from"./event-module-0f223477.js";import{s as i}from"./style-a25cc231.js";import s from"@ui/bootstrap/forms-css.js";import r from"@ui/bootstrap/buttons-css.js";import"./virtual.js";const l={pt:{taxonomyManagement:"Gestão da Taxonomia",editionMembers:"Editores da Edição",editionManagers:"Gerentes da Edição",fragAnnot:"Anotar Fragmentos",regUsers:"Utilizadores registrados",vocab:"Vocabulário",open:"Aberto",closed:"Fechado",socialNetwork:"Rede Social",noMediaSource:"Nenhuma rede Social",citationsBeginDate:"Data inicial das citações",citationsFinalDate:"Data final das citações",location:"Localização Geográfica",minFrequency:"Frequência Mínima",synopse:"Sinopse",save:"Submeter",headerVeInfo_6:"Quem pode gerir as categorias: criar, apagar, alterar nome, juntar duas categorias e dividir uma categoria em duas",headerVeInfo_7:"Quem pode anotar os fragmentos",headerVeInfo_8:"Vocabulário aberto: novas categorias podem ser criadas durante a anotação. Vocabulário fechado: durante a anotação apenas pode ser usado o conjunto de categorias pré-definido.",headerVeInfo_9:"Escolha a rede social da qual pretende recolher as citações",headerVeInfo_10:"Escolha um número mínimo de vezes que os fragmentos tenham sido citados"},en:{taxonomyManagement:"Taxonomy Management",editionMembers:"Edition Editors",editionManagers:"Edition Managers",fragAnnot:"Annotate Fragments",regUsers:"Registered users",vocab:"Vocabulary",open:"Open",closed:"Closed",socialNetwork:"Social Network",noMediaSource:"No Social Network",citationsBeginDate:"Begin date of citations",citationsFinalDate:"Final date of citations",location:"Geographic Location",minFrequency:"Minimum Frquency",synopse:"Synopsis",save:"Submit",headerVeInfo_6:"Who can manage the categories: create, delete, update name, merge two categories and split one category into two",headerVeInfo_7:"Who can annotate the fragments",headerVeInfo_8:"Open vocabulary: new categories can be created when annotating. Closed vocabulary: during annotations only a predefined set of categories can be used.",headerVeInfo_9:"Choose the social network you want to collect citations from",headerVeInfo_10:"Choose the minimum number of times that the fragments have been cited"},es:{taxonomyManagement:"Gestión de Taxonomía",editionMembers:"Editores de la Edición",editionManagers:"Gerentes de Edición",fragAnnot:"Anotar Fragmentos",regUsers:"Usuarios registrados",vocab:"Vocabulario",open:"Abierto",closed:"Cerrado",socialNetwork:"Red Social",noMediaSource:"Ninguna red social",citationsBeginDate:"Data inicial das citações",citationsFinalDate:"Data final das citações",location:"Localización Geográfica",minFrequency:"Frecuencia mínima",synopse:"Sinopsis",save:"Submeter",headerVeInfo_6:"Quién puede administrar las categorías: crear, eliminar, actualizar nombre, combinar dos categorías y dividir una categoría en dos",headerVeInfo_7:"Quién puede anotar los fragmentos",headerVeInfo_8:"Vocabulario abierto: se pueden crear nuevas categorías al anotar. Vocabulario cerrado: durante la anotación sólo se puede utilizar un conjunto predefinido de categorías.",headerVeInfo_9:"Elegir la red social de la que desea recoger citas",headerVeInfo_10:"Elija un número mínimo de veces que los fragmentos hayan sido citados"}},d=["Portugal","Spain","Brazil","United Kingdom","United States","Lebanon","Angola","Mozambique"],c=({node:a})=>e(t,null,e("form",{id:"virtual-editVE",onSubmit:a.onSave,style:{minWidth:"500px"}},e("div",{class:"form-floating",style:{margin:"20px"}},e("input",{class:"form-control",disabled:!0,type:"text",name:"date",required:!0,value:a.edition.date,placeholder:"Date"}),e("label",null,a.getConstants("date"))),e("div",{style:{display:"grid",gap:"20px",margin:"20px",gridTemplateColumns:"auto auto auto"}},e("div",{class:"input-group"},e("span",{class:"input-group-text"},"LdoD-"),e("div",{class:"form-floating"},e("input",{name:"acronym",type:"text",class:"form-control",id:"headerVeInfo_1",required:!0,value:a.edition.acronym.substring(5),placeholder:"Acronym"}),e("label",{"data-virtualkey":"acronym"},a.getConstants("acronym")))),e("div",{class:"form-floating"},e("input",{id:"headerVeInfo_2",class:"form-control",type:"text",name:"title",required:!0,value:a.edition.title,placeholder:"Title"}),e("label",{"data-virtualkey":"title"},a.getConstants("title"))),e("div",{class:"form-floating"},e("select",{name:"pub",class:"form-select",id:"headerVeInfo_4"},e("option",{"data-virtualkey":"public",value:"true",selected:!0===a.edition.pub},a.getConstants("public")),e("option",{"data-virtualkey":"private",value:"false",selected:!1===a.edition.pub},a.getConstants("private"))),e("label",{for:"public"},a.getConstants("access"))),e("div",{class:"form-floating"},e("select",{id:"headerVeInfo_6",name:"taxonomyOpenManagement",class:"form-select",value:a.edition.taxonomyOpenManagement},e("option",{value:"true",selected:a.edition.taxonomyOpenManagement},a.getConstants("editionMembers")),e("option",{value:"false",selected:!a.edition.taxonomyOpenManagement},a.getConstants("editionManagers"))),e("label",{for:"public"},a.getConstants("taxonomyManagement"))),e("div",{class:"form-floating"},e("select",{id:"headerVeInfo_7",name:"taxonomyOpenAnnotation",class:"form-select",value:a.edition.taxonomyOpenAnnotation},e("option",{value:"true",selected:a.edition.taxonomyOpenAnnotation},a.getConstants("regUsers")),e("option",{value:"false",selected:!a.edition.taxonomyOpenAnnotation},a.getConstants("editionMembers"))),e("label",{for:"public"},a.getConstants("fragAnnot"))),e("div",{class:"form-floating"},e("select",{id:"headerVeInfo_8",name:"taxonomyOpenVocab",class:"form-select",value:a.edition.taxonomyOpenVocab},e("option",{value:"true",selected:a.edition.taxonomyOpenVocab},a.getConstants("open")),e("option",{value:"false",selected:!a.edition.taxonomyOpenVocab},a.getConstants("closed"))),e("label",{for:"public"},a.getConstants("vocab"))),e("div",{class:"form-floating"},e("select",{name:"mediaSource",class:"form-select",id:"headerVeInfo_9"},e("option",{value:"Twitter",selected:"Twitter"===a.edition.mediaSource},"Twitter"),e("option",{value:"noMediaSource",selected:!a.edition.mediaSource},a.getConstants("noMediaSource"))),e("label",{for:"public"},a.getConstants("socialNetwork"))),e("div",{class:"form-floating"},e("input",{class:"form-control",type:"date",name:"beginDate",value:a.edition.beginDate,placeholder:a.getConstants("citationsBeginDate")}),e("label",null,a.getConstants("citationsBeginDate"))),e("div",{class:"form-floating"},e("input",{class:"form-control",type:"date",name:"endDate",value:a.edition.beginDate,placeholder:a.getConstants("citationsFinalDate")}),e("label",null,a.getConstants("citationsFinalDate")))),e("div",{style:{display:"flex",margin:"20px",gap:"20px"}},e("div",{style:{width:"100%"}},e("label",{style:{marginBottom:"8px"}},a.getConstants("location")," (multiple selection) :"),e("select",{style:{height:"58px"},multiple:!0,name:"countries",class:"form-select"},d.map((t=>e("option",{value:t,selected:!!a.edition.countries?.split(",").includes(t)},t))))),e("div",{style:{width:"100%",marginTop:"28px"},class:"form-floating"},e("input",{id:"headerVeInfo_10",min:1,class:"form-control",type:"number",name:"minFrequency",value:a.edition.minFrequency||1,placeholder:a.getConstants("minFrequency")}),e("label",null,a.getConstants("minFrequency")))),e("div",{style:{margin:"20px"}},e("label",{style:{marginBottom:"8px"}},a.getConstants("synopse")),e("textarea",{name:"synopsis",class:"form-control",id:"floatingTextarea2",maxLength:1500,style:{fontFamily:"sans-serif",height:"100px",minWidth:"100%",maxWidth:"100%"}},a.edition.synopsis)),e("div",{style:{display:"flex",justifyContent:"end",margin:"20px"}},e("button",{type:"submit",class:"btn btn-primary"},a.getConstants("save"))),[1,2,4,6,7,8,9,10].map((t=>e("ldod-tooltip",{"data-ref":`form#virtual-editVE #headerVeInfo_${t}`,"data-virtualtooltipkey":`headerVeInfo_${t}`,placement:"top",width:"300px",content:a.getConstants(`headerVeInfo_${t}`)}))))),m=new CSSStyleSheet;m.replaceSync(i+r+s);class u extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.adoptedStyleSheets=[m],this.constants=Object.entries(l).reduce(((e,[t,a])=>(e[t]={...o[t],...a},e)),{})}get language(){return this.getAttribute("language")}get show(){return this.hasAttribute("show")}get modal(){return this.shadowRoot.querySelector("ldod-bs-modal")}static get observedAttributes(){return["data","show"]}getConstants(e){return this.constants[this.language][e]}connectedCallback(){this.addEventListener("ldod-modal-close",this.onCloseModal)}attributeChangedCallback(e,t,a){this.onChangedAttribute[e](t,a)}onCloseModal=()=>{this.toggleAttribute("show",!1)};render(){this.shadowRoot.innerHTML="",this.shadowRoot.appendChild(e(t,null,e("ldod-bs-modal",{id:"virtual-veEdit","dialog-class":"modal-xl modal-fullscreen-lg-down"},e("h5",{slot:"header-slot"},e("span",null,this.edition?.title)),e("div",{slot:"body-slot"},e(c,{node:this})))))}onSave=e=>{e.preventDefault();const t=Array.from(this.querySelectorAll("select[multiple] option")).filter((e=>e.selected)).map((({value:e})=>e)).join(","),o={...Object.fromEntries(new FormData(e.target)),countries:t};a(this.edition.externalId,o).then((e=>{this.parent.updateEdition(e),this.toggleAttribute("show",!1)})).catch((e=>{console.error(e),e?.ok||n(e?.message)}))};onChangedAttribute={data:()=>{this.render(),this.modal?.toggleAttribute("show",this.show)},show:(e,t)=>{this.render(),this.modal?.toggleAttribute("show",this.show)}}}!customElements.get("ldod-ve-edit")&&customElements.define("ldod-ve-edit",u);export{u as LdodVeEdit};
//# sourceMappingURL=ldod-ve-edit-0dcea9ff.js.map
