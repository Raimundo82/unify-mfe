import{createElement as t,createFragment as e}from"@core";import{t as a,c as s,s as n}from"./api-requests-f7bd57d8.js";import{c as r}from"./constants-833df29c.js";import{references as i}from"./virtual.js";import{t as o}from"./external-deps-beceb3c1.js";await import("@ui/table.js");const l=({node:a})=>t("div",null,t("h3",{class:"text-center"},t("span",null,a.title)),t("div",{id:"userVeInfo"},t("p",{id:"editions"},t("strong",{"data-virtual-key":"editions"},a.getConstants("editions")),t("span",null,": "),a.veUser.publicVirtualEditions.map((({acronym:s,title:n},r)=>t(e,null,t("a",{is:"nav-to",to:i.virtualEdition(s)},n),r===a.veUser.publicVirtualEditions.length-1?"":", ")))),a.veUser.gameDtos?.length>0&&t(e,null,t("p",{id:"participant"},t("strong",{"data-virtual-key":"participant"},a.getConstants("participant")),t("span",null,": "),a.veUser.gameDtos.map(((s,n)=>t(e,null,t("a",{is:"nav-to",to:i.game(s.veExternalId,s.externalId)},`${s.veTitle} - ${s.title}`),n===a.veUser.gameDtos.length-1?"":", ")))),t("p",{id:"points"},t("strong",{"data-virtual-key":"score"},a.getConstants("score")),t("span",null,": "),a.veUser.score),t("p",{id:"position"},t("strong",{"data-virtual-key":"position"},a.getConstants("position")),t("span",null,": "),a.veUser.position)),t("p",{id:"fragments"},t("strong",null,a.veUser.fragInters.length||"0"," "),t("strong",{"data-virtual-key":"fragments"},a.getConstants("fragments")))),t("ldod-table",{id:"virtual-userVeTable",classes:"table table-bordered table-hover",headers:a.constants.userVeHeaders,data:a.veUser.fragInters.map((a=>{const s=a.usedList[0];return{externalId:a.externalId,data:()=>({title:t("a",{is:"nav-to",content:!0,to:o(a.xmlId,a.urlId)},a.title),edition:t("a",{is:"nav-to",to:i.virtualEdition(a.shortName)},a.shortName),category:a.categories.map(((s,n,r)=>t(e,null,t("a",{is:"nav-to",to:i.category(a.shortName,s)},s),n===r.length-1?"":", "))),useEdition:t(e,null,t("span",null,"-> "),t("a",{is:"nav-to",content:!0,to:o(s.xmlId,s.urlId)},s.shortName))}),search:JSON.stringify(a)}})),constants:a.constants,language:a.language,"data-searchkey":"externalId"}));class u extends HTMLElement{constructor(t){super(),this.language=t,this.constants=Object.entries(a).reduce(((t,[e,a])=>(t[e]=a instanceof Array?a:{...r[e],...a},t)),{})}set language(t){this.setAttribute("language",t)}get language(){return this.getAttribute("language")}get title(){return`${this.veUser.firstname} ${this.veUser.lastname} (${this.veUser.username})`}static get observedAttributes(){return["language"]}fetchData=async()=>{await s(history.state?.username).then((t=>this.veUser=t)).catch((t=>console.error(t)))};getConstants=t=>this.constants[this.language][t];async connectedCallback(){await this.fetchData(),this.render()}render=()=>{this.appendChild(t("style",null,n)),this.appendChild(t(l,{node:this}))};attributeChangedCallback(t,e,a){this.onChangeAttribute[t](e,a)}onChangeAttribute={language:(t,e)=>t&&t!==e&&this.handleChangeLanguage()};handleChangeLanguage=()=>{this.querySelectorAll("[data-virtual-key]").forEach((t=>{t.firstChild.textContent=this.getConstants(t.dataset.virtualKey)}))};disconnectedCallback(){}}!customElements.get("ldod-user-ve")&&customElements.define("ldod-user-ve",u);const d=async(t,e)=>{document.querySelector(e).appendChild(new u(t))},g=()=>document.querySelector("ldod-user-ve")?.remove(),c="/user/:username";export{d as mount,c as path,g as unMount};
//# sourceMappingURL=ve-user-b2b41f10.js.map
