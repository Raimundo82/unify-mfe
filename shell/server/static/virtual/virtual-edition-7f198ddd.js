import{createElement as t,createFragment as a}from"@core";import{t as e,g as n,s}from"./api-requests-f7bd57d8.js";import{c as i}from"./constants-833df29c.js";import{references as r}from"./virtual.js";import{t as o}from"./external-deps-beceb3c1.js";await import("@ui/table.js");const l=({node:e})=>t("div",null,t("h3",{class:"text-center"},t("span",{"data-virtual-key":"virtualEdition"},e.getConstants("virtualEdition")),": ",t("span",null,e.title)),t("div",{id:"virtualEditionInfo"},t("p",{id:"editors"},t("strong",{"data-virtual-key":"editors"},e.getConstants("editors")),t("span",null,": "),e.participants.map(((n,s)=>t(a,null,t("a",{is:"nav-to",to:r.user(n.username)},`${n.firstname} ${n.lastname}`),s===e.participants.length-1?"":", ")))),t("p",{id:"synopse"},t("strong",{"data-virtual-key":"synopse"},e.getConstants("synopse")),t("span",null,": "),e.virtualEdition?.synopsis),t("p",{id:"taxonomy"},t("strong",{"data-virtual-key":"taxonomy"},e.getConstants("taxonomy")),t("span",null,": "),t("a",{is:"nav-to",to:r.taxonomy(e.virtualEdition?.acronym)},e.virtualEdition?.title)),t("p",{id:"fragments"},t("strong",null,e.virtualEdition?.virtualEditionInters.length," "),t("strong",{"data-virtual-key":"fragments"},e.getConstants("fragments")))),t("ldod-table",{id:"virtual-virtualEditionTable",classes:"table table-bordered table-hover",headers:e.constants.veHeaders,data:e.virtualEdition.virtualEditionInters.map((e=>{const n=e.usedList[0];return{externalId:e.externalId,data:()=>({number:e.number,title:t("a",{is:"nav-to",content:!0,to:o(e.xmlId,e.urlId)},e.title),category:e.categories.map(((a,n)=>t("div",{key:crypto.randomUUID()},t("a",{is:"nav-to",to:r.category(e.shortName,a)},a)))),useEdition:t(a,null,t("span",null,"-> "),t("a",{is:"nav-to",content:!0,to:o(n.xmlId,n.urlId)},n.shortName))}),search:JSON.stringify(e)}})),constants:e.constants,language:e.language,"data-searchkey":"externalId"}));class d extends HTMLElement{constructor(t){super(),this.language=t,this.constants=Object.entries(e).reduce(((t,[a,e])=>(t[a]=e instanceof Array?e:{...i[a],...e},t)),{})}set language(t){this.setAttribute("language",t)}get language(){return this.getAttribute("language")}static get observedAttributes(){return["language"]}get title(){return this.virtualEdition?.title}get participants(){return this.virtualEdition?.participants}fetchData=async()=>{await n(history.state?.acrn).then((t=>this.virtualEdition=t)).catch((t=>console.error(t)))};getConstants=t=>this.constants[this.language][t];async connectedCallback(){await this.fetchData(),this.render()}render=()=>{this.appendChild(t("style",null,s)),this.appendChild(t(l,{node:this}))};attributeChangedCallback(t,a,e){this.onChangeAttribute[t](a,e)}onChangeAttribute={language:(t,a)=>t&&t!==a&&this.handleChangeLanguage()};handleChangeLanguage=()=>{this.querySelectorAll("[data-virtual-key]").forEach((t=>{t.firstChild.textContent=this.getConstants(t.dataset.virtualKey)}))}}!customElements.get("ldod-virtual-edition")&&customElements.define("ldod-virtual-edition",d);const u=async(t,a)=>{document.querySelector(a).appendChild(new d(t))},c=()=>document.querySelector("ldod-virtual-edition")?.remove(),g="/acronym/:acrn";export{u as mount,g as path,c as unMount};
//# sourceMappingURL=virtual-edition-7f198ddd.js.map
