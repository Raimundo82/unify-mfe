{"version":3,"file":"ve-taxonomy-3432872b.js","sources":["../src/pages/edition/taxonomy/ve-taxonomy-component.jsx","../src/pages/edition/taxonomy/ldod-ve-taxonomy.jsx","../src/pages/edition/taxonomy/ve-taxonomy.js"],"sourcesContent":["/** @format */\n\nimport references from '@src/references';\nimport { textFragmentInter } from '../../../external-deps';\n\nimport.meta.env.DEV ? await import('@ui/table-dev.js') : await import('@ui/table.js');\n\nexport default ({ node }) => {\n\tconst data = node.taxonomy;\n\treturn (\n\t\t<div>\n\t\t\t<h3 class=\"text-center\">\n\t\t\t\t<span data-virtual-key=\"taxonomy\">{node.getConstants('taxonomy')}</span>:{' '}\n\t\t\t\t<span>{data.veTitle}</span>\n\t\t\t</h3>\n\t\t\t<div id=\"categoryInfo\">\n\t\t\t\t<p id=\"virtualEdition\">\n\t\t\t\t\t<strong data-virtual-key=\"virtualEdition\">\n\t\t\t\t\t\t{node.getConstants('virtualEdition')}\n\t\t\t\t\t</strong>\n\t\t\t\t\t<span>: </span>\n\t\t\t\t\t{\n\t\t\t\t\t\t<a is=\"nav-to\" to={references.virtualEdition(data.veAcronym)}>\n\t\t\t\t\t\t\t{data.veTitle}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t}\n\t\t\t\t</p>\n\n\t\t\t\t<p id=\"fragments\">\n\t\t\t\t\t<strong>{data.categories.length || '0'} </strong>\n\t\t\t\t\t<strong data-virtual-key=\"fragments\">{node.getConstants('fragments')}</strong>\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<ldod-table\n\t\t\t\tid=\"virtual-taxonomyVeTable\"\n\t\t\t\tclasses=\"table table-bordered table-hover\"\n\t\t\t\theaders={node.constants.taxonomyHeaders}\n\t\t\t\tdata={data.categories.map(inter => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\texternalId: inter.externalId,\n\t\t\t\t\t\tdata: () => ({\n\t\t\t\t\t\t\tcategory: (\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tis=\"nav-to\"\n\t\t\t\t\t\t\t\t\tto={references.category(inter.veAcronym, inter.name)}>\n\t\t\t\t\t\t\t\t\t{inter.name}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t),\n\n\t\t\t\t\t\t\tusers: inter.users.map(user => (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tis=\"nav-to\"\n\t\t\t\t\t\t\t\t\t\tto={references.user(\n\t\t\t\t\t\t\t\t\t\t\tuser.username\n\t\t\t\t\t\t\t\t\t\t)}>{`${user.firstname} ${user.lastname} (${user.username})`}</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\teditions: inter.editions.map(edition => (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<a is=\"nav-to\" to={references.virtualEdition(edition.acronym)}>\n\t\t\t\t\t\t\t\t\t\t{edition.title}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t\tinters: inter.veInters.map(inter => (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<a is=\"nav-to\" to={textFragmentInter(inter.xmlId, inter.urlId)}>\n\t\t\t\t\t\t\t\t\t\t{inter.title}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)),\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tsearch: JSON.stringify(inter),\n\t\t\t\t\t};\n\t\t\t\t})}\n\t\t\t\tconstants={node.constants}\n\t\t\t\tlanguage={node.language}\n\t\t\t\tdata-searchkey=\"externalId\"></ldod-table>\n\t\t</div>\n\t);\n};\n","import { getVeTaxonomy } from '../api-requests';\nimport thisConstants from '../constants';\nimport constants from '../../constants';\nimport style from '../ve-style.css?inline';\nimport VeTaxonomyComponent from './ve-taxonomy-component';\n\nexport class LdodEdTaxonomy extends HTMLElement {\n  constructor(lang) {\n    super();\n    this.language = lang;\n    this.constants = Object.entries(thisConstants).reduce(\n      (prev, [key, value]) => {\n        prev[key] =\n          value instanceof Array ? value : { ...constants[key], ...value };\n        return prev;\n      },\n      {}\n    );\n  }\n\n  set language(lang) {\n    this.setAttribute('language', lang);\n  }\n\n  get language() {\n    return this.getAttribute('language');\n  }\n\n  static get observedAttributes() {\n    return ['language'];\n  }\n\n  fetchData = async () => {\n    await getVeTaxonomy(history.state?.acrn)\n      .then((data) => (this.taxonomy = data))\n      .catch((error) => console.error(error));\n  };\n\n  getConstants = (key) => this.constants[this.language][key];\n\n  async connectedCallback() {\n    await this.fetchData();\n    this.render();\n  }\n\n  render = () => {\n    this.appendChild(<style>{style}</style>);\n    this.appendChild(<VeTaxonomyComponent node={this} />);\n  };\n\n  attributeChangedCallback(name, oldV, newV) {\n    this.onChangeAttribute[name](oldV, newV);\n  }\n\n  onChangeAttribute = {\n    language: (oldV, newV) =>\n      oldV && oldV !== newV && this.handleChangeLanguage(),\n  };\n\n  handleChangeLanguage = () => {\n    this.querySelectorAll('[data-virtual-key]').forEach((ele) => {\n      ele.firstChild.textContent = this.getConstants(ele.dataset.virtualKey);\n    });\n  };\n\n  disconnectedCallback() { }\n}\n!customElements.get('ldod-ede-taxonomy') &&\n  customElements.define('ldod-ed-taxonomy', LdodEdTaxonomy);\n","import { LdodEdTaxonomy } from './ldod-ve-taxonomy';\n\nconst mount = async (lang, ref) => {\n  document.querySelector(ref).appendChild(new LdodEdTaxonomy(lang));\n};\n\nconst unMount = () => document.querySelector('ldod-ed-taxonomy')?.remove();\n\nconst path = '/taxonomy/:acrn';\n\nexport { mount, unMount, path };\n"],"names":["import","VeTaxonomyComponent","node","data","taxonomy","createElement","class","getConstants","veTitle","id","is","to","references","virtualEdition","veAcronym","categories","length","classes","headers","constants","taxonomyHeaders","map","inter","externalId","category","name","users","user","username","firstname","lastname","editions","edition","acronym","title","inters","veInters","textFragmentInter","xmlId","urlId","search","JSON","stringify","language","LdodEdTaxonomy","HTMLElement","constructor","lang","this","Object","entries","thisConstants","reduce","prev","key","value","Array","setAttribute","getAttribute","observedAttributes","fetchData","async","getVeTaxonomy","history","state","acrn","then","catch","error","console","render","appendChild","style","attributeChangedCallback","oldV","newV","onChangeAttribute","handleChangeLanguage","querySelectorAll","forEach","ele","firstChild","textContent","dataset","virtualKey","disconnectedCallback","customElements","get","define","mount","ref","document","querySelector","unMount","remove","path"],"mappings":"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"}