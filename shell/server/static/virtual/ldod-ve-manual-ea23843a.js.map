{"version":3,"file":"ldod-ve-manual-ea23843a.js","sources":["../src/pages/virtual-editions/pages/index/components/manual/add-fragments.jsx","../src/pages/virtual-editions/pages/index/components/manual/constants.jsx","../src/pages/virtual-editions/pages/index/components/manual/manual-table.jsx","../src/pages/virtual-editions/pages/index/components/manual/ldod-ve-manual.jsx"],"sourcesContent":["/** @format */\n\nconst getAddFragsModal = node =>\n\tnode.shadowRoot.querySelector('ldod-bs-modal#virtual-add-fragments-modal');\n\nconst getLdodSearchSimple = node => getAddFragsModal(node)?.querySelector('ldod-search-simple');\n\nconst getSelectedInters = node => getLdodSearchSimple(node)?.getSelectedInters?.();\n\nconst onAdd = node => {\n\tconst selectedInters = getSelectedInters(node);\n\tif (!selectedInters?.length) return;\n\tnode.onAddFragments(selectedInters);\n\tgetAddFragsModal(node).toggleAttribute('show');\n\tgetLdodSearchSimple(node).replaceWith(renderLdodSearchSimple(node));\n};\n\nconst renderLdodSearchSimple = node => (\n\t<ldod-search-simple language={node.language} fragment></ldod-search-simple>\n);\n\nexport default ({ node }) => {\n\treturn (\n\t\t<ldod-bs-modal id=\"virtual-add-fragments-modal\" dialog-class=\"modal-xl\">\n\t\t\t<h5 slot=\"header-slot\" style={{ margin: '0' }}>\n\t\t\t\t{node.getConstants('addFrags')}\n\t\t\t</h5>\n\t\t\t<div slot=\"body-slot\" style={{ margin: 'auto 30px' }}>\n\t\t\t\t{renderLdodSearchSimple(node)}\n\t\t\t</div>\n\t\t\t<div slot=\"footer-slot\">\n\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onClick={() => onAdd(node)}>\n\t\t\t\t\t{node.getConstants('add')}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</ldod-bs-modal>\n\t);\n};\n","/** @format */\n\nexport default {\n\tmanualHeaders: ['newNumber', 'number', 'title', 'actions', 'useEdition'],\n\tpt: {\n\t\taddFrags: 'Adicionar Fragmentos',\n\t\tadd: 'Adicionar',\n\t\tundo: 'Anular',\n\t\tmanualSort: 'Ordenação Manual',\n\t\tnewNumber: (\n\t\t\t<span>\n\t\t\t\tNovo #<br />\n\t\t\t\t<small>(editável)</small>\n\t\t\t</span>\n\t\t),\n\t},\n\ten: {\n\t\tadd: 'Add',\n\t\taddFrags: 'Add Fragments',\n\t\tundo: 'Undo',\n\t\tmanualSort: 'Manual Sort',\n\t\tnewNumber: (\n\t\t\t<span>\n\t\t\t\tNew #<br />\n\t\t\t\t<small>(editable)</small>\n\t\t\t</span>\n\t\t),\n\t},\n\tes: {\n\t\tadd: 'Añadir',\n\t\taddFrags: 'Añadir Fragmentos',\n\t\tundo: 'Anular',\n\t\tmanualSort: 'Ordenación Manual',\n\t\tnewNumber: (\n\t\t\t<span>\n\t\t\t\tNuevo #<br />\n\t\t\t\t<small>(editável)</small>\n\t\t\t</span>\n\t\t),\n\t},\n};\n","/** @format */\n\nimport { isDev } from '@src/utils';\nimport { textFragmentInter } from '../../../../../../external-deps';\nimport AddFragments from './add-fragments';\n\nconst getCurrIndex = (node, id) => node.inters.map(({ externalId }) => externalId).indexOf(id);\n\nconst getNewIndex = (node, id, up) => {\n\tconst currIndex = getCurrIndex(node, id);\n\tif (up) {\n\t\treturn currIndex > node.getFirstVisibleRowIndex()\n\t\t\t? node.getPrevVisibleRowIndex(id)\n\t\t\t: currIndex;\n\t} else {\n\t\treturn currIndex < node.getLastVisibleRowIndex()\n\t\t\t? node.getNextVisibleRowIndex(id)\n\t\t\t: currIndex;\n\t}\n};\n\nconst onTop = (node, externalId, reverse = false) => {\n\tconst oldIndex = getCurrIndex(node, externalId);\n\tconst newIndex = reverse ? node.getLastVisibleRowIndex() : node.getFirstVisibleRowIndex();\n\tif (oldIndex === newIndex) return;\n\tnode.rowUpdate({ externalId, newIndex, oldIndex, changed: true });\n};\n\nconst onRemove = (node, externalId) => {\n\tnode.rowHide({ externalId, hidden: true });\n};\n\nexport const addTableRow = (node, inter, index) => {\n\tconst useInter = inter.usedList[0];\n\tconst id = inter.externalId;\n\treturn {\n\t\texternalId: id,\n\t\tnewNumber: ++index,\n\t\tnumber: inter.number,\n\t\ttitle: inter.title,\n\t\tactions: (\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\tgap: '8px',\n\t\t\t\t}}>\n\t\t\t\t<span\n\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\ticon=\"angles-up\"\n\t\t\t\t\tsize=\"14px\"\n\t\t\t\t\tfill=\"#333\"\n\t\t\t\t\ttitle=\"Move to top\"\n\t\t\t\t\tonClick={() => onTop(node, id)}></span>\n\t\t\t\t<span\n\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\ticon=\"angles-down\"\n\t\t\t\t\tsize=\"14px\"\n\t\t\t\t\tfill=\"#333\"\n\t\t\t\t\ttitle=\"Move to bottom\"\n\t\t\t\t\tonClick={() => onTop(node, id, true)}></span>\n\t\t\t\t<span\n\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\ticon=\"arrow-up\"\n\t\t\t\t\tsize=\"14px\"\n\t\t\t\t\tfill=\"#333\"\n\t\t\t\t\ttitle=\"Move up\"\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tnode.changePosition(id, getCurrIndex(node, id), getNewIndex(node, id, true))\n\t\t\t\t\t}></span>\n\t\t\t\t<span\n\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\ticon=\"arrow-down\"\n\t\t\t\t\tsize=\"14px\"\n\t\t\t\t\tfill=\"#333\"\n\t\t\t\t\ttitle=\"Move down\"\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\tnode.changePosition(\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tgetCurrIndex(node, id),\n\t\t\t\t\t\t\tgetNewIndex(node, id, false)\n\t\t\t\t\t\t)\n\t\t\t\t\t}></span>\n\t\t\t\t<span\n\t\t\t\t\tis=\"ldod-span-icon\"\n\t\t\t\t\ticon=\"trash\"\n\t\t\t\t\tsize=\"14px\"\n\t\t\t\t\tfill=\"#dc3545\"\n\t\t\t\t\ttitle=\"Remove fragment\"\n\t\t\t\t\tonClick={() => onRemove(node, id)}></span>\n\t\t\t</div>\n\t\t),\n\t\tuseEdition: (\n\t\t\t<a\n\t\t\t\tis=\"nav-to\"\n\t\t\t\tcontent\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\tto={`${textFragmentInter(useInter.xmlId, useInter.urlId)}`}>\n\t\t\t\t{`-> ${useInter.shortName}`}\n\t\t\t</a>\n\t\t),\n\t\tsearch: JSON.stringify(inter),\n\t};\n};\n\nconst getTableData = node => {\n\treturn node.inters.map((inter, index) => addTableRow(node, inter, index));\n};\n\nconst onAddFragments = node => {\n\tnode.querySelector('ldod-bs-modal#virtual-add-fragments-modal').toggleAttribute('show');\n};\n\nexport default ({ node }) => {\n\treturn (\n\t\t<div id=\"virtual-manual-table-wrapper\">\n\t\t\t<div class=\"button-container\">\n\t\t\t\t<button class=\"btn btn-primary\" onClick={node.onOpenAddFragsModal}>\n\t\t\t\t\t{node.getConstants('addFrags')}\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<ldod-table\n\t\t\t\tid=\"virtual-manualTable\"\n\t\t\t\tclasses=\"table  table-hover\"\n\t\t\t\theaders={node.constants.manualHeaders}\n\t\t\t\tdata={getTableData(node)}\n\t\t\t\tdata-rows={node.inters.length}\n\t\t\t\tconstants={node.constants[node.language]}\n\t\t\t\tdata-searchkey=\"externalId\"></ldod-table>\n\t\t</div>\n\t);\n};\n","/** @format */\n\nimport constants from '@src/pages/constants';\nimport { saveReorderedVEInters } from '@src/restricted-api-requests';\nimport { errorPublisher } from '../../../../../../event-module';\nimport assistedContants from '../assisted/constants';\nimport AddFragmentsModal from './add-fragments';\nimport thisConstants from './constants';\nimport ManualTable, { addTableRow } from './manual-table';\nimport manualStyle from './manual.css?inline';\nimport style from '../style.css?inline';\nimport formsCss from '@ui/bootstrap/forms-css.js';\nimport buttonsCss from '@ui/bootstrap/buttons-css.js';\n\nif (typeof window !== 'undefined') {\n\timport('search')\n\t\t.then(({ loadSearchSimple }) => loadSearchSimple())\n\t\t.catch(console.error);\n}\n\nconst sheet = new CSSStyleSheet();\nsheet.replaceSync(style + manualStyle + formsCss + buttonsCss);\n\nexport class LdodVeManual extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tthis.shadowRoot.adoptedStyleSheets = [sheet];\n\t\tthis.history = [];\n\t\tthis.constants = Object.entries(thisConstants).reduce((prev, [key, value]) => {\n\t\t\tprev[key] =\n\t\t\t\tvalue instanceof Array\n\t\t\t\t\t? value\n\t\t\t\t\t: { ...constants[key], ...assistedContants[key], ...value };\n\t\t\treturn prev;\n\t\t}, {});\n\t}\n\n\tget language() {\n\t\treturn this.getAttribute('language');\n\t}\n\n\tget show() {\n\t\treturn this.hasAttribute('show');\n\t}\n\n\tget modal() {\n\t\treturn this.shadowRoot.querySelector('#virtual-ve-manual');\n\t}\n\n\tget addFragsModal() {\n\t\treturn this.shadowRoot.querySelector('#virtual-add-fragments-modal');\n\t}\n\n\tget table() {\n\t\treturn this.shadowRoot.querySelector('ldod-table#virtual-manualTable');\n\t}\n\n\tget intersId() {\n\t\treturn this.inters.map(({ externalId }) => externalId);\n\t}\n\n\tget tableBody() {\n\t\treturn this.shadowRoot.querySelector('tbody');\n\t}\n\n\tget rows() {\n\t\treturn Array.from(this.tableBody.querySelectorAll('tr'));\n\t}\n\n\tget visibleRows() {\n\t\treturn this.tableBody.querySelectorAll('tr:not([hidden])');\n\t}\n\n\tget visibleFragments() {\n\t\treturn Array.from(this.visibleRows).map(\n\t\t\trow => this.inters.find(inter => inter.externalId === row.id)?.xmlId || []\n\t\t);\n\t}\n\n\tgetRowById = id => this.tableBody.querySelector(`tr[id=\"${id}\"]`);\n\n\tgetVisibleRowIndex = id =>\n\t\tArray.from(this.visibleRows)\n\t\t\t.map(row => row.id)\n\t\t\t.indexOf(id);\n\n\tgetFirstVisibleRowIndex = () => this.intersId.indexOf(this.visibleRows.item(0).id);\n\n\tgetLastVisibleRowIndex = () => this.intersId.indexOf(Array.from(this.visibleRows).at(-1).id);\n\n\tgetNextVisibleRowIndex = id =>\n\t\tthis.intersId.indexOf(this.visibleRows.item(this.getVisibleRowIndex(id) + 1).id);\n\n\tgetPrevVisibleRowIndex = id => {\n\t\treturn this.getVisibleRowIndex(id)\n\t\t\t? this.intersId.indexOf(this.visibleRows.item(this.getVisibleRowIndex(id) - 1).id)\n\t\t\t: 0;\n\t};\n\n\tgetConstants(key) {\n\t\treturn this.constants[this.language][key];\n\t}\n\n\t// open/close behavior\n\taddModalCloseEventListener() {\n\t\tthis.addEventListener('ldod-modal-close', this.onCloseModal);\n\t}\n\n\tremoveModalCloseEventListener() {\n\t\tthis.removeEventListener('ldod-modal-close', this.onCloseModal);\n\t}\n\n\tconnectedCallback() {\n\t\tthis.wrapper = this.shadowRoot.appendChild(<div id=\"'virtual-manual-ve-wrapper\"></div>);\n\t\tthis.addModalCloseEventListener();\n\t}\n\n\tonCloseModal = ({ detail }) => {\n\t\tthis.closeModal[detail.id.replace('virtual-', '')]();\n\t};\n\n\tcloseModal = {\n\t\t've-manual': () => {\n\t\t\tthis.toggleAttribute('show', false);\n\t\t},\n\t\t'add-fragments-modal': () => {\n\t\t\tthis.addFragsModal.toggleAttribute('show', false);\n\t\t\tthis.modal.toggleAttribute('show', true);\n\t\t},\n\t};\n\n\tstatic get observedAttributes() {\n\t\treturn ['show'];\n\t}\n\n\tattributeChangedCallback(name, oldV, newV) {\n\t\tthis.onChangedAttribute[name](oldV, newV);\n\t}\n\n\tonChangedAttribute = {\n\t\tshow: () => {\n\t\t\tif (this.hasAttribute('show')) {\n\t\t\t\tthis.render();\n\t\t\t\tthis.modal.toggleAttribute('show', true);\n\t\t\t} else this.resetComponentState();\n\t\t},\n\t};\n\n\tresetComponentState = () => {\n\t\tthis.history = [];\n\t\tthis.inters = null;\n\t};\n\n\trender() {\n\t\tthis.wrapper.innerHTML = '';\n\t\tthis.wrapper.appendChild(\n\t\t\t<>\n\t\t\t\t<ldod-bs-modal\n\t\t\t\t\tid=\"virtual-ve-manual\"\n\t\t\t\t\tdialog-class=\"modal-xl modal-dialog-scrollable\">\n\t\t\t\t\t<h5 slot=\"header-slot\">\n\t\t\t\t\t\t<span>{this.edition?.title} - </span>\n\t\t\t\t\t\t<span>{this.getConstants('manualSort')}</span>\n\t\t\t\t\t</h5>\n\t\t\t\t\t<div slot=\"body-slot\">\n\t\t\t\t\t\t<div id=\"virtual-manual-table-wrapper\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div slot=\"footer-slot\">\n\t\t\t\t\t\t<div style={{ display: 'flex', gap: '10px' }}>\n\t\t\t\t\t\t\t<div id=\"virtual-undoManualSort\"></div>\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" onClick={this.onSave}>\n\t\t\t\t\t\t\t\t{this.getConstants('save')}\n\t\t\t\t\t\t\t\t<span class=\"icon save-icon\"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ldod-bs-modal>\n\t\t\t\t<AddFragmentsModal node={this} />\n\t\t\t</>\n\t\t);\n\t\tthis.renderParcial();\n\t}\n\n\trenderParcial = () => {\n\t\tthis.renderTable();\n\t\tthis.renderUndoButton();\n\t};\n\n\trenderTable = () => {\n\t\tthis.shadowRoot\n\t\t\t.querySelector('#virtual-manual-table-wrapper')\n\t\t\t.replaceWith(<ManualTable node={this} />);\n\t\tthis.hydrateRows();\n\t};\n\n\thydrateRows() {\n\t\tconst rows = this.table.allRows;\n\t\trows.forEach(row => this.setFirstCellEditable(row));\n\t\trows.forEach(row => this.setTableRowsDraggable(row));\n\t}\n\n\trenderUndoButton() {\n\t\tthis.shadowRoot.querySelector('#virtual-undoManualSort').replaceWith(this.undoButton());\n\t}\n\n\tundoButton = () => (\n\t\t<button\n\t\t\tid=\"virtual-undoManualSort\"\n\t\t\ttype=\"button\"\n\t\t\tclass=\"btn btn-primary\"\n\t\t\tonClick={this.onUndo}\n\t\t\tdisabled={!this.history.length}>\n\t\t\t{this.getConstants('undo')}\n\t\t\t<span class=\"icon undo-icon\"></span>\n\t\t</button>\n\t);\n\n\tonUndo = () => {\n\t\tthis.stepBack(this.history.pop());\n\t};\n\n\tonSave = async () => {\n\t\tconst inters = await saveReorderedVEInters(\n\t\t\tthis.edition.externalId,\n\t\t\tArray.from(this.visibleRows).map(({ id }) => id)\n\t\t);\n\t\tthis.resetComponentState();\n\t\tthis.inters = inters;\n\t\tthis.renderParcial();\n\t};\n\n\trowHide = ({ externalId }) => {\n\t\tlet row = this.getRowById(externalId);\n\t\trow.toggleAttribute('hidden', true);\n\t\tthis.updateHistory(externalId, null, null, row.hasAttribute('changed'), true);\n\t\tthis.updateInters();\n\t\tthis.updateIndexCell();\n\t\tthis.renderUndoButton();\n\t};\n\n\trowAdd = inter => {\n\t\tconst interData = getInterData(inter);\n\t\tthis.inters = [interData, ...this.inters];\n\t\tconst rowData = addTableRow(this, interData, 0);\n\t\tconst tableRow = this.table.getRow(rowData, this.table);\n\t\tconst newRow = this.tableBody.insertRow(0);\n\t\ttableRow.toggleAttribute('changed');\n\t\ttableRow.id = inter.externalId;\n\t\tnewRow.replaceWith(tableRow);\n\t\tthis.updateHistory(\n\t\t\tinter.externalId,\n\t\t\t0,\n\t\t\tnull,\n\t\t\ttableRow.hasAttribute('changed'),\n\t\t\tfalse,\n\t\t\ttrue\n\t\t);\n\t\tthis.setFirstCellEditable(tableRow);\n\t\tthis.setTableRowsDraggable(tableRow);\n\t\tthis.addRowDragEventListeners(tableRow);\n\t\tthis.updateInters();\n\t\tthis.updateIndexCell();\n\t\tthis.renderUndoButton();\n\t};\n\n\trowUpdate = ({ externalId, newIndex, oldIndex, changed }) => {\n\t\tlet row = this.getRowById(externalId);\n\t\tthis.updateHistory(externalId, oldIndex, newIndex, row.hasAttribute('changed'));\n\t\trow.toggleAttribute('changed', changed);\n\t\tthis.tableBody.insertBefore(\n\t\t\tthis.tableBody.removeChild(row),\n\t\t\tthis.tableBody.querySelectorAll('tr')[newIndex]\n\t\t);\n\t\tthis.removeRowDragEventListeners(row);\n\t\tthis.addRowDragEventListeners(row);\n\t\tthis.updateInters();\n\t\tthis.updateIndexCell();\n\t\tthis.renderUndoButton();\n\t};\n\n\trollbackNewRow = row => {\n\t\tthis.inters = this.inters.filter(inter => inter.externalId !== row.id);\n\t\trow.remove();\n\t\tthis.updateInters();\n\t\tthis.updateIndexCell();\n\t\tthis.renderUndoButton();\n\t};\n\n\tstepBack = change => {\n\t\tif (!change) return;\n\t\tconst { externalId, oldIndex, changed, hidden, newRow } = change;\n\t\tlet row = this.getRowById(externalId);\n\t\tif (newRow) return this.rollbackNewRow(row);\n\t\trow.toggleAttribute('changed', changed);\n\t\tif (!row.hasAttribute('hidden')) {\n\t\t\tthis.tableBody.insertBefore(\n\t\t\t\tthis.tableBody.removeChild(row),\n\t\t\t\tthis.tableBody.querySelectorAll('tr')[oldIndex]\n\t\t\t);\n\t\t\tthis.removeRowDragEventListeners(row);\n\t\t\tthis.addRowDragEventListeners(row);\n\t\t}\n\t\thidden && row.toggleAttribute('hidden');\n\t\tthis.updateInters();\n\t\tthis.updateIndexCell();\n\t\tthis.renderUndoButton();\n\t};\n\n\tupdateHistory = (externalId, oldIndex, newIndex, changed, hidden, newRow) => {\n\t\tthis.history.push({\n\t\t\texternalId,\n\t\t\toldIndex,\n\t\t\tnewIndex,\n\t\t\tchanged,\n\t\t\thidden,\n\t\t\tnewRow,\n\t\t});\n\t};\n\n\tupdateIndexCell = () => {\n\t\tthis.visibleRows.forEach(\n\t\t\t(row, index) => (row.querySelectorAll('td')[0].textContent = index + 1)\n\t\t);\n\t};\n\n\tupdateInters = () =>\n\t\t(this.inters = this.rows.map(row =>\n\t\t\tthis.inters.find(({ externalId }) => externalId === row.id)\n\t\t));\n\n\thandleNewIndex = ({ target }) => {\n\t\tlet oldIndex = Array.from(this.visibleRows).indexOf(target.parentNode);\n\t\tconst newContent = target.textContent;\n\t\tif (this.isInvalidInput(newContent)) return (target.textContent = oldIndex + 1);\n\t\tthis.changePosition(target.parentNode.id, oldIndex, +newContent - 1);\n\t};\n\n\tisInvalidInput = input => isNaN(+input) || +input < 1 || +input > this.inters.length;\n\n\tchangePosition = (externalId, oldIndex, newIndex) => {\n\t\tif (oldIndex === newIndex) return;\n\t\tthis.rowUpdate({\n\t\t\texternalId,\n\t\t\tnewIndex,\n\t\t\toldIndex,\n\t\t\tchanged: true,\n\t\t});\n\t};\n\n\t// Drag feature\n\n\tsetFirstCellEditable = row => {\n\t\tconst cell = row.querySelector('td:nth-child(1)');\n\t\tcell.setAttribute('contenteditable', 'true');\n\t\tcell.onblur = this.handleNewIndex;\n\t};\n\n\tsetTableRowsDraggable = row => {\n\t\trow.setAttribute('draggable', 'true');\n\t\tthis.addRowDragEventListeners(row);\n\t};\n\n\tonDragOver = e => {\n\t\te.preventDefault();\n\t\te.target.parentNode.toggleAttribute('dragging', true);\n\t};\n\n\tonDragLeave = e => {\n\t\te.preventDefault();\n\t\te.target.parentNode.toggleAttribute('dragging', false);\n\t};\n\n\tonDragStart = e => {\n\t\te.dataTransfer.setData(\n\t\t\t'target',\n\t\t\tJSON.stringify({\n\t\t\t\tindex: this.intersId.indexOf(e.target.id),\n\t\t\t\texternalId: e.target.id,\n\t\t\t})\n\t\t);\n\t};\n\n\tonDrop = e => {\n\t\te.target.parentNode.toggleAttribute('dragging', false);\n\t\tconst { index, externalId } = JSON.parse(e.dataTransfer.getData('target'));\n\t\tconst newIndex = this.intersId.indexOf(e.target.parentNode.id);\n\t\tthis.changePosition(externalId, index, newIndex);\n\t};\n\n\taddRowDragEventListeners = row => {\n\t\trow.addEventListener('dragover', this.onDragOver);\n\t\trow.addEventListener('dragenter', this.onDragOver);\n\t\trow.addEventListener('dragleave', this.onDragLeave);\n\t\trow.addEventListener('dragstart', this.onDragStart);\n\t\trow.addEventListener('drop', this.onDrop);\n\t};\n\tremoveRowDragEventListeners = row => {\n\t\trow.removeEventListener('dragover', this.onDragOver);\n\t\trow.removeEventListener('dragenter', this.onDragOver);\n\t\trow.removeEventListener('dragleave', this.onDragLeave);\n\t\trow.removeEventListener('dragstart', this.onDragStart);\n\t\trow.removeEventListener('drop', this.onDrop);\n\t};\n\n\t//Add fragments\n\tonAddFragments = inters => {\n\t\tconsole.log(inters);\n\t\tconst duplicatedFrags = getDuplicatedFrags(this, inters);\n\t\tconst fragsToAdd = getFragsToAdd(this, inters);\n\t\tif (duplicatedFrags.length) notifyForDuplicatedFrags(duplicatedFrags);\n\t\tfragsToAdd.forEach(frag => this.rowAdd(frag));\n\t};\n\n\tonOpenAddFragsModal = () => {\n\t\tthis.removeModalCloseEventListener();\n\t\tthis.modal.toggleAttribute('show', false);\n\t\tthis.addModalCloseEventListener();\n\t\tthis.addFragsModal.toggleAttribute('show', true);\n\t};\n}\n!customElements.get('ldod-ve-manual') && customElements.define('ldod-ve-manual', LdodVeManual);\n\nconst notifyForDuplicatedFrags = duplicatedFrags => {\n\tconst message = `The following Fragments are duplicated: ${duplicatedFrags.join(', ')}`;\n\terrorPublisher(message);\n};\n\nconst getDuplicatedFrags = (node, inters) => {\n\treturn [\n\t\t...new Set(\n\t\t\tinters\n\t\t\t\t.filter(\n\t\t\t\t\tinter =>\n\t\t\t\t\t\tnode.visibleFragments.includes(inter.xmlId) ||\n\t\t\t\t\t\tinters.filter(({ xmlId }) => xmlId === inter.xmlId).length > 1\n\t\t\t\t)\n\t\t\t\t.map(inter => `\\n${inter.xmlId} - ${inter.title}`)\n\t\t),\n\t];\n};\n\nconst getFragsToAdd = (node, inters) => {\n\treturn [\n\t\t...new Set(\n\t\t\tinters.filter(\n\t\t\t\tinter =>\n\t\t\t\t\t!node.visibleFragments.includes(inter.xmlId) &&\n\t\t\t\t\tinters.filter(({ xmlId }) => xmlId === inter.xmlId).length === 1\n\t\t\t)\n\t\t),\n\t];\n};\n\nconst getInterData = inter => ({\n\t...inter,\n\tnumber: '',\n\tusedList: [\n\t\t{\n\t\t\texternalId: inter.externalId,\n\t\t\txmlId: inter.xmlId,\n\t\t\turlId: inter.urlId,\n\t\t\tshortName: inter.shortName,\n\t\t\ttitle: inter.interTitle,\n\t\t\tnumber: '',\n\t\t},\n\t],\n});\n"],"names":["node","shadowRoot","querySelector","getLdodSearchSimple","getAddFragsModal","onAdd","selectedInters","getSelectedInters","length","onAddFragments","toggleAttribute","replaceWith","renderLdodSearchSimple","createElement","language","fragment","AddFragmentsModal","id","slot","style","margin","getConstants","type","class","onClick","thisConstants","manualHeaders","pt","addFrags","add","undo","manualSort","newNumber","en","es","getCurrIndex","inters","map","externalId","indexOf","getNewIndex","up","currIndex","getFirstVisibleRowIndex","getPrevVisibleRowIndex","getLastVisibleRowIndex","getNextVisibleRowIndex","onTop","reverse","oldIndex","newIndex","rowUpdate","changed","addTableRow","inter","index","useInter","usedList","number","title","actions","display","justifyContent","gap","is","icon","size","fill","changePosition","rowHide","hidden","onRemove","useEdition","content","target","to","textFragmentInter","xmlId","urlId","shortName","search","JSON","stringify","getTableData","ManualTable","onOpenAddFragsModal","classes","headers","constants","data","window","import","then","loadSearchSimple","catch","console","error","sheet","CSSStyleSheet","replaceSync","formsCss","buttonsCss","LdodVeManual","HTMLElement","constructor","this","attachShadow","mode","adoptedStyleSheets","history","Object","entries","reduce","prev","key","value","Array","assistedContants","getAttribute","show","hasAttribute","modal","addFragsModal","table","intersId","tableBody","rows","from","querySelectorAll","visibleRows","visibleFragments","row","find","getRowById","getVisibleRowIndex","item","at","addModalCloseEventListener","addEventListener","onCloseModal","removeModalCloseEventListener","removeEventListener","connectedCallback","wrapper","appendChild","detail","closeModal","replace","observedAttributes","attributeChangedCallback","name","oldV","newV","onChangedAttribute","render","resetComponentState","innerHTML","createFragment","edition","onSave","renderParcial","renderTable","renderUndoButton","hydrateRows","allRows","forEach","setFirstCellEditable","setTableRowsDraggable","undoButton","onUndo","disabled","stepBack","pop","async","saveReorderedVEInters","updateHistory","updateInters","updateIndexCell","rowAdd","interData","getInterData","rowData","tableRow","getRow","newRow","insertRow","addRowDragEventListeners","insertBefore","removeChild","removeRowDragEventListeners","rollbackNewRow","filter","remove","change","push","textContent","handleNewIndex","parentNode","newContent","isInvalidInput","input","isNaN","cell","setAttribute","onblur","onDragOver","e","preventDefault","onDragLeave","onDragStart","dataTransfer","setData","onDrop","parse","getData","log","duplicatedFrags","getDuplicatedFrags","fragsToAdd","getFragsToAdd","notifyForDuplicatedFrags","frag","customElements","get","define","message","join","errorPublisher","Set","includes","interTitle"],"mappings":"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"}