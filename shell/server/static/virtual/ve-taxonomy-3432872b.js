import{createElement as t}from"@core";import{t as e,b as a,s as n}from"./api-requests-f7bd57d8.js";import{c as s}from"./constants-833df29c.js";import{references as o}from"./virtual.js";import{t as r}from"./external-deps-beceb3c1.js";await import("@ui/table.js");const i=({node:e})=>{const a=e.taxonomy;return t("div",null,t("h3",{class:"text-center"},t("span",{"data-virtual-key":"taxonomy"},e.getConstants("taxonomy")),":"," ",t("span",null,a.veTitle)),t("div",{id:"categoryInfo"},t("p",{id:"virtualEdition"},t("strong",{"data-virtual-key":"virtualEdition"},e.getConstants("virtualEdition")),t("span",null,": "),t("a",{is:"nav-to",to:o.virtualEdition(a.veAcronym)},a.veTitle)),t("p",{id:"fragments"},t("strong",null,a.categories.length||"0"," "),t("strong",{"data-virtual-key":"fragments"},e.getConstants("fragments")))),t("ldod-table",{id:"virtual-taxonomyVeTable",classes:"table table-bordered table-hover",headers:e.constants.taxonomyHeaders,data:a.categories.map((e=>({externalId:e.externalId,data:()=>({category:t("a",{is:"nav-to",to:o.category(e.veAcronym,e.name)},e.name),users:e.users.map((e=>t("div",null,t("a",{is:"nav-to",to:o.user(e.username)},`${e.firstname} ${e.lastname} (${e.username})`)))),editions:e.editions.map((e=>t("div",null,t("a",{is:"nav-to",to:o.virtualEdition(e.acronym)},e.title)))),inters:e.veInters.map((e=>t("div",null,t("a",{is:"nav-to",to:r(e.xmlId,e.urlId)},e.title))))}),search:JSON.stringify(e)}))),constants:e.constants,language:e.language,"data-searchkey":"externalId"}))};class l extends HTMLElement{constructor(t){super(),this.language=t,this.constants=Object.entries(e).reduce(((t,[e,a])=>(t[e]=a instanceof Array?a:{...s[e],...a},t)),{})}set language(t){this.setAttribute("language",t)}get language(){return this.getAttribute("language")}static get observedAttributes(){return["language"]}fetchData=async()=>{await a(history.state?.acrn).then((t=>this.taxonomy=t)).catch((t=>console.error(t)))};getConstants=t=>this.constants[this.language][t];async connectedCallback(){await this.fetchData(),this.render()}render=()=>{this.appendChild(t("style",null,n)),this.appendChild(t(i,{node:this}))};attributeChangedCallback(t,e,a){this.onChangeAttribute[t](e,a)}onChangeAttribute={language:(t,e)=>t&&t!==e&&this.handleChangeLanguage()};handleChangeLanguage=()=>{this.querySelectorAll("[data-virtual-key]").forEach((t=>{t.firstChild.textContent=this.getConstants(t.dataset.virtualKey)}))};disconnectedCallback(){}}!customElements.get("ldod-ede-taxonomy")&&customElements.define("ldod-ed-taxonomy",l);const d=async(t,e)=>{document.querySelector(e).appendChild(new l(t))},u=()=>document.querySelector("ldod-ed-taxonomy")?.remove(),c="/taxonomy/:acrn";export{d as mount,c as path,u as unMount};
//# sourceMappingURL=ve-taxonomy-3432872b.js.map
